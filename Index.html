
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Uni Hyper Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <style>
    :root {
      --bg: #161821;
      --bg-gradient: radial-gradient(circle at top, #2a3245 0, #10121a 45%, #05060a 100%);
      --bg-elevated: #1f2230;
      --bg-sidebar: #181b27;
      --border: #2f3445;
      --text: #f7f7ff;
      --muted: #a4aac5;
      --accent: #7b8cff;
      --accent-soft: rgba(123, 140, 255, 0.16);
      --danger: #ff6b81;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.55);
      --radius-card: 18px;
    }

    .light {
      --bg: #f5f5fb;
      --bg-gradient: radial-gradient(circle at top, #ffffff 0, #eceefd 40%, #dde2ff 100%);
      --bg-elevated: #ffffff;
      --bg-sidebar: #f1f3ff;
      --border: #d3d7f0;
      --text: #1a1c2c;
      --muted: #6f7593;
      --accent: #4a5cff;
      --accent-soft: rgba(74, 92, 255, 0.18);
      --danger: #ff4d6a;
      --shadow-soft: 0 16px 40px rgba(32, 36, 90, 0.18);
      --radius-card: 18px;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
      background: var(--bg-gradient);
      color: var(--text);
      overflow: hidden;
    }

    body {
      display: flex;
      flex-direction: column;
    }

    /* ---------- Topbar ---------- */

    #topbar {
      height: 52px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 14px;
      background: rgba(5, 7, 15, 0.9);
      backdrop-filter: blur(18px);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
      border-bottom: 1px solid rgba(255, 255, 255, 0.04);
      z-index: 20;
    }

    body.light #topbar {
      background: rgba(255, 255, 255, 0.92);
      box-shadow: 0 12px 30px rgba(39, 46, 120, 0.25);
    }

    #topbar-left,
    #topbar-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    #appTitle {
      font-weight: 800;
      font-size: 17px;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    #appTitle::before {
      content: "üìö";
      font-size: 16px;
    }

    button,
    select,
    input,
    textarea {
      font-family: inherit;
      font-size: 13px;
    }

    button,
    select {
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      padding: 6px 11px;
      background: rgba(9, 11, 25, 0.9);
      color: var(--text);
      cursor: pointer;
      outline: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: 0.15s ease transform, 0.15s ease box-shadow, 0.15s ease background-color, 0.15s ease border-color;
    }

    body.light button,
    body.light select {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(0, 0, 0, 0.05);
    }

    button:hover {
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.35);
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0px) scale(0.97);
      box-shadow: none;
    }

    #darkModeBtn {
      font-size: 14px;
      padding-inline: 10px;
    }

    /* ---------- Tabbar ---------- */

    #tabbar {
      display: flex;
      align-items: center;
      padding: 5px 10px;
      background: radial-gradient(circle at top left, rgba(123, 140, 255, 0.2), transparent 40%);
      border-bottom: 1px solid rgba(255, 255, 255, 0.03);
      gap: 4px;
      flex-wrap: wrap;
    }

    .tab-btn {
      border-radius: 999px;
      border: 1px solid transparent;
      padding: 4px 11px 5px;
      font-size: 12px;
      cursor: pointer;
      background: transparent;
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: 0.16s ease background-color, 0.16s ease color, 0.16s ease transform;
    }

    .tab-btn::before {
      font-size: 13px;
    }

    .tab-btn[data-tab="notes"]::before { content: "‚úèÔ∏è"; }
    .tab-btn[data-tab="cards"]::before { content: "üé¥"; }
    .tab-btn[data-tab="planner"]::before { content: "üóìÔ∏è"; }
    .tab-btn[data-tab="formulas"]::before { content: "‚àë"; }
    .tab-btn[data-tab="tools"]::before { content: "üßÆ"; }
    .tab-btn[data-tab="learn"]::before { content: "üìñ"; }
    .tab-btn[data-tab="tasks"]::before { content: "üìå"; }
    .tab-btn[data-tab="brain"]::before { content: "üí≠"; }
    .tab-btn[data-tab="stats"]::before { content: "üìä"; }

    .tab-btn.active {
      background: var(--accent-soft);
      border-color: rgba(255, 255, 255, 0.16);
      color: var(--text);
      transform: translateY(-1px);
    }

    /* ---------- Main Layout ---------- */

    #main {
      flex: 1;
      display: flex;
      min-height: 0;
      padding: 10px 10px 12px 10px;
      gap: 10px;
    }

    /* ---------- Notizen-Bereich ---------- */

    #notesLayout.section {
      flex: 1;
      display: none;
      min-height: 0;
      background: transparent;
    }

    #notesLayout.section.active {
      display: flex;
    }

    #sidebarNotes {
      width: 130px;
      background: linear-gradient(180deg, rgba(15, 18, 32, 0.98), rgba(12, 14, 26, 0.98));
      border-radius: var(--radius-card);
      border: 1px solid rgba(255, 255, 255, 0.04);
      box-shadow: var(--shadow-soft);
      padding: 10px 8px 10px 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    #sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    #sidebar-section-title {
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      opacity: 0.72;
    }

    #sidebarNotes button {
      font-size: 11px;
      padding: 3px 8px;
    }

    #templateSelect {
      width: 100%;
      margin-top: 4px;
      font-size: 11px;
      padding-block: 4px;
    }

    #pageList {
      flex: 1;
      overflow-y: auto;
      padding-right: 4px;
      margin-top: 4px;
    }

    .page-thumb {
      position: relative;
      background: rgba(10, 12, 24, 0.96);
      border-radius: 12px;
      border: 1.5px solid transparent;
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.5);
      margin-bottom: 7px;
      cursor: pointer;
      padding: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      text-align: center;
      color: var(--muted);
      transition: 0.15s ease border-color, 0.15s ease transform, 0.15s ease background-color;
    }

    .page-thumb.active {
      border-color: var(--accent);
      background: rgba(123, 140, 255, 0.18);
      color: var(--text);
      transform: translateY(-1px);
    }

    .page-thumb span.index {
      position: absolute;
      bottom: 4px;
      right: 6px;
      font-size: 9px;
      opacity: 0.7;
    }

    #canvasWrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 6px;
      min-width: 0;
      gap: 8px;
    }

    #toolbar {
      display: flex;
      align-items: center;
      gap: 6px;
      background: radial-gradient(circle at top left, rgba(123, 140, 255, 0.3), rgba(15, 16, 32, 0.98));
      padding: 6px 12px;
      border-radius: 999px;
      box-shadow: var(--shadow-soft);
      flex-wrap: wrap;
      border: 1px solid rgba(255, 255, 255, 0.04);
    }

    body.light #toolbar {
      background: radial-gradient(circle at top left, rgba(123, 140, 255, 0.16), #ffffff);
    }

    #canvas {
      background: #fbfbff;
      border-radius: 22px;
      box-shadow: 0 22px 55px rgba(5, 6, 17, 0.85);
      touch-action: none;
      border: 1px solid rgba(0, 0, 0, 0.08);
    }

    body.light #canvas {
      background: #ffffff;
    }

    input[type="color"] {
      border: none;
      background: transparent;
      width: 28px;
      height: 28px;
      padding: 0;
      border-radius: 999px;
      overflow: hidden;
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.2);
    }

    .tool-btn {
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      padding: 4px 10px;
      font-size: 12px;
      background: rgba(6, 8, 20, 0.9);
      cursor: pointer;
      color: var(--muted);
    }

    .tool-btn.active {
      border-color: var(--accent);
      background: rgba(123, 140, 255, 0.28);
      color: var(--text);
    }

    .stroke-btn {
      padding: 3px 8px;
      font-size: 11px;
      opacity: 0.85;
    }

    .stroke-btn.active {
      border-color: var(--accent);
      background: rgba(123, 140, 255, 0.18);
      color: var(--text);
    }

    label {
      font-size: 11px;
      opacity: 0.8;
    }

    /* ---------- Generische Sektionen (andere Tabs) ---------- */

    .section {
      flex: 1;
      padding: 0;
      display: none;
      overflow: auto;
    }

    .section.active {
      display: block;
    }

    .card {
      background: var(--bg-elevated);
      border-radius: var(--radius-card);
      padding: 11px 12px;
      margin-bottom: 10px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(255, 255, 255, 0.04);
    }

    .card h3 {
      margin: 0 0 6px 0;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card h3::before {
      content: "‚Ä¢";
      font-size: 18px;
      color: var(--accent);
    }

    .row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .row > * {
      flex: 1;
      min-width: 150px;
    }

    input[type="text"],
    input[type="date"],
    input[type="number"],
    textarea,
    select#notebookSelect,
    select#templateSelect,
    select#studyDeckSelect {
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      padding: 7px 11px;
      background: rgba(7, 9, 20, 0.9);
      color: var(--text);
      width: 100%;
      box-sizing: border-box;
    }

    body.light input[type="text"],
    body.light input[type="date"],
    body.light input[type="number"],
    body.light textarea,
    body.light select {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(0, 0, 0, 0.06);
    }

    textarea {
      min-height: 70px;
      border-radius: 14px;
      line-height: 1.4;
      resize: vertical;
    }

    .pill {
      border-radius: 999px;
      padding: 2px 9px;
      font-size: 11px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      display: inline-block;
      margin-right: 4px;
      margin-bottom: 4px;
      background: rgba(15, 18, 40, 0.9);
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      font-size: 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.05);
    }

    /* ---------- Lernen-Layout ---------- */
    #learnLayout {
      display: flex;
      gap: 10px;
      height: 100%;
    }

    #learnSidebar {
      width: 210px;
      background: var(--bg-sidebar);
      border-radius: var(--radius-card);
      border: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: var(--shadow-soft);
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    #learnSubjects,
    #learnTopics {
      margin-top: 4px;
      padding: 0;
      list-style: none;
      max-height: 40%;
      overflow-y: auto;
    }

    .learn-item {
      padding: 5px 9px;
      border-radius: 999px;
      font-size: 12px;
      cursor: pointer;
      margin-bottom: 4px;
      background: rgba(0,0,0,0.08);
      color: var(--muted);
      transition: 0.15s;
    }

    .learn-item.active {
      background: var(--accent-soft);
      color: var(--text);
    }

    #learnContent {
      flex: 1;
      overflow-y: auto;
    }

    .learn-heading {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .learn-subheading {
      font-size: 13px;
      opacity: 0.8;
      margin-bottom: 8px;
    }

    .learn-section-title {
      font-size: 13px;
      font-weight: 600;
      margin-top: 8px;
      margin-bottom: 4px;
    }

    .learn-list {
      margin-top: 0;
      padding-left: 18px;
      font-size: 13px;
    }

    .learn-chiprow {
      margin-top: 4px;
      margin-bottom: 6px;
    }

    .learn-chip {
      display: inline-block;
      padding: 2px 8px;
      font-size: 11px;
      border-radius: 999px;
      background: rgba(255,255,255,0.05);
      margin-right: 4px;
      margin-bottom: 4px;
    }

    @media (max-width: 860px) {
      #sidebarNotes { width: 105px; }
      button, select { font-size: 11px; padding: 4px 9px; }
      #toolbar { font-size: 11px; padding-inline: 10px; }
      #learnLayout { flex-direction: column; }
      #learnSidebar { width: 100%; flex-direction: row; overflow-x: auto; }
    }


/* ========== AMINOS√ÑURE-STRUKTUR ========== */
/* ====== Aminos√§ure-Struktur (funktioniert garantiert) ====== */
/* ======= Aminos√§ure-Struktur (funktioniert garantiert) ====== */
.amino-structure {
  display: grid;
  grid-template-columns: auto auto auto;
  grid-template-rows: auto auto auto;
  justify-items: center;
  align-items: center;
  gap: 4px;
  font-size: 1.2rem;
  font-family: system-ui, sans-serif;
}

/* ========= Aminos√§ure-Struktur ‚Äì saubere Version ========= */

#flashcardPreview {
  margin: 20px 0;
  display: flex;
  justify-content: center;   /* Struktur in der Mitte des Karteikarten-Bereichs */
}

/* Die Karte mit der Struktur */
.amino-structure {
  display: grid;
  grid-template-columns: auto auto auto;
  grid-template-rows: auto auto auto;
  gap: 6px;
  justify-items: center;
  align-items: center;
  padding: 16px 20px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.03);
  font-size: 1.2rem;
  font-family: system-ui, sans-serif;
  width: max-content;        /* ganz wichtig: wird nur so breit wie der Inhalt */
}

/* Positionen der Atome */
.amino-structure .top    { grid-row: 1; grid-column: 2; }
.amino-structure .left   { grid-row: 2; grid-column: 1; }

.amino-structure .center {
  grid-row: 2;
  grid-column: 2;
  font-weight: 700;

  position: relative;
  z-index: 2;
  padding: 0 0.25em 0.05em;           /* bisschen Abstand um das C herum */
  background-color: #181a24;          /* gleiche Farbe wie dein Kartenhintergrund */
  border-radius: 4px;                 /* leicht abgerundet, damit es weich aussieht */
}

.amino-structure .right  { grid-row: 2; grid-column: 3; }
.amino-structure .bottom { grid-row: 3; grid-column: 2; }

/* Bindungen ‚Äì beide im selben Grid-Feld in der Mitte -> Kreuz */
.amino-structure .bond-v {
  grid-row: 2;
  grid-column: 2;
  width: 3px;
  height: 40px;              /* L√§nge vertikale Linie */
  background-color: #a88242;
}

.amino-structure .bond-h {
  grid-row: 2;
  grid-column: 2;
  height: 3px;
  width: 70px;               /* L√§nge horizontale Linie */
  background-color: #a88242;
}

/* Sch√∂ne Anzeige f√ºr ASCII-Aminos√§ure-Strukturen */
.amino-pretty {
  white-space: pre;          /* Zeilenumbr√ºche und Leerzeichen beibehalten */
  font-family: "Fira Code", Consolas, monospace;
  font-size: 1.1rem;
  line-height: 1.4;
  text-align: center;
}

</style>

</head>
<body>
  <!-- TOPBAR -->
  <div id="topbar">
    <div id="topbar-left">
      <div id="appTitle">Uni Hyper Notes</div>
      <select id="notebookSelect"></select>
      <button id="addNotebookBtn">Ôºã Notizbuch</button>
    </div>
    <div id="topbar-right">
      <button id="darkModeBtn">üåô / ‚òÄÔ∏è</button>
      <button id="exportPageBtn">üñºÔ∏è Seite als PNG</button>
      <button id="exportJsonBtn">üíæ Backup</button>
              <button id="importJsonBtn">üìÇ Backup laden</button>
              <input type="file" id="importJsonInput" accept="application/json" style="display:none;">
    </div>
  </div>

  <!-- TABBAR -->
  <div id="tabbar">
    <button class="tab-btn active" data-tab="notes">Notizen</button>
    <button class="tab-btn" data-tab="cards">Karteikarten</button>
    <button class="tab-btn" data-tab="planner">Planer</button>
    <button class="tab-btn" data-tab="formulas">Formeln</button>
    <button class="tab-btn" data-tab="tools">Tools</button>
    <button class="tab-btn" data-tab="learn">Lernen</button>
    <button class="tab-btn" data-tab="tasks">Aufgaben</button>
    <button class="tab-btn" data-tab="brain">Brain-Dump</button>
    <button class="tab-btn" data-tab="stats">Stats</button>
  </div>

  <div id="main">
    <!-- NOTIZEN-TAB -->
    <div id="notesLayout" class="section active">
      <div id="sidebarNotes">
        <div id="sidebar-header">
          <div><div id="sidebar-section-title">Seiten</div></div>
          <button id="addPageBtn" title="Neue Seite">Ôºã</button>
        </div>
        <div>
          <label for="templateSelect">Template:</label><br>
          <select id="templateSelect">
            <option value="blank">Blanko</option>
            <option value="lined">Liniert</option>
            <option value="dotted">Dotted</option>
            <option value="grid">Kariert</option>
          </select>
        </div>

<div style="margin-top:6px;">
  <label for="templateSizeSelect">Rastergr√∂√üe:</label><br>
  <select id="templateSizeSelect">
    <option value="small">Fein</option>
    <option value="medium" selected>Mittel</option>
    <option value="large">Gro√ü</option>
  </select>
</div>


        <div id="pageList"></div>
      </div>

      <div id="canvasWrapper">
        <div id="toolbar">
          <label>Tool:</label>
          <button class="tool-btn active" data-tool="pen">Stift</button>
          <button class="tool-btn" data-tool="highlighter">Marker</button>
          <button class="tool-btn" data-tool="eraser">Radierer</button>
          <button class="tool-btn" data-tool="line">Linie</button>
          <button class="tool-btn" data-tool="rect">Rechteck</button>
          <button class="tool-btn" data-tool="circle">Kreis</button>

          <label>Farbe:</label>
          <input type="color" id="colorPicker" value="#000000">

          <label>St√§rke:</label>
          <button class="stroke-btn active" data-width="2">D√ºnn</button>
          <button class="stroke-btn" data-width="5">Mittel</button>
          <button class="stroke-btn" data-width="9">Dick</button>

          <button id="undoBtn">‚Ü∂ Undo</button>
          <button id="redoBtn">‚Ü∑ Redo</button>

          <button id="clearBtn">üßπ Seite leeren</button>
        </div>

        <canvas id="canvas"></canvas>
      </div>
    </div>

    <!-- KARTEIKARTEN-TAB -->
    <div id="cardsSection" class="section">
      <div class="card">
        <h3>Karteikarten-Decks</h3>
        <div class="row">
          <div>
            <input type="text" id="cardDeckName" placeholder="Neues Deck (z.B. Allgemeine Chemie)">
          </div>
          <div style="flex:0 0 auto;">
            <button id="addDeckBtn">Ôºã Deck</button>
          </div>
        </div>
        <div id="deckList"></div>
      </div>

      <div class="card">
        <h3>Karteikarten in Deck</h3>

 <!-- Hier wird sp√§ter die Aminos√§ure-Struktur angezeigt -->
     <div id="flashcardPreview" style="margin:20px 0;"></div>

<div id="aminoControls" style="margin:10px 0; display:flex; gap:8px; justify-content:center;">
  <button id="aminoFlipBtn">Vorder-/R√ºckseite</button>
  <button id="aminoNextBtn">N√§chste Aminos√§ure</button>
  <button id="aminoRandomBtn">Zuf√§llig</button>
</div>


        <div class="row">
          <div><textarea id="cardQuestion" placeholder="Frage / Vorderseite"></textarea></div>
          <div><textarea id="cardAnswer" placeholder="Antwort / R√ºckseite"></textarea></div>
        </div>
        <div class="row">
          <div><input type="text" id="cardTags" placeholder="Tags (z.B. S√§ure-Base, wichtig)"></div>
          <div style="flex:0 0 auto;"><button id="addCardBtn">Ôºã Karte speichern</button></div>
        </div>
        <div id="cardList"></div>
      </div>

      <div class="card">
        <h3>Lernmodus (Spaced-Repetition light)</h3>
        <div class="row">
          <div><select id="studyDeckSelect"></select></div>
          <div style="flex:0 0 auto;"><button id="startStudyBtn">Lernen starten</button></div>
        </div>
        <div id="studyArea" style="margin-top:8px; display:none;">
          <div id="studyQuestion" style="margin-bottom:6px; font-weight:600;"></div>
          <div id="studyAnswer" style="margin-bottom:6px; display:none;"></div>
          <button id="revealAnswerBtn">Antwort anzeigen</button>
          <div style="margin-top:6px; display:none;" id="studyFeedback">
            <span style="font-size:12px;">Wie gut wusstest du es?</span><br>
            <button class="studyGradeBtn" data-grade="0">Keine Ahnung</button>
            <button class="studyGradeBtn" data-grade="1">Schwer</button>
            <button class="studyGradeBtn" data-grade="2">Okay</button>
            <button class="studyGradeBtn" data-grade="3">Super</button>
          </div>
        </div>
      </div>
    </div>

    <!-- PLANER-TAB -->
    <div id="plannerSection" class="section">
      <div class="card">
        <h3>Deine n√§chsten Pr√ºfungen</h3>
        <div class="row">
          <div><input type="text" id="examName" placeholder="Modul / Pr√ºfung"></div>
          <div><input type="date" id="examDate"></div>
          <div><input type="number" id="examWeight" placeholder="ECTS / Wichtigkeit" min="1"></div>
          <div style="flex:0 0 auto;"><button id="addExamBtn">Ôºã Pr√ºfung speichern</button></div>
        </div>
        <div id="examList"></div>
      </div>

      <div class="card">
        <h3>Fokus heute</h3>
        <div class="row">
          <div><input type="text" id="blockTopic" placeholder="Thema (z.B. Allg. Chemie ‚Äì S√§ure-Base)"></div>
          <div><input type="number" id="blockMinutes" placeholder="Minuten (z.B. 45)" min="5"></div>
          <div style="flex:0 0 auto;"><button id="startBlockBtn">‚è±Ô∏è Fokus starten</button></div>
        </div>
        <div id="focusStatus" style="margin-top:6px; font-size:13px;"></div>
      </div>
    </div>

    <!-- FORMELN-TAB -->
    <div id="formulasSection" class="section">
      <div class="card">
        <h3>Formel hinzuf√ºgen</h3>
        <div class="row">
          <div><input type="text" id="formulaName" placeholder="Name (z.B. ideale Gasgleichung)"></div>
          <div><input type="text" id="formulaExpression" placeholder="Formel (z.B. p¬∑V = n¬∑R¬∑T)"></div>
        </div>
        <div class="row">
          <div><input type="text" id="formulaTopic" placeholder="Thema (z.B. Allgemeine Chemie / Thermodynamik)"></div>
          <div><input type="text" id="formulaVariables" placeholder="Variablen & Einheiten (p=..., V=..., ...)"></div>
        </div>
        <div class="row">
          <div><textarea id="formulaNotes" placeholder="Hinweise, typische Fehler, etc."></textarea></div>
          <div style="flex:0 0 auto; align-self:flex-end; display:flex; flex-direction:column; gap:6px;">
            <button id="addFormulaBtn">Ôºã Formel speichern</button>
            <button id="loadBiotechFormulasBtn" type="button">üì• Biotech-Basisformeln laden</button>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>Formelsammlung</h3>
        <input type="text" id="formulaFilter" placeholder="Suche nach Name / Thema..." style="margin-bottom:6px;">
        <div id="formulaList"></div>
      </div>
    </div>

    <!-- TOOLS-TAB (Rechentool) -->
    <div id="toolsSection" class="section">
      <div class="card">
        <h3>Chemie-Rechentool</h3>
        <div class="row">
          <div>
            <select id="toolFormulaSelect">
              <option value="dilution">Verd√ºnnung (c‚ÇÅ¬∑V‚ÇÅ = c‚ÇÇ¬∑V‚ÇÇ)</option>
              <option value="lambert">Lambert-Beer-Gesetz (A = Œµ¬∑c¬∑l)</option>
            </select>
          </div>
        </div>
        <div id="toolInputs" style="margin-top:8px;"></div>
        <div style="margin-top:6px;">
          <button id="toolCalcBtn">Berechnen</button>
          <span id="toolResult" style="font-size:13px; margin-left:8px;"></span>
        </div>
      </div>
    </div>

    <!-- LERNEN-TAB -->
    <div id="learnSection" class="section">
      <div id="learnLayout">
        <div id="learnSidebar">
          <div>
            <div style="font-size:11px; letter-spacing:0.12em; text-transform:uppercase; opacity:0.7;">F√§cher</div>
            <ul id="learnSubjects"></ul>
          </div>
          <div>
            <div style="font-size:11px; letter-spacing:0.12em; text-transform:uppercase; opacity:0.7; margin-top:6px;">Themen</div>
            <ul id="learnTopics"></ul>
          </div>
        </div>
        <div id="learnContent">
          <!-- wird per JS gef√ºllt -->
        </div>
      </div>
    </div>

    <!-- AUFGABEN-TAB -->
    <div id="tasksSection" class="section">
      <div class="card">
        <h3>Rechenaufgabe / Verst√§ndnisaufgabe hinzuf√ºgen</h3>
        <div class="row">
          <div><input type="text" id="taskTitle" placeholder="Kurzbeschreibung (z.B. pV=nRT umstellen)"></div>
          <div><input type="text" id="taskTopic" placeholder="Thema / Modul (z.B. Allg. Chemie)"></div>
        </div>
        <div class="row">
          <div><textarea id="taskText" placeholder="Aufgabe (Text oder kopierter Inhalt)"></textarea></div>
          <div><textarea id="taskNotes" placeholder="Dein L√∂sungsweg / Notizen (optional)"></textarea></div>
        </div>
        <div class="row">
          <div style="flex:0 0 auto;"><button id="addTaskBtn">Ôºã Aufgabe speichern</button></div>
        </div>
      </div>

      <div class="card">
        <h3>Aufgaben-Liste</h3>
        <div id="taskList"></div>
      </div>
    </div>

    <!-- BRAIN-DUMP-TAB -->
    <div id="brainSection" class="section">
      <div class="card">
        <h3>Brain-Dump (Gedanken, Sorgen, Ideen)</h3>
        <textarea id="brainText" placeholder="Alles, was im Kopf rumschwirrt..."></textarea>
        <div style="margin-top:6px;">
          <button id="saveBrainBtn">Speichern</button>
          <span id="brainStatus" style="font-size:11px; opacity:0.7; margin-left:6px;"></span>
        </div>
      </div>

      <div class="card">
        <h3>Vergangene Eintr√§ge</h3>
        <div id="brainHistory"></div>
      </div>
    </div>

    <!-- STATS-TAB -->
    <!-- STATS-TAB -->
<div id="statsSection" class="section">
  	<div class="card">
   	 <h3>Lern-Stats (einfach)</h3>
   	 <div id="statsContent"></div>
  	</div>

  <div class="card">
    	<h3>Sync-Einstellungen</h3>
   	 <div class="row">
     		 <div>
        <input type="text" id="syncIdInput" placeholder="z.B. CARINA-UNI-01">
      </div>
      <div style="flex:0 0 auto;">
        <button id="syncSaveIdBtn">Sync-ID speichern</button>
      </div>
    </div>
    <div style="margin-top:6px; font-size:12px; opacity:0.8;">
      Ger√§te mit der gleichen Sync-ID greifen auf dieselben Cloud-Daten zu.
      Wenn du keine Sync-ID setzt, bleibt alles nur lokal auf diesem Ger√§t.
    </div>
    <div id="syncStatus" style="margin-top:4px; font-size:11px; opacity:0.7;"></div>
  </div>
</div>


<script type="module">

// ---------- Firebase Setup ----------
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyC0gBG9LNOOjWib7u5a5Ztq2bd9MGg7k",
  authDomain: "uni-hyper-notes.firebaseapp.com",
  projectId: "uni-hyper-notes",
  storageBucket: "uni-hyper-notes.firebasestorage.app",
  messagingSenderId: "1430311668000",
  appId: "1:1430311668000:web:802d30dea4e71fabfa77f45",
  measurementId: "G-2QN7W0W73K"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Sync-ID
let syncId = localStorage.getItem("uniHyperNotes_syncId") || null;

function askForSyncId() {
  if (!syncId) {
    const defaultId = "user-" + Math.random().toString(36).slice(2, 8);
    const entered = prompt("Sync-ID eingeben oder neue anlegen:", defaultId);
    syncId = (entered || defaultId).trim();
    localStorage.setItem("uniHyperNotes_syncId", syncId);
  }
  return syncId;
}

// --- Elemente f√ºr die Sync-UI ---
const syncIdInput  = document.getElementById("syncIdInput");
const syncSaveBtn  = document.getElementById("syncSaveIdBtn");
const syncStatusEl = document.getElementById("syncStatus");

// Sync-ID ins Eingabefeld schreiben (falls schon vorhanden)
if (syncIdInput && syncId) {
  syncIdInput.value = syncId;
}

// Statusanzeige bequem setzen
function updateSyncStatus(msg) {
  if (syncStatusEl) {
    syncStatusEl.textContent = msg;
  }
  console.log("[SYNC]", msg);
}

// ---------- LERN-DATEN (Allgemeine Chemie, erweitert) ----------
const learnData = {
  subjects: [
    {
      id: "allg-chem",
      name: "Allgemeine Chemie",
      description:
        "Grundlagen des Aufbaus der Materie, chemische Bindungen, St√∂chiometrie, S√§ure-Base, Redox, Titrationen & Laborsicherheit ‚Äì auf Klausur-Niveau.",
      topics: [
        {
          id: "aufbau-materie",
          title: "Aufbau der Materie & Atome",
          tags: ["Atome", "Elektronenh√ºlle", "Kern"],
          goals: [
            "Aufbau von Atomen (Protonen, Neutronen, Elektronen) sicher erkl√§ren.",
            "Ordnungszahl, Massenzahl und Isotope unterscheiden und Beispiele angeben.",
            "Elektronenkonfiguration f√ºr einfache Elemente schreiben (z. B. H, He, C, O, Na, Cl)."
          ],
          summary:
            "Materie besteht aus Atomen. Ein Atom besitzt einen positiv geladenen Kern (Protonen und Neutronen) und eine negativ geladene Elektronenh√ºlle. Die Ordnungszahl Z entspricht der Protonenzahl und definiert das Element. Isotope haben dieselbe Protonenzahl, aber unterschiedliche Neutronenzahlen. F√ºr die Chemie sind vor allem die Valenzelektronen (Au√üenelektronen) entscheidend, da sie an Bindungen beteiligt sind.",
          keyPoints: [
            "Ordnungszahl Z = Anzahl der Protonen = Anzahl der Elektronen im neutralen Atom.",
            "Massenzahl A ‚âà Protonen + Neutronen; Neutronenzahl N = A ‚àí Z.",
            "Isotope: z. B. ¬π¬≤C, ¬π¬≥C, ¬π‚Å¥C ‚Äì alle Kohlenstoff, aber mit unterschiedlicher Massenzahl.",
            "Elektronenkonfiguration zeigt Verteilung in Schalen/Unterschalen (z. B. 1s¬≤ 2s¬≤ 2p¬≤).",
            "Valenzelektronen bestimmen Reaktivit√§t (z. B. Edelgase: volle Schale ‚Üí sehr reaktionstr√§ge)."
          ],
          formulas: ["A = Z + N"],
          visual: `
            <div>Atommodell (vereinfachtes Kugelmodell):</div>
            <svg viewBox="0 0 140 80" width="140" height="80">
              <circle cx="45" cy="40" r="18" fill="rgba(123,140,255,0.35)" stroke="currentColor"/>
              <circle cx="95" cy="40" r="26" fill="none" stroke="currentColor" stroke-dasharray="4 3"/>
              <circle cx="95" cy="16" r="3" fill="currentColor"/>
              <circle cx="116" cy="40" r="3" fill="currentColor"/>
              <circle cx="74" cy="40" r="3" fill="currentColor"/>
            </svg>
            <div style="font-size:11px;opacity:0.8;margin-top:4px;">Innen: Kern (p‚Å∫, n‚Å∞) ‚Äì au√üen: Elektronen auf Schale.</div>
          `
        },
        {
          id: "periodensystem",
          title: "Periodensystem der Elemente (PSE)",
          tags: ["PSE", "Trends", "Gruppen"],
          goals: [
            "Perioden und Gruppen im PSE sicher benennen.",
            "Hauptgruppen (Alkalimetalle, Erdalkalimetalle, Halogene, Edelgase) zuordnen.",
            "Trends von Atomradius und Elektronegativit√§t qualitativ beschreiben."
          ],
          summary:
            "Das Periodensystem ordnet alle bekannten Elemente nach steigender Ordnungszahl. In einer Gruppe (Spalte) stehen Elemente mit √§hnlicher Valenzelektronenkonfiguration und √§hnlichen chemischen Eigenschaften. In einer Periode (Zeile) nimmt die Ordnungszahl von links nach rechts zu. Wichtige Trends: der Atomradius nimmt innerhalb einer Periode von links nach rechts ab, innerhalb einer Gruppe von oben nach unten zu. Die Elektronegativit√§t zeigt das umgekehrte Verhalten.",
          keyPoints: [
            "Gruppen: z. B. 1. Hauptgruppe = Alkalimetalle (Li, Na, K, ...); 17. Hauptgruppe = Halogene; 18. Hauptgruppe = Edelgase.",
            "Perioden: horizontale Zeilen ‚Äì geben an, wie viele Schalen im Atom besetzt sind.",
            "Atomradius ‚Üì nach rechts kleiner, ‚Üë nach unten gr√∂√üer.",
            "Elektronegativit√§t ‚Üë nach rechts gr√∂√üer (bis F), ‚Üë nach oben gr√∂√üer.",
            "Metalle stehen √ºberwiegend links unten, Nichtmetalle rechts oben."
          ],
          formulas: [],
          visual: `
            <div style="font-size:11px;margin-bottom:4px;">Sehr vereinfachtes Mini-PSE (nur Hauptgruppen):</div>
            <pre style="font-size:10px;line-height:1.2;">
H                                                   He
Li Be                                      B  C  N  O  F  Ne
Na Mg                                      Al Si P  S  Cl Ar
K  Ca                                      Ga Ge As Se Br Kr
            </pre>
          `
        },
        {
          id: "orbitale",
          title: "Atomorbitale: s- und p-Orbitale",
          tags: ["Orbitale", "s-Orbital", "p-Orbital"],
          goals: [
            "Begriff Orbital (Wahrscheinlichkeitswolke) formulieren.",
            "s-Orbitale als kugelf√∂rmig und p-Orbitale als hantelf√∂rmig skizzieren.",
            "F√ºr p-Orbitale die drei Raumrichtungen (p‚Çì, p·µß, p_z) angeben."
          ],
          summary:
            "Ein Orbital ist kein 'Planet auf einer Kreisbahn', sondern ein Bereich im Raum, in dem sich ein Elektron mit hoher Wahrscheinlichkeit aufh√§lt. s-Orbitale sind kugelf√∂rmig um den Kern verteilt. p-Orbitale sind hantelf√∂rmig mit zwei Lobes und besitzen drei r√§umliche Ausrichtungen (p‚Çì, p·µß, p_z). In der Klausur wird oft verlangt, ein 1s-Orbital und drei p-Orbitale zu skizzieren und sinnvoll zu beschriften.",
          keyPoints: [
            "s-Orbitale: kugelf√∂rmig, 1s liegt am niedrigsten, dann 2s, 3s ...",
            "p-Orbitale: hantelf√∂rmig, jeweils zwei 'Lappen' (Lobes) ‚Äì drei Ausrichtungen: x-, y- und z-Achse.",
            "Maximal 2 Elektronen pro Orbital (mit entgegengesetztem Spin).",
            "Skizze: s-Orbital = Kreis/Kugel; p-Orbital = zwei Kreise/Ellipsen gegen√ºberliegend mit Kern in der Mitte."
          ],
          formulas: [],
          visual: `
            <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
              <div>
                <div style="font-size:11px;margin-bottom:2px;">s-Orbital (1s)</div>
                <svg viewBox="0 0 70 70" width="70" height="70">
                  <circle cx="35" cy="35" r="22"
                          fill="rgba(123,140,255,0.30)" stroke="currentColor"/>
                  <circle cx="35" cy="35" r="3" fill="currentColor"/>
                </svg>
              </div>
              <div>
                <div style="font-size:11px;margin-bottom:2px;">p-Orbital (z. B. p<sub>z</sub>)</div>
                <svg viewBox="0 0 90 70" width="90" height="70">
                  <circle cx="45" cy="20" r="14"
                          fill="rgba(123,140,255,0.30)" stroke="currentColor"/>
                  <circle cx="45" cy="50" r="14"
                          fill="rgba(123,140,255,0.30)" stroke="currentColor"/>
                  <circle cx="45" cy="35" r="3" fill="currentColor"/>
                </svg>
              </div>
            </div>
            <div style="font-size:11px;opacity:0.8;margin-top:4px;">F√ºr die Klausur: Kugel f√ºr s, Hantel f√ºr p ‚Äì sauber beschriften reicht v√∂llig.</div>
          `
        },
        {
          id: "mo-n2",
          title: "Molek√ºlorbitale (MO) ‚Äì Beispiel N‚ÇÇ",
          tags: ["MO-Theorie", "N‚ÇÇ", "Bindungsordnung"],
          goals: [
            "Grundidee der MO-Theorie wiedergeben (Orbitale kombinieren zu bindenden/antibindenden MOs).",
            "Ein einfaches MO-Schema f√ºr homonukleare zweiatomige Molek√ºle skizzieren (z. B. N‚ÇÇ).",
            "Bindungsordnung f√ºr N‚ÇÇ berechnen und deuten k√∂nnen."
          ],
          summary:
            "In der MO-Theorie werden Atomorbitale zu Molek√ºlorbitalen kombiniert: bindende (energetisch niedriger) und antibindende (energetisch h√∂her). F√ºr N‚ÇÇ kombinierst du 2s- und 2p-Orbitale der beiden N-Atome. Wichtig in der Klausur: MO-Schema zeichnen, Energieniveaus sortieren und Elektronen mit Pfeilen eintragen. Danach kannst du die Bindungsordnung bestimmen.",
          keyPoints: [
            "Bindende MOs (œÉ, œÄ) liegen energetisch tiefer, antibindende (œÉ*, œÄ*) h√∂her.",
            "F√ºr N‚ÇÇ (14 e‚Åª pro Molek√ºl, also 7 pro Atom): Bindungsordnung = (Bindende e‚Åª ‚àí Antibindende e‚Åª)/2.",
            "Typisch f√ºr N‚ÇÇ: Bindungsordnung 3 ‚Üí Dreifachbindung.",
            "MO-Schema sauber mit Pfeilen (‚Üë‚Üì) f√ºllen ‚Äì Hundsche Regel & Pauli-Prinzip beachten."
          ],
          formulas: [
            "Bindungsordnung = (N<sub>bindend</sub> ‚àí N<sub>antibindend</sub>) / 2"
          ],
          visual: `
            <div style="font-size:11px;margin-bottom:4px;">Sehr vereinfachtes MO-Schema (nur qualitativ):</div>
            <pre style="font-size:10px;line-height:1.2;">
           œÉ*2p   (antibindend)
      œÄ2p  œÄ2p
           œÉ2p   (bindend)
           œÉ*2s
           œÉ2s

    Pfeile von unten nach oben eintragen (Energie ‚Üë).
            </pre>
          `
        ,

      detailBlocks: [
        {
          title: "Schalen, Unterschalen & Orbitale (Haus-Analogie)",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Ein <b>Orbital</b> ist kein Planet auf einer Kreisbahn, sondern ein Aufenthaltsbereich, in dem sich ein Elektron mit hoher Wahrscheinlichkeit aufh√§lt.</p>

              <p>Bild dir ein Haus:</p>
              <ul>
                <li><b>Schale (n)</b> = Stockwerk (n = 1, 2, 3, ...).</li>
                <li><b>Unterschale</b> = Zimmerart im Stockwerk (s, p, d, f).</li>
                <li><b>Orbital</b> = ein konkretes Zimmer, in dem max. 2 Elektronen wohnen.</li>
              </ul>

              <p>Welche Unterschalen es pro Schale geben kann:</p>
              <ul>
                <li>n = 1 ‚Üí nur 1s</li>
                <li>n = 2 ‚Üí 2s, 2p</li>
                <li>n = 3 ‚Üí 3s, 3p, 3d</li>
                <li>n = 4 ‚Üí 4s, 4p, 4d, 4f</li>
              </ul>
            </div>
          `
        },
        {
          title: "s- vs. p-Orbitale ‚Äì Formen & Kapazit√§t",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p><b>s-Orbitale:</b></p>
              <ul>
                <li>Form: kugelf√∂rmig (&bdquo;s&rdquo; ‚âà <i>sphere</i>).</li>
                <li>Pro Schale gibt es genau <b>1 s-Orbital</b> (1s, 2s, 3s...).</li>
                <li>Jedes Orbital kann max. <b>2 Elektronen</b> mit entgegengesetztem Spin (‚Üë‚Üì) aufnehmen.</li>
              </ul>

              <p><b>p-Orbitale:</b></p>
              <ul>
                <li>Form: hantel-/erdnussf√∂rmig (&bdquo;p&rdquo; ‚âà <i>peanut/propeller</i>).</li>
                <li>Pro Schale gibt es <b>3 p-Orbitale</b>: p<sub>x</sub>, p<sub>y</sub>, p<sub>z</sub>.</li>
                <li>Jedes p-Orbital kann wieder 2 Elektronen aufnehmen ‚Üí insgesamt <b>6 Elektronen</b> in einer p-Unterschale.</li>
              </ul>

              <p>Beispiel 2. Schale (n = 2):</p>
              <ul>
                <li>2s ‚Üí 1 Orbital ‚Üí max. 2 e‚Åª</li>
                <li>2p ‚Üí 3 Orbitale ‚Üí max. 6 e‚Åª</li>
                <li>Gesamt in Schale 2: max. 8 e‚Åª (2s¬≤ 2p‚Å∂)</li>
              </ul>
            </div>
          `
        },
        {
          title: "Elektronenkonfiguration & Hundsche Regel (2. Periode)",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Elektronenkonfiguration schreibt auf, wie die Elektronen auf die Orbitale verteilt sind, z. B.:</p>

              <p><b>Beispiel Sauerstoff:</b> O: 1s¬≤ 2s¬≤ 2p‚Å¥</p>
              <ul>
                <li>1s¬≤ ‚Üí 2 Elektronen im 1s-Orbital (innere Schale).</li>
                <li>2s¬≤ ‚Üí 2 Elektronen im 2s-Orbital.</li>
                <li>2p‚Å¥ ‚Üí 4 Elektronen in den drei 2p-Orbitalen zusammen.</li>
              </ul>

              <p><b>Hundsche Regel (f√ºr p-Orbitale):</b></p>
              <ul>
                <li>Entartete Orbitale (z. B. p<sub>x</sub>, p<sub>y</sub>, p<sub>z</sub>) werden zuerst <b>einzeln</b> mit Elektronen gleicher Spinrichtung besetzt (‚Üë, ‚Üë, ‚Üë).</li>
                <li>Erst danach werden sie gepaart (‚Üë‚Üì, ‚Üë‚Üì, ‚Üë).</li>
              </ul>

              <p><b>Valenzelektronen:</b></p>
              <ul>
                <li>Die Elektronen in der √§u√üersten, nicht vollen Schale (bei der 2. Periode: 2s und 2p).</li>
                <li>Beispiele: O hat 6 Valenzelektronen (2s¬≤ 2p‚Å¥), F hat 7 (2s¬≤ 2p‚Åµ).</li>
              </ul>
            </div>
          `
        },
        {
          title: "Merkkasten f√ºr Klausur: Orbitale & MO kurz und knackig",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <ul>
                <li><b>Orbital</b> = Aufenthaltsbereich eines Elektrons, max. 2 Elektronen pro Orbital (‚Üë‚Üì).</li>
                <li><b>s</b>-Orbital = kugelf√∂rmig, 1 s-Orbital pro Schale.</li>
                <li><b>p</b>-Orbitale = 3 St√ºck pro Schale, hantelf√∂rmig (p<sub>x</sub>, p<sub>y</sub>, p<sub>z</sub>), zusammen max. 6 Elektronen.</li>
                <li>Elektronenkonfiguration: von unten nach oben auff√ºllen (1s, 2s, 2p, 3s...), Pauli-Prinzip und Hundsche Regel beachten.</li>
                <li><b>Valenzelektronen</b> = Elektronen der √§u√üersten Schale (f√ºr B‚ÄìNe: alles, was in 2s und 2p sitzt).</li>
                <li>F√ºr MO-Theorie sp√§ter wichtig: aus Atomorbitalen (AOs) werden Molek√ºlorbitale (MOs), aus 2 AOs ‚Üí 1 bindendes + 1 antibindendes MO.</li>
              </ul>
              <p style="margin-top:4px; opacity:0.8;">
                Wenn du diese Punkte sicher drauf hast, verstehst du die MO-Schemata (œÉ, œÄ, œÉ*, œÄ*) viel leichter.
              </p>
            </div>
          `
        }
      ]
      },


        {
          id: "stoechiometrie",
          title: "St√∂chiometrie & chemisches Rechnen",
          tags: ["Molare Masse", "Stoffmenge", "Gleichungen"],
          goals: [
            "Stoffmenge aus Masse und molarer Masse berechnen.",
            "Reaktionsgleichungen korrekt nach Atomanzahl ausgleichen.",
            "Grobe √úberschlagsrechnungen beherrschen (z. B. mg ‚Üí mmol)."
          ],
          summary:
            "St√∂chiometrie beantwortet die Frage: Wie viel von welcher Substanz reagiert miteinander? Grundlage ist die Stoffmenge n in mol. √úber die molare Masse M verkn√ºpfst du Masse und Stoffmenge. In Klausuraufgaben geht es oft darum, Reaktionsgleichungen zu formulieren, auszubalancieren und aus einer gegebenen Masse oder Konzentration die gesuchte Menge zu bestimmen.",
          keyPoints: [
            "Stoffmenge: n = m / M (mit m in g, M in g/mol ‚Üí n in mol).",
            "Konzentration: c = n / V (mit V in L, c in mol/L).",
            "Reaktionsgleichung zuerst verbal verstehen, dann nach Atomen ausgleichen.",
            "Im Zweifel: zuerst Metalle, dann Nichtmetalle, dann H und O ausgleichen ‚Äì oder deine bevorzugte Reihenfolge.",
            "Immer Einheiten mitf√ºhren (mg ‚Üí g ‚Üí mol)."
          ],
          formulas: [
            "n = m / M",
            "c = n / V"
          ]
        },
        {
  id: "saeure-base-ph",
  title: "S√§ure-Base & pH-Wert (inkl. NaOH)",
  tags: ["Br√∏nsted", "pH", "starke Basen"],
  goals: [
    "S√§uren und Basen nach Br√∏nsted definieren.",
    "pH starker S√§uren und pH starker Basen (z. B. NaOH) sicher berechnen.",
    "Zusammenhang zwischen pH, pOH und [H‚Å∫]/[OH‚Åª] sowie dem Ionenprodukt des Wassers (K<sub>w</sub>) nutzen.",
    "Zwischen starken und schwachen S√§uren/Basen unterscheiden und die passenden Rechenwege kennen."
  ],
  summary:
    "Nach Br√∏nsted ist eine S√§ure ein Protonendonator und eine Base ein Protonenakzeptor. Starke S√§uren/Basen dissoziieren im betrachteten Konzentrationsbereich praktisch vollst√§ndig, schwache nur teilweise. F√ºr starke S√§uren/Basen kannst du die Konzentration direkt mit [H‚Å∫] oder [OH‚Åª] gleichsetzen. √úber pH, pOH und das Ionenprodukt des Wassers (Kw) l√§sst sich die jeweils andere Gr√∂√üe berechnen. In Klausuren geht es h√§ufig um das sichere Anwenden weniger Standardrezepte.",
  keyPoints: [
    "Br√∏nsted-S√§ure: Protonendonator; Br√∏nsted-Base: Protonenakzeptor.",
    "Starke S√§ure/Base: nahezu vollst√§ndige Dissoziation ‚Üí [H‚Å∫] ‚âà c(S√§ure), [OH‚Åª] ‚âà c(Base).",
    "Wasserautoionisation: H‚ÇÇO ‚áå H‚Å∫ + OH‚Åª; K<sub>w</sub> = [H‚Å∫]¬∑[OH‚Åª] ‚âà 1,0¬∑10‚Åª¬π‚Å¥ (25 ¬∞C).",
    "pH = ‚àílog‚ÇÅ‚ÇÄ([H‚Å∫]); pOH = ‚àílog‚ÇÅ‚ÇÄ([OH‚Åª]); pH + pOH = 14 (bei 25 ¬∞C).",
    "F√ºr NaOH: [OH‚Åª] = c(NaOH) (starke Base, 1:1-St√∂chiometrie).",
    "F√ºr starke S√§uren/Basen reicht meist das einfache Rezept ‚Äì schwache S√§uren/Basen brauchen Gleichgewichtsbetrachtung (K<sub>a</sub> oder K<sub>b</sub>) oder N√§herungen."
  ],
  formulas: [
    "pH = ‚àílog‚ÇÅ‚ÇÄ([H‚Å∫])",
    "pOH = ‚àílog‚ÇÅ‚ÇÄ([OH‚Åª])",
    "pH + pOH = 14 (bei 25 ¬∞C)",
    "K<sub>w</sub> = [H‚Å∫]¬∑[OH‚Åª] ‚âà 1,0¬∑10‚Åª¬π‚Å¥"
  ],
  visual: `
    <div style="font-size:11px;margin-bottom:4px;">Rechenwege auf einen Blick:</div>
    <pre style="font-size:10px;line-height:1.3;">
Starke S√§ure (z. B. HCl):
    c(HCl) = 0,010 mol/L
    ‚Üí [H‚Å∫] ‚âà 0,010 mol/L
    ‚Üí pH = ‚àílog(0,010) = 2

Starke Base (z. B. NaOH):
    c(NaOH) = 0,010 mol/L
    ‚Üí [OH‚Åª] ‚âà 0,010 mol/L
    ‚Üí pOH = 2
    ‚Üí pH = 14 ‚àí 2 = 12
    </pre>
  `,
  detailBlocks: [
    {
      title: "Definitionen & Grundbegriffe",
      content: `
        <ul style="padding-left:18px; margin:0;">
          <li><b>Br√∏nsted-S√§ure:</b> Teilchen, das ein Proton (H‚Å∫) abgeben kann. Beispiel: HCl, HNO‚ÇÉ, CH‚ÇÉCOOH.</li>
          <li><b>Br√∏nsted-Base:</b> Teilchen, das ein Proton aufnehmen kann. Beispiel: OH‚Åª, NH‚ÇÉ, CH‚ÇÉCOO‚Åª.</li>
          <li><b>Konjugiertes S√§ure-Base-Paar:</b> S√§ure und Base, die sich nur um ein Proton unterscheiden (z. B. HCl/Cl‚Åª).</li>
          <li><b>Starke S√§ure/Base:</b> Dissoziiert in Wasser praktisch vollst√§ndig (im betrachteten Konzentrationsbereich).</li>
          <li><b>Schwache S√§ure/Base:</b> Nur teilweise dissoziiert; es stellt sich ein Gleichgewicht ein (K<sub>a</sub> oder K<sub>b</sub> beschreibt die St√§rke).</li>
          <li><b>pH-Skala:</b> Ma√ü f√ºr die Wasserstoffionenkonzentration; pH &lt; 7 sauer, pH = 7 neutral, pH &gt; 7 basisch (bei 25 ¬∞C).</li>
        </ul>
      `
    },
    {
      title: "Rezept: pH starker S√§uren",
      content: `
        <ol style="padding-left:18px; margin:0;">
          <li><b>Pr√ºfen:</b> Ist es eine starke S√§ure? (z. B. HCl, HBr, HI, HNO‚ÇÉ, H‚ÇÇSO‚ÇÑ (1. Proton), HClO‚ÇÑ)</li>
          <li><b>Spezies bestimmen:</b> Wie viele H‚Å∫ pro Molek√ºl? (z. B. HCl ‚Üí 1 H‚Å∫, H‚ÇÇSO‚ÇÑ ‚Üí 2 H‚Å∫)</li>
          <li><b>[H‚Å∫] berechnen:</b> [H‚Å∫] ‚âà <i>n<sub>H‚Å∫</sub></i> ¬∑ c(S√§ure).</li>
          <li><b>pH berechnen:</b> pH = ‚àílog‚ÇÅ‚ÇÄ([H‚Å∫]).</li>
        </ol>
        <div style="margin-top:6px; font-size:11px;">
          Beispiel: c(HCl) = 0,050 mol/L ‚Üí starke einprotonige S√§ure ‚áí [H‚Å∫] ‚âà 0,050 mol/L ‚áí pH = ‚àílog(0,050) ‚âà 1,30.
        </div>
      `
    },
    {
      title: "Rezept: pH starker Basen (z. B. NaOH)",
      content: `
        <ol style="padding-left:18px; margin:0;">
          <li><b>Pr√ºfen:</b> Ist es eine starke Base? (z. B. NaOH, KOH, Ba(OH)‚ÇÇ).</li>
          <li><b>Spezies bestimmen:</b> Wie viele OH‚Åª pro Formeleinheit? (NaOH ‚Üí 1, Ba(OH)‚ÇÇ ‚Üí 2).</li>
          <li><b>[OH‚Åª] berechnen:</b> [OH‚Åª] ‚âà <i>n<sub>OH‚Åª</sub></i> ¬∑ c(Base).</li>
          <li><b>pOH berechnen:</b> pOH = ‚àílog‚ÇÅ‚ÇÄ([OH‚Åª]).</li>
          <li><b>pH berechnen:</b> pH = 14 ‚àí pOH (bei 25 ¬∞C).</li>
        </ol>
        <div style="margin-top:6px; font-size:11px;">
          Beispiel: c(NaOH) = 0,020 mol/L ‚Üí [OH‚Åª] ‚âà 0,020 mol/L ‚Üí pOH = ‚àílog(0,020) ‚âà 1,70 ‚Üí pH ‚âà 12,30.
        </div>
      `
    },
    {
      title: "Beispielaufgabe (klassischer Klausurstil)",
      content: `
        <div style="font-size:12px; margin-bottom:4px;">
          <b>Aufgabe:</b> Berechne den pH-Wert einer 0,010 mol/L Natronlauge (NaOH). Gehe von vollst√§ndiger Dissoziation aus.
        </div>
        <ol style="padding-left:18px; margin:0;">
          <li><b>Schritt 1:</b> NaOH ist eine starke Base, 1:1-St√∂chiometrie: NaOH ‚Üí Na‚Å∫ + OH‚Åª.</li>
          <li><b>Schritt 2:</b> [OH‚Åª] ‚âà c(NaOH) = 0,010 mol/L.</li>
          <li><b>Schritt 3:</b> pOH = ‚àílog(0,010) = 2.</li>
          <li><b>Schritt 4:</b> pH = 14 ‚àí pOH = 14 ‚àí 2 = 12.</li>
        </ol>
        <div style="margin-top:6px; font-size:11px;">
          <b>Antwort:</b> pH ‚âà 12, die L√∂sung ist deutlich basisch.
        </div>
      `
    },
    {
      title: "Typische Klausurfallen & Merks√§tze",
      content: `
        <ul style="padding-left:18px; margin:0;">
          <li><b>Falle 1:</b> pH direkt aus c(Base) berechnen (statt √ºber pOH) ‚áí immer erst [OH‚Åª] ‚Üí pOH ‚Üí pH.</li>
          <li><b>Falle 2:</b> Mehrprotonige S√§uren/Basen ignorieren:
              z. B. H‚ÇÇSO‚ÇÑ ‚Äì im ersten Schritt gibt es 2 H‚Å∫ pro Molek√ºl ‚Üí [H‚Å∫] ‚âà 2¬∑c(H‚ÇÇSO‚ÇÑ).</li>
          <li><b>Falle 3:</b> Falsche Einheiten: Konzentrationen m√ºssen in mol/L eingesetzt werden, nicht in g/L.</li>
          <li><b>Falle 4:</b> K<sub>w</sub> vergessen: Bei sehr verd√ºnnten L√∂sungen oder wenn nur [OH‚Åª] gegeben ist, hilft K<sub>w</sub> = [H‚Å∫][OH‚Åª].</li>
          <li><b>Merksatz:</b> "Stark" hei√üt: ich darf [H‚Å∫] bzw. [OH‚Åª] (fast) gleich der Anfangskonzentration setzen.</li>
        </ul>
      `
    }
  ]
}
,
{
  id: "titrationen",
  title: "Titrationen (S√§ure-Base, F√§llung, Komplexometrie, Redox)",
  tags: ["Titration", "√Ñquivalenzpunkt", "Titrationskurve", "Gehaltsbestimmung"],
  goals: [
    "Das Grundprinzip einer Titration erkl√§ren k√∂nnen.",
    "√Ñquivalenzpunkt, Umschlagpunkt und Endpunkt sicher unterscheiden.",
    "Gehaltsbestimmung aus c‚ÇÅ¬∑V‚ÇÅ = c‚ÇÇ¬∑V‚ÇÇ in einfachen F√§llen durchf√ºhren.",
    "Den Unterschied zwischen S√§ure-Base-, F√§llungs-, komplexometrischen und Redoxtitrationen kennen."
  ],
  summary:
    "Bei einer Titration wird eine Ma√ül√∂sung definierter Konzentration zu einer Probe gegeben, bis die st√∂chiometrische Menge erreicht ist (√Ñquivalenzpunkt). √úber das verbrauchte Volumen und die bekannte Konzentration der Ma√ül√∂sung kann man die Konzentration der Probe berechnen. In der Klausur sind typische Themen: S√§ure-Base-Titrationen, √Ñquivalenzpunkt-Bestimmung, Indikatorwahl, einfache Gehaltsberechnung.",
  keyPoints: [
    "Ma√ül√∂sung: L√∂sung bekannter Konzentration (c bekannt).",
    "Probel√∂sung: zu untersuchende L√∂sung (c gesucht).",
    "√Ñquivalenzpunkt: st√∂chiometrisch genaues Mengenverh√§ltnis erreicht.",
    "Umschlagpunkt/Endpunkt: der tats√§chlich beobachtete Farbumschlag des Indikators (liegt nahe am √Ñquivalenzpunkt).",
    "Titrationskurve: grafische Darstellung von pH (oder Potential) gegen zugegebenes Volumen.",
    "Standardrezept Gehaltsbestimmung: c‚ÇÅ¬∑V‚ÇÅ = c‚ÇÇ¬∑V‚ÇÇ (nach Stoffmenge n = c¬∑V)."
  ],
  formulas: [
    "n = c ¬∑ V",
    "c(Probel√∂sung) = (c(Ma√ül√∂sung) ¬∑ V(Ma√ül√∂sung)) / V(Probel√∂sung) (bei einfacher 1:1-St√∂chiometrie)",
    "f√ºr andere Verh√§ltnisse: ŒΩ‚ÇÅ¬∑c‚ÇÅ¬∑V‚ÇÅ = ŒΩ‚ÇÇ¬∑c‚ÇÇ¬∑V‚ÇÇ (ŒΩ = st√∂chiometrischer Koeffizient)"
  ],
  visual: `
    <div style="font-size:11px;margin-bottom:4px;">Idealisierte S√§ure-Base-Titrationskurve (starke S√§ure mit starker Base):</div>
    <pre style="font-size:10px;line-height:1.2;">
pH
14 |                           ______
   |                        __/
   |                     __/
   |                  __/
   |               __/
   |            __/
   |         __/
   |      __/
   |   __/
   |__/
   +--------------------------------- V
          &uarr;
     √Ñquivalenzpunkt (starker Anstieg)
    </pre>
  `,
  detailBlocks: [
    {
      title: "Grundprinzip der Titration",
      content: `
        <ul style="padding-left:18px;margin:0;">
          <li>Man gibt eine <b>Ma√ül√∂sung</b> definierter Konzentration tropfenweise zu einer <b>Probel√∂sung</b> unbekannter Konzentration.</li>
          <li>Die reagierenden Stoffe stehen in einer <b>st√∂chiometrischen Reaktionsgleichung</b> (z. B. 1:1 oder 1:2).</li>
          <li>Am <b>√Ñquivalenzpunkt</b> sind die Stoffmengen im st√∂chiometrisch richtigen Verh√§ltnis umgesetzt.</li>
          <li>√úber das verbrauchte Volumen der Ma√ül√∂sung und ihre Konzentration kann man die Stoffmenge berechnen und daraus die Konzentration der Probe.</li>
          <li>Ein <b>Indikator</b> (oder pH-Meter/Leitf√§higkeit) zeigt an, wann der Endpunkt (nahe beim √Ñquivalenzpunkt) erreicht ist.</li>
        </ul>
      `
    },
    {
      title: "S√§ure-Base-Titrationen (stark/stark)",
      content: `
        <ul style="padding-left:18px;margin:0;">
          <li><b>Beispiel:</b> HCl (starke S√§ure) mit NaOH (starke Base).</li>
          <li>Reaktionsgleichung: HCl + NaOH ‚Üí NaCl + H‚ÇÇO (1:1-Verh√§ltnis).</li>
          <li><b>Vor dem √ÑP:</b> L√∂sung ist sauer, pH wird durch √úberschuss an HCl bestimmt.</li>
          <li><b>Am √ÑP:</b> St√∂chiometrisch gleiche Stoffmenge HCl und NaOH umgesetzt, pH ‚âà 7 (bei starken S√§uren/Basen in Wasser).</li>
          <li><b>Nach dem √ÑP:</b> L√∂sung ist basisch, pH wird durch √úberschuss an NaOH bestimmt.</li>
        </ul>
        <div style="font-size:11px;margin-top:6px;">
          <b>Gehaltsberechnung (1:1):</b> c(HCl) = c(NaOH) ¬∑ V(NaOH) / V(HCl) 
        </div>
      `
    },
    {
      title: "Titrationen mit anderen St√∂chiometrien",
      content: `
        <ul style="padding-left:18px;margin:0;">
          <li>Reaktionsgleichung muss immer <b>zuerst</b> aufgestellt und ausgeglichen werden.</li>
          <li>Beispiel: 2 HCl + Na‚ÇÇCO‚ÇÉ ‚Üí 2 NaCl + H‚ÇÇO + CO‚ÇÇ ‚Üí Verh√§ltnis 2:1.</li>
          <li>Dann gilt: 2 ¬∑ n(Na‚ÇÇCO‚ÇÉ) = n(HCl) oder allgemein: ŒΩ‚ÇÅ¬∑n‚ÇÅ = ŒΩ‚ÇÇ¬∑n‚ÇÇ.</li>
          <li>√úbertragen auf Konzentration und Volumen: ŒΩ‚ÇÅ¬∑c‚ÇÅ¬∑V‚ÇÅ = ŒΩ‚ÇÇ¬∑c‚ÇÇ¬∑V‚ÇÇ.</li>
          <li>Das ist die <b>allgemeine Gehaltsgleichung</b> f√ºr Titrationen.</li>
        </ul>
      `
    },
    {
      title: "Beispielaufgabe (Gehaltsbestimmung)",
      content: `
        <div style="font-size:12px;margin-bottom:4px;">
          <b>Aufgabe:</b> 25,0 mL Salzs√§ure werden mit 0,100 mol/L NaOH titriert. Der √Ñquivalenzpunkt liegt bei 18,6 mL NaOH. Berechne c(HCl).
        </div>
        <ol style="padding-left:18px;margin:0;">
          <li>Reaktionsgleichung: HCl + NaOH ‚Üí NaCl + H‚ÇÇO (1:1).</li>
          <li>Formel: c(HCl) ¬∑ V(HCl) = c(NaOH) ¬∑ V(NaOH).</li>
          <li>Einsetzen: c(HCl) ¬∑ 25,0 mL = 0,100 mol/L ¬∑ 18,6 mL.</li>
          <li>Volumina in L umrechnen oder k√ºrzen, da beide in mL: c(HCl) = 0,100 ¬∑ 18,6 / 25,0 mol/L.</li>
          <li>c(HCl) ‚âà 0,0744 mol/L.</li>
        </ol>
        <div style="font-size:11px;margin-top:6px;">
          <b>Antwort:</b> Die Salzs√§ure hat eine Konzentration von ca. 0,074 mol/L.
        </div>
      `
    },
    {
      title: "Andere Titrationsarten (√úberblick)",
      content: `
        <ul style="padding-left:18px;margin:0;">
          <li><b>F√§llungstitration:</b> Bildung eines schwerl√∂slichen Niederschlags (z. B. Ag‚Å∫ + Cl‚Åª ‚Üí AgCl‚Üì) ‚Äì √ÑP √ºber Leitf√§higkeit oder Indikator.</li>
          <li><b>Komplexometrische Titration:</b> Bildung von Komplexen (z. B. EDTA-Titration von Ca¬≤‚Å∫/Mg¬≤‚Å∫) ‚Äì Indikatoren sind oft Metallindikatoren.</li>
          <li><b>Redoxtitration:</b> Redoxreaktion zwischen Ma√ü- und Probel√∂sung (z. B. Permanganattitration) ‚Äì √ÑP √ºber Potentialsprung oder Eigenf√§rbung.</li>
        </ul>
      `
    },
    {
      title: "Typische Klausurfallen & Merks√§tze",
      content: `
        <ul style="padding-left:18px;margin:0;">
          <li><b>Falle 1:</b> Sto√üzahlen ignorieren ‚Üí immer zuerst Reaktionsgleichung sauber ausgleichen.</li>
          <li><b>Falle 2:</b> Volumen in mL einsetzen, obwohl in der Formel L gebraucht werden ‚Üí Einheit checken!</li>
          <li><b>Falle 3:</b> √Ñquivalenzpunkt und Umschlagpunkt verwechseln.</li>
          <li><b>Falle 4:</b> c‚ÇÅ¬∑V‚ÇÅ = c‚ÇÇ¬∑V‚ÇÇ anwenden, obwohl Verh√§ltnis ‚â† 1:1 ‚Üí dann braucht man ŒΩ‚ÇÅ¬∑c‚ÇÅ¬∑V‚ÇÅ = ŒΩ‚ÇÇ¬∑c‚ÇÇ¬∑V‚ÇÇ.</li>
          <li><b>Merksatz:</b> <i>‚ÄûErst Reaktionsgleichung, dann rechnen.‚Äú</i></li>
        </ul>
      `
    }
  ]
},

{
 id: "redox",
 title: "Redoxreaktionen & elektrochemische Spannungsreihe",
 tags: ["Oxidation", "Reduktion", "Redox", "Elektrochemie"],
 goals: [
   "Oxidation und Reduktion sicher definieren (Elektronenabgabe/-aufnahme).",
   "Oxidationszahlen zuweisen und einfache Redoxgleichungen interpretieren k√∂nnen.",
   "Die elektrochemische Spannungsreihe zur Vorhersage der Reaktionsrichtung nutzen.",
   "Grundidee von galvanischer Zelle, Standardpotential und Nernst-Gleichung verstehen (auf Klausur-Niveau)."
 ],
 summary:
   "Redoxreaktionen sind Elektronentransferprozesse: Oxidation bedeutet Elektronenabgabe, Reduktion Elektronenaufnahme. Die elektrochemische Spannungsreihe ordnet Halbzellen nach ihren Standardelektrodenpotenzialen. Elemente mit sehr negativem Potential geben leicht Elektronen ab (starke Reduktionsmittel), solche mit hohem Potential wirken als Oxidationsmittel. In galvanischen Zellen wird die freie Reaktionsenergie in elektrische Energie umgewandelt.",
 keyPoints: [
   "Oxidation: Elektronenabgabe (Oxidationszahl wird gr√∂√üer).",
   "Reduktion: Elektronenaufnahme (Oxidationszahl wird kleiner).",
   "Oxidationsmittel wird selbst reduziert, Reduktionsmittel selbst oxidiert.",
   "Spannungsreihe: Metalle mit negativeren E¬∞-Werten sind st√§rkere Reduktionsmittel.",
   "Zellspannung E¬∞(Zelle) = E¬∞(Kathode) ‚àí E¬∞(Anode).",
   "Nernst-Gleichung beschreibt Konzentrationsabh√§ngigkeit des Potentials."
 ],
 formulas: [
   "E¬∞(Zelle) = E¬∞(Kathode) ‚àí E¬∞(Anode)",
   "Nernst (vereinfacht, 25 ¬∞C): E = E¬∞ ‚àí (0,059 V / z) ¬∑ log(Q)"
 ],
 visual: `
   <div style="font-size:11px;margin-bottom:4px;">Beispiel: Daniell-Element (Zn/Cu-Zelle)</div>
   <pre style="font-size:10px;line-height:1.3;">
Anode (Oxidation):   Zn ‚Üí Zn¬≤‚Å∫ + 2 e‚Åª     (E¬∞ ‚âà ‚àí0,76 V)
Kathode (Reduktion): Cu¬≤‚Å∫ + 2 e‚Åª ‚Üí Cu     (E¬∞ ‚âà +0,34 V)

Zellreaktion:        Zn + Cu¬≤‚Å∫ ‚Üí Zn¬≤‚Å∫ + Cu

E¬∞(Zelle) = E¬∞(Kathode) ‚àí E¬∞(Anode)
       = (+0,34 V) ‚àí (‚àí0,76 V)
       = +1,10 V
   </pre>
 `,
 detailBlocks: [
   {
     title: "Oxidation, Reduktion & Oxidationszahlen",
     content: `
       <ul style="padding-left:18px;margin:0;">
         <li><b>Oxidation:</b> Abgabe von Elektronen (e‚Åª). Oxidationszahl wird <b>h√∂her</b>.</li>
         <li><b>Reduktion:</b> Aufnahme von Elektronen. Oxidationszahl wird <b>niedriger</b>.</li>
         <li><b>Oxidationsmittel:</b> Stoff, der andere oxidiert (nimmt Elektronen auf) ‚Üí wird selbst <b>reduziert</b>.</li>
         <li><b>Reduktionsmittel:</b> Stoff, der andere reduziert (gibt Elektronen ab) ‚Üí wird selbst <b>oxidiert</b>.</li>
         <li>Oxidationszahlen helfen, Elektronenzahl bei Redoxreaktionen nachzuvollziehen (Klausurklassiker).</li>
       </ul>
     `
   },
   {
     title: "Elektrochemische Spannungsreihe (Prinzip)",
     content: `
       <ul style="padding-left:18px;margin:0;">
         <li>Liste von Halbzellen mit ihren <b>Standardelektrodenpotenzialen E¬∞</b> (in V gegen Standard-Wasserstoffelektrode).</li>
         <li>Je <b>negativer</b> E¬∞, desto leichter gibt die Spezies Elektronen ab ‚Üí gutes Reduktionsmittel.</li>
         <li>Je <b>positiver</b> E¬∞, desto leichter nimmt die Spezies Elektronen auf ‚Üí gutes Oxidationsmittel.</li>
         <li><b>Regel:</b> Halbzelle mit gr√∂√üerem E¬∞ wirkt als <b>Kathode</b>, die mit kleinerem E¬∞ als <b>Anode</b>.</li>
       </ul>
     `
   },
   {
     title: "Galvanische Zelle (am Beispiel Zn/Cu)",
     content: `
       <ol style="padding-left:18px;margin:0;">
         <li><b>Anode:</b> Zn-Elektrode in Zn¬≤‚Å∫-L√∂sung, hier l√§uft die Oxidation: Zn ‚Üí Zn¬≤‚Å∫ + 2 e‚Åª.</li>
         <li><b>Kathode:</b> Cu-Elektrode in Cu¬≤‚Å∫-L√∂sung, hier l√§uft die Reduktion: Cu¬≤‚Å∫ + 2 e‚Åª ‚Üí Cu.</li>
         <li>Elektronen flie√üen √ºber den √§u√üeren Leiter von der Anode zur Kathode.</li>
         <li>Die <b>Salzbr√ºcke</b> sorgt f√ºr Ladungsausgleich (Ionentransport), damit der Strom nicht abrei√üt.</li>
         <li>Die gemessene Spannung entspricht E(Zelle).</li>
       </ol>
     `
   },
   {
     title: "Nernst-Gleichung (auf Klausurniveau)",
     content: `
       <div style="font-size:12px;margin-bottom:4px;">
         Die Nernst-Gleichung beschreibt, wie sich das Elektrodenpotential mit der Konzentration der beteiligten Ionen √§ndert.
       </div>
       <div style="padding-left:18px;font-size:12px;">
         <b>Allgemein (25 ¬∞C):</b><br/>
         E = E¬∞ ‚àí (0,059 V / z) ¬∑ log(Q)
       </div>
       <ul style="padding-left:18px;margin-top:4px;">
         <li>E: aktuelles Elektrodenpotential.</li>
         <li>E¬∞: Standardelektrodenpotential (bei 1 mol/L).</li>
         <li>z: Zahl der √ºbertragenen Elektronen.</li>
         <li>Q: Reaktionsquotient (Verh√§ltnis Produkte/Edukte).</li>
       </ul>
       <div style="font-size:11px;margin-top:6px;">
         In vielen Klausuren reicht es zu wissen, dass h√∂here Produktkonzentration das Potential verschiebt
         und dass aus Konzentrationsunterschieden eine messbare Spannung entsteht.
       </div>
     `
   },
   {
     title: "Typische Klausuraufgaben & Fallen",
        content: `
          <ul style="padding-left:18px;margin:0;">
            <li>Halbreaktionen identifizieren (was wird oxidiert, was reduziert?).</li>
            <li>E¬∞(Zelle) berechnen aus Tabellenwerten ‚Üí Kathode minus Anode.</li>
            <li>Vorhersagen, ob eine Redoxreaktion freiwillig abl√§uft (E¬∞(Zelle) > 0 ‚áí tendenziell freiwillig).</li>
            <li><b>Falle 1:</b> Anode/Kathode verwechseln (Merksatz: ‚ÄûAnode = Oxidation‚Äú).</li>
            <li><b>Falle 2:</b> Falsche Vorzeichen bei Potentialen (E¬∞ nicht einfach addieren, sondern Kathode ‚àí Anode).</li>
            <li><b>Falle 3:</b> z in der Nernst-Gleichung vergessen.</li>
          </ul>
        `
      }
    ]            // schlie√üt detailBlocks
  },              // schlie√üt Topic "redox"


{
  id: "orbital-grundlagen",
  title: "Was ist ein Orbital?",
  tags: ["Orbitale", "Grundlagen", "Quantenzahlen"],
  goals: [
    "Verstehen, was mit 'Orbital' in der Chemie gemeint ist.",
    "Den Unterschied zwischen Bohr-Modell (Bahnen) und Orbitalmodell (Wolken) erkl√§ren k√∂nnen.",
    "Die Rolle der wichtigsten Quantenzahlen (n, l, m_l, m_s) grob einordnen.",
    "Begreifen, warum Orbitale f√ºr Bindungen und Elektronenkonfigurationen so wichtig sind."
  ],
  summary:
    "Ein Orbital ist kein feste Kreisbahn wie im Bohr-Modell, sondern ein quantenmechanisch beschriebener Raumbereich um den Atomkern, in dem sich ein Elektron mit hoher Wahrscheinlichkeit aufh√§lt. Jedes Orbital geh√∂rt zu einem bestimmten Energieniveau und hat eine typische r√§umliche Form. Es kann maximal zwei Elektronen mit entgegengesetztem Spin aufnehmen. Orbitale sind die Grundlage daf√ºr, wie Elektronen in Atomen verteilt sind und wie chemische Bindungen entstehen.",

  keyPoints: [
    "Ein Orbital beschreibt einen Aufenthaltswahrscheinlichkeitsbereich eines Elektrons mit bestimmter Energie.",
    "Im Bohr-Modell kreisen Elektronen auf festen Bahnen; im Orbitalmodell denkt man in Elektronenwolken mit Wahrscheinlichkeiten.",
    "Jedes Orbital wird durch Quantenzahlen beschrieben: n (Hauptquantenzahl), l (Form), m_l (Orientierung) und m_s (Spin).",
    "In jedes Orbital passen maximal zwei Elektronen mit entgegengesetztem Spin (Pauli-Prinzip).",
    "Orbitale sind die Basis f√ºr Elektronenkonfigurationen, Periodensystem-Aufbau und chemische Bindungen."
  ],

  formulas: [
    "Hauptquantenzahl n = 1, 2, 3, ... (Schale / grobe Energie)",
    "Nebenquantenzahl l = 0 (s), 1 (p), 2 (d), 3 (f) (Form des Orbitals)",
    "m_l = -l, ..., 0, ..., +l (Orientierung im Raum)",
    "m_s = +1/2 oder -1/2 (Spin des Elektrons)"
  ],

  visual: `
    <div class="learn-visual">
      <div style="font-size:12px; opacity:0.8; margin-bottom:6px;">
        Bohr-Modell (links, Bahnen) vs. Orbitalmodell (rechts, Elektronenwolken).
      </div>

      <div style="display:flex; flex-wrap:wrap; gap:24px; justify-content:center; align-items:flex-start;">

        <!-- Bohr-Modell -->
        <div style="text-align:center;">
          <svg viewBox="0 0 140 140" width="130" height="130">
            <!-- Kern -->
            <circle cx="70" cy="70" r="6" fill="currentColor" />
            <!-- Bahnen -->
            <circle cx="70" cy="70" r="22" fill="none" stroke="currentColor" stroke-width="0.8" />
            <circle cx="70" cy="70" r="40" fill="none" stroke="currentColor" stroke-width="0.8" />
            <!-- Elektronen als Punkte auf Bahnen -->
            <circle cx="92" cy="70" r="2" fill="currentColor" />
            <circle cx="48" cy="70" r="2" fill="currentColor" />
            <circle cx="70" cy="30" r="2" fill="currentColor" />
            <circle cx="70" cy="110" r="2" fill="currentColor" />
          </svg>
          <div style="font-size:12px; margin-top:4px;">Bohr-Modell: Elektronen auf festen Bahnen</div>
        </div>

        <!-- Orbitalmodell -->
        <div style="text-align:center;">
          <svg viewBox="0 0 140 140" width="130" height="130">
            <!-- Kern -->
            <circle cx="70" cy="70" r="5" fill="currentColor" />
            <!-- ‚ÄûWolke‚Äú -->
            <radialGradient id="orbitalCloud" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-opacity="0.8" />
              <stop offset="100%" stop-opacity="0" />
            </radialGradient>
            <circle cx="70" cy="70" r="40" fill="none" stroke="currentColor" stroke-width="0.8" stroke-dasharray="3 3" />
            <circle cx="70" cy="70" r="26" fill="none" stroke="currentColor" stroke-width="0.5" stroke-dasharray="2 3" />
          </svg>
          <div style="font-size:12px; margin-top:4px;">Orbitalmodell: Aufenthaltswahrscheinlichkeitswolke</div>
        </div>

      </div>

      <div style="font-size:11px; opacity:0.7; margin-top:6px;">
        Wichtig ist der Denkwechsel: weg von festen Bahnen, hin zu Wahrscheinlichkeitsverteilungen (Elektronenwolken).
      </div>
    </div>
  `,

  detailBlocks: [
    {
      title: "Vom Bohr-Modell zum Orbitalmodell",
      content:
        "Das Bohr-Modell stellt Elektronen auf festen Kreisbahnen um den Kern dar. Dieses Bild ist anschaulich, aber physikalisch nicht korrekt. In der Quantenmechanik werden Elektronen durch Wellenfunktionen beschrieben, deren Betragsquadrat eine Aufenthaltswahrscheinlichkeit ergibt. Die Bereiche mit hoher Aufenthaltswahrscheinlichkeit haben bestimmte Formen und Energieniveaus ‚Äì das sind die Orbitale."
    },
    {
      title: "Was ein Orbital beschreibt",
      content:
        "Ein einzelnes Orbital fasst mehrere Eigenschaften zusammen: Es geh√∂rt zu einer bestimmten Schale (Hauptquantenzahl n), es hat eine bestimmte Form (Nebenquantenzahl l), eine r√§umliche Orientierung (m_l) und kann maximal zwei Elektronen mit entgegengesetztem Spin aufnehmen (m_s). Man kann sich ein Orbital als Elektronenwolke vorstellen, in der es wahrscheinlich ist, das Elektron anzutreffen."
    },
    {
      title: "Warum Orbitale f√ºr Chemie so wichtig sind",
      content:
        "Die Verteilung der Elektronen auf die verschiedenen Orbitale bestimmt, wie reaktiv ein Atom ist, welche Ladung es bevorzugt annimmt und wie es Bindungen eingeht. Valenzelektronen sitzen in den √§u√üeren Orbitalen und sind direkt an Bindungen beteiligt. Ohne das Orbitalbild k√∂nnte man viele Ph√§nomene wie Bindungsst√§rke, Molek√ºlgeometrie oder den Aufbau des Periodensystems nur auswendig lernen, statt sie zu verstehen."
    }
  ]
},


{
  id: "orbitale",
  title: "Atomorbitale: s- und p-Orbitale",
  tags: ["Orbitale", "s-Orbital", "p-Orbitale"],
  goals: [
    "Verstehen, was ein Atomorbital ist und wie es sich vom Bohr-Modell unterscheidet.",
    "s-Orbitale und p-Orbitale korrekt skizzieren und beschriften k√∂nnen.",
    "Die wichtigsten Quantenzahlen (n, l, m‚Çó, m‚Çõ) im Zusammenhang mit s- und p-Orbitalen einordnen.",
    "Wissen, ab welcher Schale p-Orbitale auftreten und wie viele es pro Schale gibt."
  ],
  summary:
    "Orbitale beschreiben Aufenthaltswahrscheinlichkeiten von Elektronen im Atom. s-Orbitale sind kugelf√∂rmig und besitzen Rotationssymmetrie, p-Orbitale sind hantelf√∂rmig und liegen als px-, py- und pz-Orbital entlang der Raumachsen vor. Jedes Orbital kann maximal zwei Elektronen mit entgegengesetztem Spin aufnehmen. In der Klausur ist wichtig, die Formen von s- und p-Orbitalen sauber skizzieren und richtig beschriften zu k√∂nnen.",

  keyPoints: [
    "Ein Orbital ist ein r√§umlicher Aufenthaltsbereich eines Elektrons mit bestimmter Energie (kein Planetenbahn-Modell).",
    "Die Form der Orbitale wird √ºber die Nebenquantenzahl l festgelegt: l = 0 ‚Üí s (kugelf√∂rmig), l = 1 ‚Üí p (hantelf√∂rmig).",
    "s-Orbitale: kugelf√∂rmig, pro Schale gibt es genau ein s-Orbital (1s, 2s, 3s, ...).",
    "p-Orbitale: hantelf√∂rmig mit zwei Lappen; es gibt immer drei gleichwertige p-Orbitale (px, py, pz) ab n = 2.",
    "Jedes Orbital kann maximal 2 Elektronen mit entgegengesetztem Spin aufnehmen (Pauli-Prinzip).",
    "Typische Klausuraufgabe: Skizze eines s-Orbitals und eines p-Orbitals mit Achsenbeschriftung und Kernpunkt."
  ],

  formulas: [
    "Hauptquantenzahl: n = 1, 2, 3, ...",
    "Nebenquantenzahl: l = 0 (s), 1 (p), 2 (d), 3 (f)",
    "m_l = -l, ..., 0, ..., +l",
    "m_s = +1/2 oder -1/2"
  ],

  visual: `
    <div class="learn-visual">
      <div style="font-size:12px; opacity:0.8; margin-bottom:6px;">
        Vereinfachte Skizzen f√ºr ein s-Orbital und p-Orbitale (px, py, pz).
      </div>
      <div style="display:flex; gap:24px; flex-wrap:wrap; justify-content:center; align-items:flex-start;">

        <!-- s-Orbital -->
        <div style="text-align:center;">
          <svg viewBox="0 0 120 120" width="110" height="110">
            <circle cx="60" cy="60" r="3" fill="currentColor" />
            <circle cx="60" cy="60" r="35" fill="none" stroke="currentColor" stroke-width="1.5" />
          </svg>
          <div style="font-size:12px; margin-top:4px;">s-Orbital (kugelf√∂rmig)</div>
        </div>

        <!-- p<sub>x</sub>-Orbital -->
        <div style="text-align:center;">
          <svg viewBox="0 0 120 120" width="110" height="110">
            <line x1="10" y1="60" x2="110" y2="60" stroke="currentColor" stroke-width="0.8" />
            <text x="108" y="52" style="font-size:10px; fill:currentColor;">x</text>
            <ellipse cx="40" cy="60" rx="18" ry="35" fill="none" stroke="currentColor" stroke-width="1.5" />
            <ellipse cx="80" cy="60" rx="18" ry="35" fill="none" stroke="currentColor" stroke-width="1.5" />
            <circle cx="60" cy="60" r="3" fill="currentColor" />
          </svg>
          <div style="font-size:12px; margin-top:4px;">p<sub>x</sub>-Orbital (hantelf√∂rmig)</div>
        </div>

        <!-- p<sub>y</sub>-Orbital -->
        <div style="text-align:center;">
          <svg viewBox="0 0 120 120" width="110" height="110">
            <line x1="60" y1="10" x2="60" y2="110" stroke="currentColor" stroke-width="0.8" />
            <text x="66" y="16" style="font-size:10px; fill:currentColor;">y</text>
            <ellipse cx="60" cy="40" rx="18" ry="35" fill="none" stroke="currentColor" stroke-width="1.5" />
            <ellipse cx="60" cy="80" rx="18" ry="35" fill="none" stroke="currentColor" stroke-width="1.5" />
            <circle cx="60" cy="60" r="3" fill="currentColor" />
          </svg>
          <div style="font-size:12px; margin-top:4px;">p<sub>y</sub>-Orbital</div>
        </div>

        <!-- p<sub>z</sub>-Orbital (schematisch) -->
        <div style="text-align:center;">
          <svg viewBox="0 0 120 120" width="110" height="110">
            <circle cx="60" cy="60" r="3" fill="currentColor" />
            <ellipse cx="60" cy="60" rx="30" ry="12" fill="none" stroke="currentColor" stroke-width="1.5" />
            <ellipse cx="60" cy="60" rx="8" ry="28" fill="none" stroke="currentColor" stroke-width="1.5" stroke-dasharray="3 3" />
            <text x="82" y="50" style="font-size:10px; fill:currentColor;">z</text>
          </svg>
          <div style="font-size:12px; margin-top:4px;">p<sub>z</sub>-Orbital (senkrecht zur Zeichenebene)</div>
        </div>

      </div>
      <div style="font-size:11px; opacity:0.7; margin-top:6px;">
        In der Klausur reichen oft stark vereinfachte Skizzen, wichtig sind: Kugelform f√ºr s, zwei Lappen f√ºr p und korrekte Beschriftung (Achsen, Kern).
      </div>
    </div>
  `,

  detailBlocks: [
    {
      title: "Intuition: Warum sprechen wir von Orbitalen?",
      content:
        "Das Bohr-Modell beschreibt Elektronen auf festen Kreisbahnen. F√ºr einfache Wasserstoff-√§hnliche Systeme funktioniert das n√§herungsweise, ist aber physikalisch nicht korrekt. In der Quantenmechanik werden Elektronen durch Wellenfunktionen beschrieben, deren Betragsquadrat eine Aufenthaltswahrscheinlichkeit ergibt. Die daraus entstehenden 'Elektronenwolken' mit bestimmter Energie und Form nennen wir Orbitale."
    },
    {
      title: "Die Rolle der Quantenzahlen",
      content:
        "Die Hauptquantenzahl n gibt Energie und Gr√∂√üe der Schale an. Die Nebenquantenzahl l legt die Form des Orbitals fest (s, p, d, f). Die magnetische Quantenzahl m_l beschreibt die Orientierung im Raum, bei p-Orbitalen f√ºhrt das zu px, py und pz. Die Spinquantenzahl m_s unterscheidet zwei Elektronen im selben Orbital. F√ºr Klausuraufgaben zu s- und p-Orbitalen reicht es meist, n und l richtig zuzuordnen und zu wissen, ab welcher Schale p-Orbitale auftreten."
    },
    {
      title: "Skizzen-Tipps f√ºr die Klausur",
      content:
        "s-Orbitale als Kugel: einen Kreis um den Kern zeichnen, Beschriftung z. B. '2s'. p-Orbitale als Hanteln: zwei Lappen, Kernpunkt in der Mitte, dazu eine Achse und Beschriftung (px, py). Es ist besser, eine einfache, saubere Skizze mit klarer Beschriftung zu haben, als ein √ºberladenes Bild mit vielen Details. Achte darauf, dass bei einem p-Orbital immer beide Lappen eingezeichnet sind."
    }

  ]
},


    {
      id: "mo-schema-elektronenkonfig",
      title: "MO-Schema & Elektronenkonfiguration",
      tags: ["MO-Schema", "Molek√ºlorbitale", "Elektronenkonfiguration"],
      goals: [
        "Elektronenkonfiguration von Atomen nach dem Aufbauprinzip, Pauli-Prinzip und Hundscher Regel aufschreiben k√∂nnen.",
        "Einfache MO-Schemata zeichnen und bindende sowie antibindende Molek√ºlorbitale unterscheiden k√∂nnen.",
        "Die Bindungsordnung aus einem MO-Schema berechnen und interpretieren k√∂nnen.",
        "Aus dem MO-Schema ableiten k√∂nnen, ob ein Molek√ºl paramagnetisch oder diamagnetisch ist."
      ],
      summary:
        "Die Elektronenkonfiguration beschreibt die Verteilung der Elektronen auf Atomorbitalen. In der Molek√ºlorbitaltheorie √ºberlappen Atomorbitale zu Molek√ºlorbitalen, die als bindende oder antibindende Orbitale auftreten. Durch Eintragen der Elektronen in ein MO-Schema lassen sich Bindungsordnung, Stabilit√§t und Magnetismus eines Molek√ºls bestimmen.",

      keyPoints: [
        "Elektronenkonfiguration wird nach dem Aufbauprinzip von energetisch niedrigen zu h√∂heren Orbitalen aufgebaut (z. B. 1s, 2s, 2p, 3s, 3p, 4s, 3d...).",
        "Pauli-Prinzip: Maximal 2 Elektronen mit entgegengesetztem Spin pro Orbital.",
        "Hundsche Regel: Entartete Orbitale (z. B. die 3 p-Orbitale) werden zun√§chst einzeln mit parallelem Spin besetzt, bevor Elektronen gepaart werden.",
        "Aus zwei Atomorbitalen entstehen immer zwei Molek√ºlorbitale: ein bindendes (energetisch tiefer) und ein antibindendes (energetisch h√∂her, mit * gekennzeichnet).",
        "Bindungsordnung BO = (n_bindend ‚àí n_antibindend) / 2. BO = 0 bedeutet keine stabile Bindung.",
        "Paramagnetische Molek√ºle besitzen ungepaarte Elektronen im MO-Schema, diamagnetische nur gepaarte Elektronen."
      ],

      formulas: [
        "Beispiel: O (Z = 8): 1s¬≤ 2s¬≤ 2p‚Å¥",
        "Bindungsordnung: BO = (n_bindend ‚àí n_antibindend) / 2"
      ],

           visual: `
        <div class="learn-visual">
          <div style="font-size:12px; opacity:0.8; margin-bottom:6px;">
            MO-Schemata wie in der Klausur: Energieniveauschemata (1a/1b) und fertiges F‚ÇÇ-Molek√ºl mit eingetragenen Elektronen.
          </div>

          <div style="display:flex; flex-wrap:wrap; gap:24px; justify-content:center;">
            <div style="text-align:center;">
              <img src="Images/mo-1a-1b.png" style="max-width:260px; height:auto; border-radius:6px;">
              <div style="font-size:12px; margin-top:4px;">
                Vergleich der beiden Schemen:<br>
                <b>Abbildung 1a</b> (links): O‚ÇÇ, F‚ÇÇ, Ne‚ÇÇ<br>
                <b>Abbildung 1b</b> (rechts): B‚ÇÇ, C‚ÇÇ, N‚ÇÇ
              </div>
            </div>

            <div style="text-align:center;">
              <img src="Images/mo-f2-full.png" style="max-width:260px; height:auto; border-radius:6px;">
              <div style="font-size:12px; margin-top:4px;">
                Fertiges MO-Schema f√ºr <b>F‚ÇÇ</b> wie in der Musterl√∂sung (alle 14 Valenzelektronen eingetragen).
              </div>
            </div>
          </div>

          <div style="font-size:11px; opacity:0.7; margin-top:6px;">
            Tipp: Du kannst hier sp√§ter eigene Skizzen f√ºr O‚ÇÇ, C‚ÇÇ usw. einf√ºgen, damit es genau zu deinen Klausuraufgaben passt.
          </div>
        </div>
      `,


      detailBlocks: [
        {
          title: "Elektronenkonfiguration kurz & klausurrelevant",
          content:
            "Die Elektronenkonfiguration beschreibt, wie die Elektronen eines Atoms auf Orbitale verteilt sind. Sie wird nach dem Aufbauprinzip von niedriger zu h√∂herer Energie aufgebaut. Das Pauli-Prinzip begrenzt die Besetzung jedes Orbitals auf zwei Elektronen mit entgegengesetztem Spin, die Hundsche Regel sorgt zuerst f√ºr m√∂glichst viele ungepaarte Elektronen in entarteten Orbitalen. F√ºr die Klausur solltest du Elektronenkonfigurationen sicher schreiben und einfache K√§stchenschemata zeichnen k√∂nnen."
        },
        {
          title: "Idee der Molek√ºlorbitale",
          content:
            "Wenn sich zwei Atome zu einem Molek√ºl verbinden, √ºberlappen ihre Atomorbitale und bilden Molek√ºlorbitale. Aus zwei Atomorbitale entstehen ein bindendes und ein antibindendes MO. Elektronen im bindenden MO stabilisieren das Molek√ºl, Elektronen im antibindenden MO schw√§chen die Bindung. Das Energieniveau der bindenden MOs liegt unterhalb, das der antibindenden oberhalb der urspr√ºnglichen Atomorbitale. Im MO-Schema werden die Elektronen wieder von unten nach oben in die MOs eingetragen."
        },
        {
          title: "Bindungsordnung & Magnetismus verstehen",
          content:
            "Die Bindungsordnung BO = (n_bindend ‚àí n_antibindend) / 2 gibt an, wie stark die Bindung zwischen zwei Atomen ist. Eine h√∂here Bindungsordnung bedeutet in der Regel st√§rkere und k√ºrzere Bindungen. Zus√§tzlich zeigt dir das MO-Schema, ob ein Molek√ºl paramagnetisch (ungepaarte Elektronen) oder diamagnetisch (alle Elektronen gepaart) ist. In vielen Klausuraufgaben reicht es, ein vereinfachtes MO-Schema zu zeichnen, die Elektronen zu verteilen und dann die Bindungsordnung zu berechnen."
        },
        {
          title: "Typische Klausuraufgaben & wie du sie beantwortest",
          content: `
            <div style="padding-left:18px; font-size:13px; line-height:1.5;">
              <ol style="margin-top:0;">
                <li style="margin-bottom:10px;">
                  <b>Elektronenkonfiguration angeben</b><br>
                  <b>Schritt 1:</b> Ordnungszahl Z im Periodensystem ablesen (Anzahl der Elektronen im neutralen Atom).<br>
                  <b>Schritt 2:</b> Orbitale in der richtigen Reihenfolge auff√ºllen (1s, 2s, 2p, 3s, 3p, 4s, 3d, ...), max. 2 Elektronen pro Orbital.<br>
                  <b>Schritt 3:</b> Elektronenkonfiguration in der Form 1s<sup>2</sup> 2s<sup>2</sup> 2p<sup>4</sup> aufschreiben.<br>
                  <i>Beispiel:</i> O (Z = 8) ‚Üí 1s<sup>2</sup> 2s<sup>2</sup> 2p<sup>4</sup>.
                </li>

                <li style="margin-bottom:10px;">
                  <b>MO-Schema zeichnen & Bindungsordnung bestimmen</b><br>
                  <b>Schritt 1:</b> Gesamtzahl der Elektronen im Molek√ºl bestimmen (z. B. H‚ÇÇ ‚Üí 2 e‚Åª, He‚ÇÇ ‚Üí 4 e‚Åª).<br>
                  <b>Schritt 2:</b> Vereinfachtes MO-Schema zeichnen: bindendes œÉ(1s) unten, antibindendes œÉ*(1s) oben.<br>
                  <b>Schritt 3:</b> Elektronen von unten nach oben in die MOs eintragen, max. 2 e‚Åª pro MO.<br>
                  <b>Schritt 4:</b> Bindungsordnung berechnen: BO = (n<sub>bindend</sub> ‚àí n<sub>antibindend</sub>) / 2.<br>
                  <i>Beispiel H‚ÇÇ:</i> 2 e‚Åª in œÉ(1s), 0 e‚Åª in œÉ*(1s) ‚Üí BO = (2 ‚àí 0) / 2 = 1 (stabile Einfachbindung).<br>
                  <i>Beispiel He‚ÇÇ:</i> 2 e‚Åª in œÉ(1s), 2 e‚Åª in œÉ*(1s) ‚Üí BO = (2 ‚àí 2) / 2 = 0 (keine stabile Bindung).
                </li>

                <li style="margin-bottom:10px;">
                  <b>Paramagnetisch oder diamagnetisch?</b><br>
                  <b>Schritt 1:</b> Im MO-Schema nach ungepaarten Elektronen suchen.<br>
                  <b>Schritt 2:</b> Mindestens ein ungepaartes Elektron ‚Üí Molek√ºl ist <b>paramagnetisch</b>.<br>
                  <b>Schritt 3:</b> Alle Elektronen gepaart (‚Üë‚Üì) ‚Üí Molek√ºl ist <b>diamagnetisch</b>.
                </li>

                <li style="margin-bottom:10px;">
                  <b>Bindungsst√§rke & Bindungsl√§nge vergleichen</b><br>
                  <b>Schritt 1:</b> F√ºr jedes Molek√ºl die Bindungsordnung bestimmen.<br>
                  <b>Schritt 2:</b> Merksatz: H√∂here BO ‚Üí st√§rkere & k√ºrzere Bindung; niedrigere BO ‚Üí schw√§chere & l√§ngere Bindung.<br>
                  <i>Beispiel:</i> BO(A) = 2, BO(B) = 1 ‚Üí Bindung in A ist st√§rker und k√ºrzer als in B.
                </li>
              </ol>
            </div>
          `
        }
      ]
    },

    {
      id: "strahlung-energie",
      title: "Strahlung & Energieeinheiten (Joule & eV)",
      tags: ["Strahlung", "Photonenenergie", "eV", "Joule"],
      goals: [
        "Verstehen, was ein Photon ist und wie elektromagnetische Strahlung beschrieben wird.",
        "Die Zusammenh√§nge zwischen Wellenl√§nge Œª, Frequenz ŒΩ und Lichtgeschwindigkeit c anwenden.",
        "Die Energie eines Photons mit E = h¬∑ŒΩ bzw. E = h¬∑c/Œª berechnen k√∂nnen.",
        "Das Elektronenvolt (eV) definieren und sicher zwischen Joule und eV umrechnen.",
        "Typische Klausuraufgaben zu Photonenergie, eV‚ÄìJoule-Umrechnung, Spannung und Photonenzahl systematisch l√∂sen k√∂nnen."
      ],
      summary: `
        Elektromagnetische Strahlung (Licht, UV, R√∂ntgenstrahlung ...) kann sowohl als Welle (mit Wellenl√§nge Œª und Frequenz ŒΩ) als auch als Teilchenstrom aus Photonen beschrieben werden.
        Jedes Photon tr√§gt eine bestimmte Energie, die nur von der Wellenl√§nge bzw. Frequenz der Strahlung abh√§ngt. √úber die Formeln E = h¬∑ŒΩ und E = h¬∑c/Œª lassen sich aus Œª oder ŒΩ die
        Energie einzelner Photonen berechnen. In der Atomphysik ist neben der SI-Einheit Joule besonders das Elektronenvolt (eV) wichtig: 1 eV ist die Energie, die ein Elektron beim Durchlaufen
        einer Spannung von 1 V gewinnt. F√ºr die Klausur ist vor allem wichtig, Wellenl√§ngen korrekt in Meter umzurechnen, mit den Naturkonstanten h und c sauber zu rechnen und sicher zwischen
        Joule und eV hin- und herzuwandeln.
      `,
      keyPoints: [
        "Elektromagnetische Strahlung kann als Welle (Œª, ŒΩ) und als Strom von Photonen betrachtet werden (Welle-Teilchen-Dualismus).",
        "Frequenz und Wellenl√§nge h√§ngen zusammen √ºber: ŒΩ = c / Œª (c ‚âà 3,00 ¬∑ 10^8 m/s).",
        "Photonenenergie: E = h¬∑ŒΩ = h¬∑c/Œª (h ‚âà 6,626 ¬∑ 10^-34 J¬∑s). Je kleiner Œª, desto gr√∂√üer E.",
        "Elektronenvolt: 1 eV ist die Energie, die ein Elektron beim Durchlaufen von 1 V gewinnt ‚Üí 1 eV = 1,602 ¬∑ 10^-19 J.",
        "Umrechnung: Joule ‚Üí eV: E_eV = E_J / (1,602 ¬∑ 10^-19); eV ‚Üí Joule: E_J = E_eV ¬∑ 1,602 ¬∑ 10^-19.",
        "Elektron an Spannung U: Energie = U eV (f√ºr ein Elektron) bzw. U ¬∑ e Joule.",
        "Typische Klausuraufgaben: Photonenergie aus Œª, Wellenl√§nge aus gegebener Energie, Energie eines Elektrons im elektrischen Feld, Anzahl Photonen aus einer Gesamtenergie."
      ],
      formulas: [
        "ŒΩ = c / Œª",
        "E = h ¬∑ ŒΩ",
        "E = h ¬∑ c / Œª",
        "1 eV = 1,602 ¬∑ 10^-19 J",
        "E_eV = E_J / (1,602 ¬∑ 10^-19)",
        "E_J = E_eV ¬∑ 1,602 ¬∑ 10^-19",
        "E(Elektron) = e ¬∑ U ‚âô U eV"
      ],
      visual: `
        <div class="learn-visual">
          <div style="font-size:12px; opacity:0.8; margin-bottom:6px;">
            √úbersicht √ºber die wichtigsten Gr√∂√üen der Photonenergie:
          </div>
          <pre style="font-size:11px; line-height:1.4; background:rgba(0,0,0,0.15); padding:8px; border-radius:6px;">
Wellenl√§nge:        Œª  [m]        (z. B. 500 nm = 500 ¬∑ 10^-9 m)
Frequenz:          ŒΩ  [Hz]       (ŒΩ = c / Œª)
Lichtgeschwindigkeit: c ‚âà 3,00 ¬∑ 10^8 m/s
Planck-Konstante:  h ‚âà 6,626 ¬∑ 10^-34 J¬∑s

Photonenergie:     E = h¬∑ŒΩ = h¬∑c/Œª

Elektronenvolt:    1 eV = 1,602 ¬∑ 10^-19 J
Umrechnung:
  eV ‚Üí Joule:      E_J = E_eV ¬∑ 1,602 ¬∑ 10^-19
  Joule ‚Üí eV:      E_eV = E_J / (1,602 ¬∑ 10^-19)

Elektron an U Volt:
  E = U eV  (f√ºr ein Elektron)
          </pre>
          <div style="font-size:11px; opacity:0.8; margin-top:4px;">
            Merkhilfe: <b>kleine Wellenl√§nge ‚Üí gro√üe Frequenz ‚Üí gro√üe Photonenergie.</b>
          </div>
        </div>
      `,
      detailBlocks: [
        {
          title: "Elektromagnetische Strahlung & Photon-Begriff",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Elektromagnetische Strahlung (z. B. Radiowellen, sichtbares Licht, UV, R√∂ntgenstrahlung) kann auf zwei Arten beschrieben werden:</p>
              <ul>
                <li>Als <b>Welle</b>: charakterisiert durch die <b>Wellenl√§nge</b> Œª (in m) und die <b>Frequenz</b> ŒΩ (in Hz).</li>
                <li>Als <b>Teilchenstrom</b> aus <b>Photonen</b>: jedes Photon tr√§gt ein bestimmtes Energiepaket.</li>
              </ul>
              <p>Wellenl√§nge und Frequenz stehen √ºber die Lichtgeschwindigkeit c in Beziehung:</p>
              <p style="text-align:center; margin:6px 0;"><b>ŒΩ = c / Œª</b></p>
              <p>F√ºr sichtbares Licht liegen die Wellenl√§ngen grob im Bereich von 400 nm (violett) bis 700 nm (rot). K√ºrzere Wellenl√§ngen (UV, R√∂ntgen) bedeuten h√∂herenergetische Photonen.</p>
            </div>
          `
        },
        {
          title: "Wichtige Gr√∂√üen & Naturkonstanten",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>F√ºr Berechnungen rund um Photonenergie und eV brauchst du nur wenige Konstanten:</p>
              <ul>
                <li><b>Lichtgeschwindigkeit</b>: c ‚âà 3,00 ¬∑ 10<sup>8</sup> m/s.</li>
                <li><b>Planck-Konstante</b>: h ‚âà 6,626 ¬∑ 10<sup>-34</sup> J¬∑s.</li>
                <li><b>Elementarladung</b> (Ladung eines Elektrons): e = 1,602 ¬∑ 10<sup>-19</sup> C.</li>
              </ul>
              <p>Einheiten & Umrechnungen, die du dir merken solltest:</p>
              <ul>
                <li>1 nm = 10<sup>-9</sup> m ‚Üí Beispiel: 500 nm = 500 ¬∑ 10<sup>-9</sup> m = 5,00 ¬∑ 10<sup>-7</sup> m.</li>
                <li>Frequenz in Hz bedeutet ‚ÄûSchwingungen pro Sekunde‚Äú, 1 Hz = 1/s.</li>
                <li>Joule (J) ist die SI-Einheit der Energie, eV ist eine praktische ‚ÄûAtomphysik-Einheit‚Äú.</li>
              </ul>
            </div>
          `
        },
        {
          title: "Photonenergie: E = h¬∑ŒΩ = h¬∑c/Œª",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Die Energie eines einzelnen Photons ist direkt proportional zur Frequenz und umgekehrt proportional zur Wellenl√§nge:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>E = h ¬∑ ŒΩ = h ¬∑ c / Œª</b>
              </p>
              <ul>
                <li><b>E</b> in Joule (J)</li>
                <li><b>h</b> Planck-Konstante (J¬∑s)</li>
                <li><b>ŒΩ</b> Frequenz (Hz)</li>
                <li><b>Œª</b> Wellenl√§nge (m)</li>
                <li><b>c</b> Lichtgeschwindigkeit (m/s)</li>
              </ul>
              <p>Ablaufschema f√ºr Aufgaben mit gegebener Wellenl√§nge Œª:</p>
              <ol>
                <li>Œª in Meter umrechnen (nm ‚Üí m).</li>
                <li>Mit <b>E = h¬∑c/Œª</b> die Photonenenergie in Joule berechnen.</li>
                <li>Falls gefragt: Joule ‚Üí eV umrechnen.</li>
              </ol>
              <p>Typische Gr√∂√üenordnung: sichtbares Licht hat Photonenenergien von ca. 2 bis 3 eV (~10<sup>-19</sup> J).</p>
            </div>
          `
        },
        {
          title: "Elektronenvolt (eV) & Umrechnung zu Joule",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p><b>Definition:</b> 1 Elektronenvolt (1 eV) ist die Energie, die ein Elektron gewinnt, wenn es eine Spannung von 1 Volt durchl√§uft.</p>
              <p>Mathematisch: E = e ¬∑ U, also f√ºr U = 1 V:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>1 eV = 1,602 ¬∑ 10<sup>-19</sup> J</b>
              </p>
              <p>Damit erh√§ltst du die Umrechnungsformeln:</p>
              <ul>
                <li><b>eV ‚Üí Joule</b>: E<sub>J</sub> = E<sub>eV</sub> ¬∑ 1,602 ¬∑ 10<sup>-19</sup> J/eV</li>
                <li><b>Joule ‚Üí eV</b>: E<sub>eV</sub> = E<sub>J</sub> / (1,602 ¬∑ 10<sup>-19</sup> J/eV)</li>
              </ul>
              <p>Beispiele:</p>
              <ul>
                <li>2,0 eV ‚Üí E = 2,0 ¬∑ 1,602 ¬∑ 10<sup>-19</sup> J ‚âà 3,20 ¬∑ 10<sup>-19</sup> J.</li>
                <li>4,0 ¬∑ 10<sup>-19</sup> J ‚Üí E = (4,0 ¬∑ 10<sup>-19</sup> J) / (1,602 ¬∑ 10<sup>-19</sup> J/eV) ‚âà 2,5 eV.</li>
              </ul>
              <p>Merke: eV ist f√ºr atomare Energien sehr handlich, Joule ist die offizielle SI-Einheit ‚Äì die Klausur will oft beides.</p>
            </div>
          `
        },
        {
          title: "Elektron im elektrischen Feld: Energie aus Spannung",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>F√ºr ein Elektron, das eine Spannung U durchl√§uft, gilt:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>E = e ¬∑ U</b>
              </p>
              <p>Da 1 eV = e ¬∑ 1 V, folgt f√ºr ein Elektron ganz einfach:</p>
              <ul>
                <li>Bei 1 V ‚Üí 1 eV</li>
                <li>Bei 10 V ‚Üí 10 eV</li>
                <li>Bei 120 V ‚Üí 120 eV</li>
              </ul>
              <p>In Joule gerechnet:</p>
              <p>E<sub>J</sub> = U ¬∑ 1,602 ¬∑ 10<sup>-19</sup> J</p>
              <p><b>Beispiel:</b> U = 120 V</p>
              <ul>
                <li>E = 120 eV</li>
                <li>E<sub>J</sub> = 120 ¬∑ 1,602 ¬∑ 10<sup>-19</sup> ‚âà 1,92 ¬∑ 10<sup>-17</sup> J</li>
              </ul>
            </div>
          `
        },
        {
          title: "Typische Klausurwege ‚Äì Rezepte",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p><b>1) Photonenergie aus gegebener Wellenl√§nge Œª</b></p>
              <ol>
                <li>Œª in Meter umrechnen (nm ‚Üí m).</li>
                <li>Mit E = h ¬∑ c / Œª die Energie in Joule berechnen.</li>
                <li>Wenn eV verlangt sind: E<sub>eV</sub> = E<sub>J</sub> / (1,602 ¬∑ 10<sup>-19</sup>).</li>
              </ol>

              <p><b>2) Wellenl√§nge aus gegebener Energie in eV</b></p>
              <ol>
                <li>E in Joule umrechnen: E<sub>J</sub> = E<sub>eV</sub> ¬∑ 1,602 ¬∑ 10<sup>-19</sup>.</li>
                <li>Aus E = h¬∑c/Œª nach Œª umstellen: Œª = h¬∑c / E.</li>
                <li>Ergebnis in nm angeben (m ‚Üí nm).</li>
              </ol>

              <p><b>3) Elektron an Spannung U</b></p>
              <ol>
                <li>Energie in eV: E = U eV.</li>
                <li>Falls Joule gefragt sind: E<sub>J</sub> = U ¬∑ 1,602 ¬∑ 10<sup>-19</sup> J.</li>
              </ol>

              <p><b>4) Anzahl Photonen bei gegebener Gesamtenergie</b></p>
              <ol>
                <li>Zuerst Energie eines Photons aus der Wellenl√§nge bestimmen (E<sub>Photon</sub> = h¬∑c/Œª).</li>
                <li>Dann: Anzahl N = E<sub>gesamt</sub> / E<sub>Photon</sub>.</li>
              </ol>
              <p>Wenn du diese vier ‚ÄûRezepte‚Äú beherrschst, kannst du praktisch jede Standardaufgabe aus diesem Themenblock bearbeiten.</p>
            </div>
          `
        },
        {
          title: "Klausurbeispiele Schritt f√ºr Schritt",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p><b>Beispiel 1: Photonenergie f√ºr Œª = 550 nm (sichtbares Licht)</b></p>
              <p>Gegeben: Œª = 550 nm.</p>
              <ol>
                <li>Umrechnung: 550 nm = 550 ¬∑ 10<sup>-9</sup> m = 5,50 ¬∑ 10<sup>-7</sup> m.</li>
                <li>Photonenergie: E ‚âà h¬∑c/Œª ‚âà 3,6 ¬∑ 10<sup>-19</sup> J.</li>
                <li>In eV: E ‚âà (3,6 ¬∑ 10<sup>-19</sup> J) / (1,602 ¬∑ 10<sup>-19</sup> J/eV) ‚âà 2,3 eV.</li>
              </ol>

              <p><b>Beispiel 2: UV-Photon mit Œª = 250 nm</b></p>
              <ol>
                <li>250 nm = 2,50 ¬∑ 10<sup>-7</sup> m.</li>
                <li>E ‚âà h¬∑c/Œª ‚âà 8,0 ¬∑ 10<sup>-19</sup> J.</li>
                <li>E in eV: ‚âà 5,0 eV ‚Üí deutlich energiereicher als sichtbares Licht.</li>
              </ol>

              <p><b>Beispiel 3: Energie gegeben (3,0 eV) ‚Äì Wellenl√§nge gesucht</b></p>
              <ol>
                <li>E in Joule: E<sub>J</sub> = 3,0 eV ¬∑ 1,602 ¬∑ 10<sup>-19</sup> ‚âà 4,81 ¬∑ 10<sup>-19</sup> J.</li>
                <li>Œª = h¬∑c/E ‚âà (6,626 ¬∑ 10<sup>-34</sup> ¬∑ 3,00 ¬∑ 10<sup>8</sup>) / (4,81 ¬∑ 10<sup>-19</sup>) ‚âà 4,1 ¬∑ 10<sup>-7</sup> m.</li>
                <li>In nm: Œª ‚âà 410 nm (violett/blau-violett).</li>
              </ol>

              <p><b>Beispiel 4: Elektron an U = 120 V</b></p>
              <ol>
                <li>Energie in eV: E = 120 eV.</li>
                <li>In Joule: E<sub>J</sub> = 120 ¬∑ 1,602 ¬∑ 10<sup>-19</sup> ‚âà 1,92 ¬∑ 10<sup>-17</sup> J.</li>
              </ol>

              <p><b>Beispiel 5: Anzahl Photonen in einem Laserpuls</b></p>
              <p>Gegeben: Œª = 500 nm, Gesamtenergie E<sub>gesamt</sub> = 1,0 ¬∑ 10<sup>-3</sup> J.</p>
              <ol>
                <li>Photonenergie bei 500 nm: E<sub>Photon</sub> ‚âà 4,0 ¬∑ 10<sup>-19</sup> J.</li>
                <li>Anzahl N = E<sub>gesamt</sub> / E<sub>Photon</sub> ‚âà (1,0 ¬∑ 10<sup>-3</sup>) / (4,0 ¬∑ 10<sup>-19</sup>) ‚âà 2,5 ¬∑ 10<sup>15</sup> Photonen.</li>
              </ol>
              <p style="margin-top:6px;">
                Du musst die Rechenwege nicht auswendig lernen ‚Äì wichtig ist, dass du die Gr√∂√üenordnungen kennst und sauber mit Zehnerpotenzen und der Umrechnung zwischen Joule und eV umgehen kannst.
              </p>
            </div>
          `
        }
      ]
    },
    {
      id: "stoechiometrie-ph-gehalt",
      title: "St√∂chiometrie, pH & Gehaltsbestimmung",
      tags: ["St√∂chiometrie", "pH", "Titration", "Gehaltsbestimmung"],
      goals: [
        "Die grundlegenden st√∂chiometrischen Gr√∂√üen (n, m, M, c, V) sicher anwenden k√∂nnen.",
        "Reaktionsgleichungen aufstellen, ausgleichen und Stoffmengenverh√§ltnisse daraus ablesen k√∂nnen.",
        "Den pH starker S√§uren und Basen (z. B. HCl, NaOH) aus Konzentrationen berechnen k√∂nnen.",
        "Die Logik von Titrationen und Gehaltsbestimmungen verstehen und auf Klausuraufgaben anwenden k√∂nnen.",
        "pH nach einer Neutralisationsreaktion mit √úberschuss einer Komponente berechnen k√∂nnen."
      ],
      summary: `
        In diesem Thema verkn√ºpfst du drei wichtige Bausteine der Allgemeinen Chemie: St√∂chiometrie, pH-Berechnung und Gehaltsbestimmung.
        St√∂chiometrie liefert dir das Handwerkszeug, um aus Massen und Volumina Stoffmengen zu berechnen und mit Reaktionsgleichungen zu arbeiten.
        √úber den pH-Begriff kannst du die St√§rke saurer bzw. basischer L√∂sungen quantitativ beschreiben ‚Äì zumindest f√ºr starke S√§uren und Basen mit relativ einfachen Formeln.
        Mit der Titrations- und Gehaltsbestimmung verbindest du beides: anhand der ben√∂tigten Menge einer Ma√ül√∂sung kann der Gehalt einer unbekannten Probe berechnet werden.
        Genau dieser Themenmix ist typisch f√ºr Klausuraufgaben, bei denen du Schritt f√ºr Schritt von Reaktionsgleichung √ºber Stoffmengen bis hin zu pH oder Massenanteil rechnen musst.
      `,
      keyPoints: [
        "Stoffmenge n, Masse m, molare Masse M und Konzentration c geh√∂ren zu den Grundgr√∂√üen der St√∂chiometrie: n = m/M, n = c¬∑V.",
        "Reaktionsgleichungen m√ºssen ausgeglichen werden, bevor Stoffmengen aus dem st√∂chiometrischen Verh√§ltnis berechnet werden.",
        "pH = ‚àílog10[H+] f√ºr starke S√§uren; pOH = ‚àílog10[OH‚àí] f√ºr starke Basen und pH + pOH = 14 bei 25 ¬∞C.",
        "Bei starken S√§uren/Basen gilt n√§herungsweise: [H+] ‚âà c(S√§ure) bzw. [OH‚àí] ‚âà c(Base), solange keine anderen Effekte dominieren.",
        "Titrationen nutzen eine Ma√ül√∂sung bekannter Konzentration, um eine unbekannte Stoffmenge √ºber das st√∂chiometrische Verh√§ltnis zu bestimmen.",
        "Nach einer neutralisationsreaktion mit √úberschuss kann der pH aus der √ºbrig gebliebenen starken S√§ure oder Base berechnet werden."
      ],
      formulas: [
        "n = m / M",
        "n = c ¬∑ V",
        "c = n / V",
        "pH = ‚àílog10 [H+]",
        "pOH = ‚àílog10 [OH‚àí]",
        "pH + pOH = 14 (bei 25 ¬∞C)",
        "HCl + NaOH ‚Üí NaCl + H2O",
        "H2SO4 + 2 NaOH ‚Üí Na2SO4 + 2 H2O"
      ],
      visual: `
        <div class="learn-visual">
          <div style="font-size:12px; opacity:0.8; margin-bottom:6px;">
            St√∂chiometrie, pH und Titration auf einen Blick:
          </div>
          <pre style="font-size:11px; line-height:1.4; background:rgba(0,0,0,0.15); padding:8px; border-radius:6px;">
Stoffmenge:           n [mol]     n = m / M  oder  n = c ¬∑ V
Masse:                m [g]
Molmasse:             M [g/mol]
Konzentration:        c [mol/L]  (Mol pro Liter)
Volumen:              V [L]      (mL ‚Üí L: durch 1000 teilen)

pH starker S√§uren:    pH = ‚àílog10[H‚Å∫]     (z.B. HCl)
pH starker Basen:     pOH = ‚àílog10[OH‚Åª], pH + pOH = 14 (25 ¬∞C)
                       [OH‚Åª] ‚âà c(NaOH) bei starker Base

Neutralisation:
  HCl + NaOH ‚Üí NaCl + H‚ÇÇO           (1 : 1 Verh√§ltnis)
  H‚ÇÇSO‚ÇÑ + 2 NaOH ‚Üí Na‚ÇÇSO‚ÇÑ + 2 H‚ÇÇO   (1 : 2 Verh√§ltnis)

Titration:
  n(Ma√ül√∂sung) = c ¬∑ V
  Sto√üzahl √ºber Reaktionsgleichung auf gesuchte Stoffmenge √ºbertragen.
          </pre>
          <div style="font-size:11px; opacity:0.8; margin-top:4px;">
            Merkhilfe: <b>Immer zuerst die Reaktionsgleichung ausgleichen, dann n berechnen, dann pH oder Masse bestimmen.</b>
          </div>
        </div>
      `,
      detailBlocks: [
        {
          title: "St√∂chiometrie-Grundlagen: n, m, M, c & Reaktionsgleichung",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>St√∂chiometrie beschreibt, wie viel von welchen Stoffen in einer Reaktion beteiligt ist. Die wichtigsten Gr√∂√üen sind:</p>
              <ul>
                <li><b>Stoffmenge n</b> in mol.</li>
                <li><b>Masse m</b> in g.</li>
                <li><b>Molare Masse M</b> in g/mol (z. B. NaCl: M ‚âà 58,5 g/mol).</li>
                <li><b>Stoffmengenkonzentration c</b> in mol/L.</li>
                <li><b>Volumen V</b> in L (mL ‚Üí L: durch 1000).</li>
              </ul>
              <p>Standardbeziehungen:</p>
              <ul>
                <li><b>n = m / M</b> ‚Üí aus Masse und molarer Masse die Stoffmenge bestimmen.</li>
                <li><b>m = n ¬∑ M</b> ‚Üí aus Stoffmenge die Masse berechnen.</li>
                <li><b>c = n / V</b> und <b>n = c ¬∑ V</b> ‚Üí Verkn√ºpfung von Konzentration, Volumen und Stoffmenge.</li>
              </ul>
              <p>Die <b>Reaktionsgleichung</b> ist dein st√∂chiometrischer Fahrplan. Beispiel Neutralisation:</p>
              <pre style="font-size:11px; line-height:1.4; background:rgba(0,0,0,0.15); padding:6px; border-radius:6px;">
HCl + NaOH ‚Üí NaCl + H‚ÇÇO  (1 : 1 Verh√§ltnis)
H‚ÇÇSO‚ÇÑ + 2 NaOH ‚Üí Na‚ÇÇSO‚ÇÑ + 2 H‚ÇÇO  (1 : 2 Verh√§ltnis)
              </pre>
              <p>Allgemeine Vorgehensweise in Aufgaben:</p>
              <ol>
                <li>Reaktionsgleichung aufstellen und <b>ausgleichen</b>.</li>
                <li>Alle gegebenen Gr√∂√üen in SI-Einheiten umrechnen (m in g, V in L).</li>
                <li>Gegebene Stoffmengen berechnen (n = m/M oder n = c¬∑V).</li>
                <li>Mit <b>Koeffizienten</b> aus der Reaktionsgleichung Verh√§ltnis bestimmen und gesuchte Stoffmenge ausrechnen.</li>
                <li>Gesuchte Gr√∂√üe (Masse, Konzentration etc.) aus n berechnen.</li>
              </ol>
            </div>
          `
        },
        {
          title: "pH, pOH & starke S√§uren/Basen",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Der <b>pH-Wert</b> ist ein Ma√ü f√ºr die Konzentration an Oxoniumionen (H‚Å∫) in einer L√∂sung:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>pH = ‚àílog<sub>10</sub>[H‚Å∫]</b>
              </p>
              <p>F√ºr starke S√§uren (z. B. HCl) nimmt man an, dass sie in verd√ºnnter L√∂sung vollst√§ndig dissoziieren:</p>
              <ul>
                <li>HCl ‚Üí H‚Å∫ + Cl‚Åª ‚Üí [H‚Å∫] ‚âà c(HCl)</li>
              </ul>
              <p>F√ºr starke Basen (z. B. NaOH) gilt:</p>
              <ul>
                <li>NaOH ‚Üí Na‚Å∫ + OH‚Åª ‚Üí [OH‚Åª] ‚âà c(NaOH)</li>
              </ul>
              <p>Der pOH-Wert ist analog definiert:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>pOH = ‚àílog<sub>10</sub>[OH‚Åª]</b>
              </p>
              <p>In Wasser bei 25 ¬∞C gilt:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>pH + pOH = 14</b>
              </p>
              <p>Vorgehen f√ºr starke Basen:</p>
              <ol>
                <li>[OH‚Åª] aus c(Base) bestimmen.</li>
                <li>pOH = ‚àílog[OH‚Åª] berechnen.</li>
                <li>pH = 14 ‚àí pOH berechnen.</li>
              </ol>
              <p>Typische Werte:</p>
              <ul>
                <li>c(HCl) = 0,10 mol/L ‚Üí pH ‚âà 1,0</li>
                <li>c(NaOH) = 0,010 mol/L ‚Üí [OH‚Åª] = 0,010 ‚Üí pOH = 2 ‚Üí pH = 12</li>
              </ul>
            </div>
          `
        },
        {
          title: "Titration & Gehaltsbestimmung ‚Äì allgemeine Logik",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Bei einer <b>Titration</b> wird eine Probe unbekannter Zusammensetzung (z. B. S√§ure oder Base) mit einer <b>Ma√ül√∂sung bekannter Konzentration</b> umgesetzt, bis ein bestimmter Punkt (meist √Ñquivalenzpunkt) erreicht ist.</p>
              <p>Am <b>√Ñquivalenzpunkt</b> sind die Stoffmengen von S√§ure und Base im <b>st√∂chiometrisch richtigen Verh√§ltnis</b>, das du aus der Reaktionsgleichung ablesen kannst.</p>
              <p>Algorithmus f√ºr Gehaltsbestimmungen:</p>
              <ol>
                <li><b>Reaktionsgleichung</b> korrekt aufstellen und ausgleichen (z. B. H‚ÇÇSO‚ÇÑ + 2 NaOH ‚Üí ...).</li>
                <li>Stoffmenge der Ma√ül√∂sung berechnen: n(Ma√ü) = c(Ma√ü) ¬∑ V(Ma√ü) (mit V in L).</li>
                <li>√úber das st√∂chiometrische Verh√§ltnis aus der Gleichung die Stoffmenge der gesuchten Komponente bestimmen.</li>
                <li>Aus der Stoffmenge die Masse berechnen: m = n ¬∑ M.</li>
                <li>Falls ein Gehalt in Prozent gefragt ist: w = (m(gesucht) / m(Probe)) ¬∑ 100 %.</li>
              </ol>
              <p>Beispielreaktion f√ºr eine Neutralisation:</p>
              <pre style="font-size:11px; line-height:1.4; background:rgba(0,0,0,0.15); padding:6px; border-radius:6px;">
H‚ÇÇSO‚ÇÑ + 2 NaOH ‚Üí Na‚ÇÇSO‚ÇÑ + 2 H‚ÇÇO

‚Üí 1 mol H‚ÇÇSO‚ÇÑ neutralisiert 2 mol NaOH.
              </pre>
              <p>Mit diesem Schema kannst du alle klassischen Gehaltsbestimmungsaufgaben bearbeiten, in denen eine S√§ure-/Base-Probe mit einer Ma√ül√∂sung titriert wird.</p>
            </div>
          `
        },
        {
          title: "pH nach Neutralisation mit √úberschuss",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Oft werden S√§ure und Base zusammengegeben, aber nicht im st√∂chiometrisch exakten Verh√§ltnis ‚Äì es bleibt ein <b>√úberschuss</b> von S√§ure oder Base √ºbrig. Der pH der Mischung wird dann durch diesen √úberschuss bestimmt.</p>
              <p>Vorgehen:</p>
              <ol>
                <li>Reaktionsgleichung aufstellen und ausgleichen.</li>
                <li>Stoffmengen von S√§ure und Base berechnen: n = c¬∑V.</li>
                <li>√úber das st√∂chiometrische Verh√§ltnis die tats√§chlich reagierte Stoffmenge bestimmen.</li>
                <li>√úbrig gebliebenen √úberschuss berechnen: n(√úberschuss) = n(Ausgang) ‚àí n(verbrauchte).</li>
                <li>Gesamtvolumen der L√∂sung berechnen (Summe der Volumina, falls additiv angenommen).</li>
                <li>Aus n(√úberschuss) und V(gesamt) die Konzentration [H‚Å∫] oder [OH‚Åª] berechnen.</li>
                <li>Aus [H‚Å∫]/[OH‚Åª] pH bzw. pOH und dann pH berechnen.</li>
              </ol>
              <p>Wichtig: Nur der √úberschuss einer starken S√§ure/Base bestimmt den pH. Die neutralisierten Anteile ergeben ein Salz (z. B. NaCl), das in diesen einfachen Beispielen den pH nicht wesentlich st√∂rt.</p>
            </div>
          `
        },
        {
          title: "Klausurbeispiele Schritt f√ºr Schritt",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p><b>Beispiel 1: Titration HCl mit NaOH ‚Äì Konzentration berechnen</b></p>
              <p>Gegeben: 25,0 mL HCl werden mit 0,100 mol/L NaOH titriert, am √Ñquivalenzpunkt wurden 18,0 mL NaOH verbraucht.</p>
              <ol>
                <li>Reaktion: HCl + NaOH ‚Üí NaCl + H‚ÇÇO (1 : 1).</li>
                <li>n(NaOH) = 0,100 mol/L ¬∑ 0,0180 L = 1,80 ¬∑ 10‚Åª¬≥ mol.</li>
                <li>Am √ÑP: n(HCl) = n(NaOH) = 1,80 ¬∑ 10‚Åª¬≥ mol.</li>
                <li>c(HCl) = n / V = 1,80 ¬∑ 10‚Åª¬≥ mol / 0,0250 L = 0,072 mol/L.</li>
              </ol>

              <p><b>Beispiel 2: pH einer starken Base</b></p>
              <p>Gegeben: c(NaOH) = 0,020 mol/L.</p>
              <ol>
                <li>[OH‚Åª] = 0,020 mol/L.</li>
                <li>pOH = ‚àílog(0,020) ‚âà 1,70.</li>
                <li>pH = 14 ‚àí 1,70 = 12,30.</li>
              </ol>

              <p><b>Beispiel 3: Gehaltsbestimmung √ºber R√ºcktitration mit H‚ÇÇSO‚ÇÑ</b></p>
              <p>Gegeben: Probe Base X wird in 50,0 mL 0,100 mol/L H‚ÇÇSO‚ÇÑ gel√∂st. Der S√§ure√ºberschuss wird mit 0,100 mol/L NaOH titriert, am √ÑP wurden 20,0 mL NaOH verbraucht. X reagiert 1:1 mit H‚Å∫, M(X) = 40,0 g/mol.</p>
              <ol>
                <li>n(H‚ÇÇSO‚ÇÑ) = 0,100 ¬∑ 0,0500 = 5,00 ¬∑ 10‚Åª¬≥ mol ‚Üí n(H‚Å∫)_anfangs = 2 ¬∑ 5,00 ¬∑ 10‚Åª¬≥ = 1,00 ¬∑ 10‚Åª¬≤ mol.</li>
                <li>n(NaOH) = 0,100 ¬∑ 0,0200 = 2,00 ¬∑ 10‚Åª¬≥ mol ‚Üí n(H‚Å∫)_√ºbrig = 2,00 ¬∑ 10‚Åª¬≥ mol.</li>
                <li>n(H‚Å∫)_von X verbraucht = 1,00 ¬∑ 10‚Åª¬≤ ‚àí 2,00 ¬∑ 10‚Åª¬≥ = 8,00 ¬∑ 10‚Åª¬≥ mol.</li>
                <li>X reagiert 1:1 mit H‚Å∫ ‚Üí n(X) = 8,00 ¬∑ 10‚Åª¬≥ mol.</li>
                <li>m(X) = n ¬∑ M = 8,00 ¬∑ 10‚Åª¬≥ mol ¬∑ 40,0 g/mol = 0,320 g = 320 mg.</li>
              </ol>

              <p><b>Beispiel 4: pH nach Zugabe von NaOH zu HCl (√úberschuss)</b></p>
              <p>Gegeben: 50,0 mL 0,100 mol/L HCl + 30,0 mL 0,050 mol/L NaOH.</p>
              <ol>
                <li>n(HCl) = 0,100 ¬∑ 0,0500 = 5,00 ¬∑ 10‚Åª¬≥ mol.</li>
                <li>n(NaOH) = 0,050 ¬∑ 0,0300 = 1,50 ¬∑ 10‚Åª¬≥ mol.</li>
                <li>HCl + NaOH reagieren 1:1 ‚Üí NaOH ist limitierend, HCl im √úberschuss.</li>
                <li>n(HCl)_√ºbrig = 5,00 ¬∑ 10‚Åª¬≥ ‚àí 1,50 ¬∑ 10‚Åª¬≥ = 3,50 ¬∑ 10‚Åª¬≥ mol.</li>
                <li>V_gesamt = (50,0 + 30,0) mL = 80,0 mL = 0,0800 L.</li>
                <li>[H‚Å∫] = n(HCl)_√ºbrig / V_gesamt = 3,50 ¬∑ 10‚Åª¬≥ / 0,0800 ‚âà 4,38 ¬∑ 10‚Åª¬≤ mol/L.</li>
                <li>pH ‚âà ‚àílog(4,38 ¬∑ 10‚Åª¬≤) ‚âà 1,4 (stark sauer).</li>
              </ol>

              <p style="margin-top:6px;">
                Wenn du diese Beispiele nachvollziehen kannst, hast du die typischen Klausuraufgaben zu St√∂chiometrie, pH und Gehaltsbestimmung sehr gut im Griff: erst Reaktionsgleichung, dann Stoffmengen, dann pH oder Masse/Gehalt.
              </p>
            </div>
          `
        }
      ]
    },

    {
      id: "radioaktiver-zerfall-halbwertszeit",
      title: "Radioaktiver Zerfall & Halbwertszeit",
      tags: ["Radioaktivit√§t", "Halbwertszeit", "Zerfall", "Exponentialfunktionen"],
      goals: [
        "Verstehen, was radioaktiver Zerfall ist und welche Rolle die Halbwertszeit spielt.",
        "Die Definition der Halbwertszeit T1/2 sicher anwenden k√∂nnen.",
        "Die allgemeine Zerfallsformel N(t) = N0 ¬∑ (1/2)^(t/T1/2) auf Masse, Teilchenzahl oder Aktivit√§t anwenden k√∂nnen.",
        "Umgekehrt aus einer gegebenen Restmenge die vergangene Zeit t bestimmen k√∂nnen.",
        "Typische Klausuraufgaben (z. B. 200 g ‚Üí 25 g nach mehreren Halbwertszeiten) Schritt f√ºr Schritt l√∂sen k√∂nnen."
      ],
      summary: `
        Beim radioaktiven Zerfall wandeln sich instabile Atomkerne spontan in andere Kerne um. Der Zerfall einzelner Kerne ist zuf√§llig,
        aber f√ºr eine gro√üe Anzahl von Kernen l√§sst sich das Verhalten sehr gut mit einer Exponentialfunktion beschreiben:
        Pro Zeitintervall zerf√§llt immer der gleiche Bruchteil, nicht die gleiche absolute Menge.
        Die Halbwertszeit T‚ÇÅ/‚ÇÇ gibt an, nach welcher Zeit die H√§lfte der urspr√ºnglichen Menge zerfallen ist.
        Nach jeder weiteren Halbwertszeit halbiert sich die verbleibende Menge erneut.
        Mathematisch l√§sst sich der Zerfall √ºber N(t) = N‚ÇÄ ¬∑ (1/2)^(t/T‚ÇÅ/‚ÇÇ) (oder √§quivalent mit der Zerfallskonstante Œª) beschreiben.
        Das gleiche Gesetz gilt f√ºr Teilchenzahl, Masse und Aktivit√§t. In der Klausur werden h√§ufig Aufgaben gestellt,
        bei denen entweder die Restmenge nach einer gegebenen Zeit oder die ben√∂tigte Zeit f√ºr einen gew√ºnschten Restanteil berechnet werden muss.
      `,
      keyPoints: [
        "Radioaktiver Zerfall ist ein statistischer, spontaner Prozess, der sich makroskopisch als exponentielle Abnahme zeigt.",
        "Die Halbwertszeit T1/2 ist die Zeit, nach der die H√§lfte der urspr√ºnglichen Menge eines radioaktiven Stoffes zerfallen ist.",
        "Nach n Halbwertszeiten gilt: N = N0 ¬∑ (1/2)^n (z. B. n = 3 ‚Üí N = N0/8).",
        "Allgemein: N(t) = N0 ¬∑ (1/2)^(t/T1/2) f√ºr Teilchenzahl, Masse oder Aktivit√§t.",
        "Die Zerfallskonstante Œª h√§ngt mit der Halbwertszeit zusammen √ºber T1/2 = ln(2)/Œª.",
        "Typische Aufgaben: Restmenge nach gegebener Zeit, ben√∂tigte Zeit f√ºr bestimmten Anteil, Anzahl Halbwertszeiten bestimmen."
      ],
      formulas: [
        "N(t) = N0 ¬∑ (1/2)^(t / T1/2)",
        "m(t) = m0 ¬∑ (1/2)^(t / T1/2)",
        "A(t) = A0 ¬∑ (1/2)^(t / T1/2)",
        "N(t) = N0 ¬∑ e^(‚àíŒª t)",
        "T1/2 = ln(2) / Œª",
        "Œª = ln(2) / T1/2",
        "t = T1/2 ¬∑ ln(N(t)/N0) / ln(1/2)"
      ],
      visual: `
        <div class="learn-visual">
          <div style="font-size:12px; opacity:0.8; margin-bottom:6px;">
            Halbwertszeit und Zerfall auf einen Blick:
          </div>
          <pre style="font-size:11px; line-height:1.4; background:rgba(0,0,0,0.15); padding:8px; border-radius:6px;">
N(t):    Anzahl Kerne / Masse / Aktivit√§t zum Zeitpunkt t
N‚ÇÄ:      Anfangsmenge (t = 0)
T‚ÇÅ/‚ÇÇ:    Halbwertszeit

Nach n Halbwertszeiten (t = n ¬∑ T‚ÇÅ/‚ÇÇ):
  N = N‚ÇÄ ¬∑ (1/2)‚Åø
  n = 1  ‚Üí  N = N‚ÇÄ/2
  n = 2  ‚Üí  N = N‚ÇÄ/4
  n = 3  ‚Üí  N = N‚ÇÄ/8
  n = 4  ‚Üí  N = N‚ÇÄ/16
  ...

Allgemein:
  N(t) = N‚ÇÄ ¬∑ (1/2)^(t / T‚ÇÅ/‚ÇÇ)
          </pre>
          <div style="font-size:11px; opacity:0.8; margin-top:4px;">
            Merkhilfe: <b>Nicht die absolute Menge pro Zeit ist konstant, sondern der <i>Bruchteil</i>, der zerf√§llt.</b>
          </div>
        </div>
      `,
      detailBlocks: [
        {
          title: "Grundidee des radioaktiven Zerfalls",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Radioaktive Kerne sind instabil und k√∂nnen sich spontan in andere Kerne umwandeln. Der Zerfall einzelner Kerne ist zwar zuf√§llig,
              aber f√ºr eine gro√üe Anzahl von Kernen ergibt sich ein sehr regelm√§√üiges Verhalten: die Anzahl der noch vorhandenen Kerne nimmt
              exponentiell ab.</p>
              <p>Wichtig ist die Unterscheidung:</p>
              <ul>
                <li>Auf der Ebene <b>einzelner Kerne</b> ist der Zerfall zuf√§llig.</li>
                <li>Auf der Ebene von vielen Kernen folgt die Abnahme einer <b>glatten Exponentialfunktion</b>.</li>
              </ul>
              <p>Dieses Verhalten gilt nicht nur f√ºr die Anzahl der Kerne N, sondern auch f√ºr die Masse m der Probe oder f√ºr die Aktivit√§t A (Zerf√§lle pro Sekunde),
              weil alle Gr√∂√üen proportional zueinander sind.</p>
            </div>
          `
        },
        {
          title: "Halbwertszeit T‚ÇÅ/‚ÇÇ ‚Äì Definition & Bedeutung",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Die <b>Halbwertszeit</b> T‚ÇÅ/‚ÇÇ ist eine zentrale Gr√∂√üe beim radioaktiven Zerfall.</p>
              <p><b>Definition:</b> T‚ÇÅ/‚ÇÇ ist die Zeit, nach der die H√§lfte der urspr√ºnglichen Menge eines radioaktiven Stoffes zerfallen ist.</p>
              <p>Wenn die Anfangsmenge N‚ÇÄ (oder m‚ÇÄ) ist, gilt:</p>
              <ul>
                <li>nach 1 ¬∑ T‚ÇÅ/‚ÇÇ: N = N‚ÇÄ/2</li>
                <li>nach 2 ¬∑ T‚ÇÅ/‚ÇÇ: N = N‚ÇÄ/4</li>
                <li>nach 3 ¬∑ T‚ÇÅ/‚ÇÇ: N = N‚ÇÄ/8</li>
                <li>nach n ¬∑ T‚ÇÅ/‚ÇÇ: N = N‚ÇÄ ¬∑ (1/2)‚Åø</li>
              </ul>
              <p>Das gleiche Schema gilt f√ºr die Masse m(t) oder f√ºr die Aktivit√§t A(t). Nach jeder weiteren Halbwertszeit halbiert sich die noch vorhandene Menge erneut.</p>
            </div>
          `
        },
        {
          title: "Allgemeine Zerfallsformeln & Zerfallskonstante Œª",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Es gibt zwei gleichwertige mathematische Beschreibungen des Zerfalls:</p>
              <p><b>1) Darstellung mit der Halbwertszeit:</b></p>
              <p style="text-align:center; margin:6px 0;">
                <b>N(t) = N‚ÇÄ ¬∑ (1/2)<sup>t / T‚ÇÅ/‚ÇÇ</sup></b>
              </p>
              <p>Analog f√ºr Masse und Aktivit√§t:</p>
              <ul>
                <li>m(t) = m‚ÇÄ ¬∑ (1/2)<sup>t / T‚ÇÅ/‚ÇÇ</sup></li>
                <li>A(t) = A‚ÇÄ ¬∑ (1/2)<sup>t / T‚ÇÅ/‚ÇÇ</sup></li>
              </ul>
              <p><b>2) Darstellung mit der Zerfallskonstante Œª:</b></p>
              <p style="text-align:center; margin:6px 0;">
                <b>N(t) = N‚ÇÄ ¬∑ e<sup>‚àíŒª t</sup></b>
              </p>
              <p>Die Zerfallskonstante Œª (Einheit 1/s, 1/a, ...) beschreibt die Zerfallswahrscheinlichkeit pro Zeiteinheit. Beide Darstellungen sind √ºber</p>
              <p style="text-align:center; margin:6px 0;">
                <b>T‚ÇÅ/‚ÇÇ = ln(2) / Œª  &nbsp;&nbsp;‚Üî&nbsp;&nbsp;  Œª = ln(2) / T‚ÇÅ/‚ÇÇ</b>
              </p>
              <p>miteinander verkn√ºpft. In vielen Allgemeine-Chemie-Aufgaben reicht die Form mit der Halbwertszeit v√∂llig aus.</p>
            </div>
          `
        },
        {
          title: "Rezept 1: Restmenge nach gegebener Zeit t",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Typischer Aufgabentyp: <i>‚ÄûWie viel ist nach t Zeit noch √ºbrig?‚Äú</i></p>
              <p><b>Gegeben:</b> N‚ÇÄ oder m‚ÇÄ, Halbwertszeit T‚ÇÅ/‚ÇÇ, Zeit t.</p>
              <p><b>Gesucht:</b> Restmenge N(t) oder m(t).</p>
              <p><b>Vorgehen:</b></p>
              <ol>
                <li><b>Anzahl Halbwertszeiten</b> berechnen: n = t / T‚ÇÅ/‚ÇÇ (darf auch nicht ganzzahlig sein).</li>
                <li>Restanteil: (1/2)<sup>n</sup>.</li>
                <li>Restmenge: N(t) = N‚ÇÄ ¬∑ (1/2)<sup>t/T‚ÇÅ/‚ÇÇ</sup> oder m(t) = m‚ÇÄ ¬∑ (1/2)<sup>t/T‚ÇÅ/‚ÇÇ</sup>.</li>
              </ol>
              <p><b>Beispiel:</b> m‚ÇÄ = 80 g, T‚ÇÅ/‚ÇÇ = 10 Jahre, t = 25 Jahre.</p>
              <ul>
                <li>n = t/T‚ÇÅ/‚ÇÇ = 25/10 = 2,5.</li>
                <li>m(t) = 80 g ¬∑ (1/2)<sup>2,5</sup> = 80 g ¬∑ (1/2)¬≤ ¬∑ (1/2)<sup>0,5</sup> ‚âà 80 g ¬∑ 1/4 ¬∑ 1/‚àö2.</li>
              </ul>
              <p>In der Klausur ist vor allem wichtig, dass du die Formel richtig anwendest und mit dem Exponenten t/T‚ÇÅ/‚ÇÇ umgehen kannst. Wenn t ein Vielfaches von T‚ÇÅ/‚ÇÇ ist, wird es besonders einfach.</p>
            </div>
          `
        },
        {
          title: "Rezept 2: Zeit t aus gew√ºnschter Restmenge",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Hier lautet die typische Fragestellung: <i>‚ÄûNach welcher Zeit sind nur noch x % der Anfangsmenge √ºbrig?‚Äú</i></p>
              <p><b>Gegeben:</b> Halbwertszeit T‚ÇÅ/‚ÇÇ, Verh√§ltnis f = N(t)/N‚ÇÄ (z. B. 0,10 f√ºr 10 %).</p>
              <p><b>Gesucht:</b> t.</p>
              <p>Aus der Zerfallsformel</p>
              <p style="text-align:center; margin:6px 0;">
                <b>N(t)/N‚ÇÄ = (1/2)<sup>t/T‚ÇÅ/‚ÇÇ</sup></b>
              </p>
              <p>folgt nach Logarithmieren:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>t = T‚ÇÅ/‚ÇÇ ¬∑ ln(N(t)/N‚ÇÄ) / ln(1/2)</b>
              </p>
              <p><b>Beispiel:</b> Nach welcher Zeit sind nur noch 10 % √ºbrig, T‚ÇÅ/‚ÇÇ = 5 Jahre?</p>
              <ul>
                <li>f = N(t)/N‚ÇÄ = 0,10.</li>
                <li>t = 5 a ¬∑ ln(0,10) / ln(1/2).</li>
                <li>ln(0,10) ‚âà ‚àí2,3026, ln(1/2) ‚âà ‚àí0,6931.</li>
                <li>t ‚âà 5 a ¬∑ (‚àí2,3026 / ‚àí0,6931) ‚âà 5 a ¬∑ 3,32 ‚âà 16,6 Jahre.</li>
              </ul>
              <p>Intuitiv passt das: nach 3 Halbwertszeiten (15 Jahre) w√§ren 12,5 % √ºbrig, nach 4 (20 Jahre) 6,25 % ‚Üí 10 % liegt dazwischen.</p>
            </div>
          `
        },
        {
          title: "Dein Beispiel: 200 g ‚Üí 25 g mit T‚ÇÅ/‚ÇÇ = 4000 Jahren",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Das Beispiel aus deinen Notizen:</p>
              <p>Eine radioaktive Substanz hat am Anfang m‚ÇÄ = 200 g und eine Halbwertszeit von T‚ÇÅ/‚ÇÇ = 4000 Jahren. Wie viel Gramm sind nach 12 000 Jahren vorhanden?</p>
              <p><b>L√∂sungsweg √ºber Halbwertszeiten:</b></p>
              <ol>
                <li>Anzahl Halbwertszeiten: n = t / T‚ÇÅ/‚ÇÇ = 12 000 a / 4000 a = 3.</li>
                <li>Restanteil: (1/2)¬≥ = 1/8.</li>
                <li>Restmasse: m(t) = m‚ÇÄ ¬∑ (1/8) = 200 g ¬∑ 1/8 = 25 g.</li>
              </ol>
              <p>In Tabellenform:</p>
              <ul>
                <li>t = 0:   m = 200 g.</li>
                <li>t = 4000 a (1 ¬∑ T‚ÇÅ/‚ÇÇ): m = 100 g.</li>
                <li>t = 8000 a (2 ¬∑ T‚ÇÅ/‚ÇÇ): m = 50 g.</li>
                <li>t = 12 000 a (3 ¬∑ T‚ÇÅ/‚ÇÇ): m = 25 g.</li>
              </ul>
              <p>Das ist exakt das Schema, das oft in Klausuren abgefragt wird: man erkennt, dass die gesuchte Zeit ein ganzzahliges Vielfaches der Halbwertszeit ist und halbiert die Masse entsprechend oft.</p>
            </div>
          `
        },
        {
          title: "Aktivit√§t A(t) und Anzahl Halbwertszeiten",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Die <b>Aktivit√§t</b> A gibt die Anzahl der Zerf√§lle pro Zeit (z. B. in Bq = Zerf√§lle pro Sekunde) an. Da A proportional zur Anzahl der radioaktiven Kerne N ist, gilt f√ºr die Aktivit√§t das gleiche Zerfallsgesetz:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>A(t) = A‚ÇÄ ¬∑ (1/2)<sup>t/T‚ÇÅ/‚ÇÇ</sup></b>
              </p>
              <p>Typischer Aufgabentyp:</p>
              <p><i>‚ÄûDie Aktivit√§t einer Probe halbiert sich in 3 Tagen. Wie gro√ü ist die Aktivit√§t nach 9 Tagen, wenn sie anfangs 8000 Bq betr√§gt?‚Äú</i></p>
              <p><b>L√∂sung:</b></p>
              <ul>
                <li>T‚ÇÅ/‚ÇÇ = 3 Tage, t = 9 Tage ‚Üí n = t/T‚ÇÅ/‚ÇÇ = 3.</li>
                <li>A(t) = A‚ÇÄ ¬∑ (1/2)¬≥ = 8000 Bq ¬∑ 1/8 = 1000 Bq.</li>
              </ul>
              <p>In vielen F√§llen ist es am einfachsten, die Anzahl der Halbwertszeiten n (= t/T‚ÇÅ/‚ÇÇ) zu bestimmen und dann zu √ºberlegen, wie oft die Menge halbiert wird.</p>
            </div>
          `
        },
        {
          title: "Zusammenfassung & Klausurrezepte",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <ul>
                <li><b>Halbwertszeit T‚ÇÅ/‚ÇÇ:</b> Zeit, in der sich die vorhandene Menge halbiert.</li>
                <li><b>Exponentieller Zerfall:</b> N(t) = N‚ÇÄ ¬∑ (1/2)<sup>t/T‚ÇÅ/‚ÇÇ</sup>; analog f√ºr m(t) und A(t).</li>
                <li><b>Zerfallskonstante Œª:</b> N(t) = N‚ÇÄ ¬∑ e<sup>‚àíŒª t</sup>, mit T‚ÇÅ/‚ÇÇ = ln(2)/Œª.</li>
                <li><b>Rezept ‚ÄûRestmenge‚Äú:</b> t/T‚ÇÅ/‚ÇÇ berechnen ‚Üí (1/2)<sup>t/T‚ÇÅ/‚ÇÇ</sup> ‚Üí mit Anfangsmenge multiplizieren.</li>
                <li><b>Rezept ‚ÄûZeit aus Restquote‚Äú:</b> t = T‚ÇÅ/‚ÇÇ ¬∑ ln(N(t)/N‚ÇÄ) / ln(1/2).</li>
                <li><b>Besonders einfach:</b> wenn N(t)/N‚ÇÄ eine saubere Potenz von 1/2 ist (1/2, 1/4, 1/8, ...), n direkt ablesen.</li>
                <li><b>Achtung bei Einheiten:</b> T‚ÇÅ/‚ÇÇ und t m√ºssen in der gleichen Zeiteinheit eingesetzt werden (z. B. beide in Jahren oder beide in Sekunden).</li>
              </ul>
              <p style="margin-top:6px;">
                Wenn du diese Punkte im Kopf hast und sicher mit (1/2)<sup>t/T‚ÇÅ/‚ÇÇ</sup> umgehen kannst, bist du f√ºr alle Standardaufgaben zum radioaktiven Zerfall in der Allgemeinen Chemie sehr gut vorbereitet.
              </p>
            </div>
          `
        }
      ]
    },


    {
      id: "massendefekt-bindungsenergie",
      title: "Massendefekt, Bindungsenergie & E = mc¬≤",
      tags: ["Massendefekt", "Bindungsenergie", "E = mc¬≤", "Kernphysik", "Energieeinheiten"],
      goals: [
        "Verstehen, warum Atomkerne leichter sind als die Summe ihrer Nukleonen (Massendefekt).",
        "Die Einsteinsche Gleichung E = m¬∑c¬≤ auf radioaktive Prozesse anwenden k√∂nnen.",
        "Aus Massendefekt Œîm in u die Bindungsenergie eines Kerns in MeV berechnen k√∂nnen.",
        "Die Bindungsenergie pro Nukleon bestimmen und zur Stabilit√§tsabsch√§tzung nutzen k√∂nnen.",
        "Sicher zwischen den Einheiten u, MeV, eV und Joule umrechnen k√∂nnen."
      ],
      summary: `
        Beim Aufbau von Atomkernen wird Energie frei: die Masse des fertigen Kerns ist kleiner als die Summe der Massen seiner Protonen und Neutronen.
        Diese Massendifferenz nennt man Massendefekt Œîm. √úber die Einsteinsche Gleichung E = m¬∑c¬≤ entspricht der Massendefekt einer bestimmten Energie,
        der sogenannten Bindungsenergie. Sie ist ein Ma√ü daf√ºr, wie fest die Nukleonen im Kern gebunden sind. In der Kernphysik rechnet man dabei meist
        mit der atomaren Masseneinheit u und der Energieeinheit MeV. √úber die N√§herung 1 u¬∑c¬≤ ‚âà 931,5 MeV kann man Massendefekte in u direkt in MeV umrechnen.
        F√ºr viele Klausuraufgaben reicht es, aus dem Massendefekt die Bindungsenergie und die Bindungsenergie pro Nukleon zu bestimmen und einfache Umrechnungen
        zwischen MeV, eV und Joule durchzuf√ºhren.
      `,
      keyPoints: [
        "Massendefekt Œîm = Summe der Massen von Protonen und Neutronen minus gemessene Kernmasse.",
        "Die ‚Äûfehlende‚Äú Masse wurde bei der Kernbildung in Energie umgewandelt: E = Œîm ¬∑ c¬≤.",
        "Die Bindungsenergie ist die Energie, die frei wird (bzw. aufgebracht werden m√ºsste), wenn der Kern gebildet (bzw. wieder zerlegt) wird.",
        "1 u ‚âà 1,6605 ¬∑ 10^-27 kg und 1 u¬∑c¬≤ ‚âà 931,5 MeV ‚Äì sehr n√ºtzlich f√ºr Schnellrechnungen.",
        "Bindungsenergie pro Nukleon = E_Bindung / A ist ein Ma√ü f√ºr die Stabilit√§t des Kerns.",
        "1 eV = 1,602 ¬∑ 10^-19 J, 1 MeV = 10^6 eV ‚Üí MeV lassen sich einfach in Joule umrechnen."
      ],
      formulas: [
        "Œîm = (Z ¬∑ m_p + N ¬∑ m_n) ‚àí m_Kern",
        "E_Bindung = Œîm ¬∑ c¬≤",
        "E_Bindung[MeV] ‚âà Œîm[u] ¬∑ 931,5 MeV/u",
        "E_pro Nukleon = E_Bindung / A",
        "1 u ‚âà 1,6605 ¬∑ 10^-27 kg",
        "1 eV = 1,602 ¬∑ 10^-19 J",
        "1 MeV = 10^6 eV"
      ],
      visual: `
        <div class="learn-visual">
          <div style="font-size:12px; opacity:0.8; margin-bottom:6px;">
            Massendefekt & Bindungsenergie im √úberblick:
          </div>
          <pre style="font-size:11px; line-height:1.4; background:rgba(0,0,0,0.15); padding:8px; border-radius:6px;">
Massendefekt:
  Œîm = (Z ¬∑ m_p + N ¬∑ m_n) ‚àí m_Kern   (alle Massen in u)

Bindungsenergie:
  E_Bindung = Œîm ¬∑ c¬≤

Praktische Einheit:
  1 u ¬∑ c¬≤ ‚âà 931,5 MeV
  ‚áí E_Bindung[MeV] ‚âà Œîm[u] ¬∑ 931,5

Bindungsenergie pro Nukleon:
  E_pro Nukleon = E_Bindung / A

Einheiten:
  1 u ‚âà 1,6605 ¬∑ 10^-27 kg
  1 eV = 1,602 ¬∑ 10^-19 J
  1 MeV = 10^6 eV
          </pre>
          <div style="font-size:11px; opacity:0.8; margin-top:4px;">
            Merkhilfe: <b>‚ÄûEin bisschen Masse ‚Üí sehr viel Energie‚Äú, weil c¬≤ riesig ist.</b>
          </div>
        </div>
      `,
      detailBlocks: [
        {
          title: "Was ist der Massendefekt?",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Wenn du die Masse eines Atomkerns misst und mit der Summe der Massen seiner Bausteine vergleichst, stellst du fest:
              der Kern ist leichter als die Summe aus Protonen und Neutronen. Diese Differenz nennt man <b>Massendefekt</b> Œîm.</p>
              <p>F√ºr einen Kern mit Z Protonen und N Neutronen gilt:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>Œîm = (Z ¬∑ m_p + N ¬∑ m_n) ‚àí m_Kern</b>
              </p>
              <ul>
                <li>Z = Protonenzahl (Ordnungszahl)</li>
                <li>N = Neutronenzahl</li>
                <li>m_p, m_n = Massen von Proton und Neutron (z. B. in u)</li>
                <li>m_Kern = gemessene Masse des fertigen Kerns</li>
              </ul>
              <p>Œîm ist in der Regel positiv, d. h. die Summe der Einzelmassen ist gr√∂√üer als die Kernmasse. Die ‚Äûfehlende‚Äú Masse ist nicht verschwunden,
              sondern wurde in Bindungsenergie umgewandelt.</p>
            </div>
          `
        },
        {
          title: "E = mc¬≤ und Bindungsenergie",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Die Einsteinsche Gleichung verkn√ºpft Masse und Energie:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>E = m ¬∑ c¬≤</b>
              </p>
              <p>Daraus folgt: jede Masse m entspricht einer Energie E. Bei Kernprozessen bedeutet das:</p>
              <ul>
                <li>Wenn bei der Kernbildung eine Masse Œîm ‚Äûverschwindet‚Äú, wurde eine Energie <b>E_Bindung = Œîm ¬∑ c¬≤</b> frei.</li>
                <li>Umgekehrt m√ºsstest du genau diese Energie zuf√ºhren, um den Kern wieder in seine Nukleonen zu zerlegen.</li>
              </ul>
              <p>Man nennt E_Bindung die <b>Bindungsenergie</b> des Kerns. Sie beschreibt, wie fest die Nukleonen aneinander gebunden sind.</p>
            </div>
          `
        },
        {
          title: "Einheiten: u, MeV, eV und Joule",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>In der Kernphysik werden Massen oft in der <b>atomaren Masseneinheit</b> u angegeben:</p>
              <ul>
                <li>1 u ‚âà 1,6605 ¬∑ 10‚Åª¬≤‚Å∑ kg</li>
                <li>Masse eines Protons ‚âà 1,007 u, eines Neutrons ‚âà 1,009 u (typische Gr√∂√üenordnung).</li>
              </ul>
              <p>F√ºr Energien ist statt Joule oft das <b>Elektronenvolt</b> praktisch:</p>
              <ul>
                <li>1 eV = 1,602 ¬∑ 10‚Åª¬π‚Åπ J</li>
                <li>1 MeV = 10‚Å∂ eV</li>
              </ul>
              <p>Wichtiger Zusammenhang f√ºr schnelle Bindungsenergieberechnungen:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>1 u ¬∑ c¬≤ ‚âà 931,5 MeV</b>
              </p>
              <p>Wenn der Massendefekt Œîm in u gegeben ist, kannst du die Bindungsenergie direkt berechnen:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>E_Bindung[MeV] ‚âà Œîm[u] ¬∑ 931,5</b>
              </p>
              <p>F√ºr Joule gilt dann:</p>
              <p style="text-align:center; margin:6px 0;">
                <b>E[J] = E[MeV] ¬∑ 10‚Å∂ ¬∑ 1,602 ¬∑ 10‚Åª¬π‚Åπ</b>
              </p>
            </div>
          `
        },
        {
          title: "Rezept: Bindungsenergie aus Massendefekt",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Typischer Klausuraufgabentyp: <i>‚ÄûBerechnen Sie aus den Massendaten die Bindungsenergie eines Kerns.‚Äú</i></p>
              <p><b>Vorgehen:</b></p>
              <ol>
                <li><b>Z und N bestimmen</b> (Protonen- und Neutronenzahl) aus Ordnungszahl Z und Massenzahl A (A = Z + N).</li>
                <li><b>Summe der Einzelmassen</b> rechnen:
                  <br>Z ¬∑ m_p + N ¬∑ m_n (alle Massen in der gleichen Einheit, meist in u).</li>
                <li><b>Massendefekt</b> bestimmen:
                  <br>Œîm = (Z ¬∑ m_p + N ¬∑ m_n) ‚àí m_Kern.</li>
                <li><b>Bindungsenergie in MeV</b> berechnen:
                  <br>E_Bindung[MeV] ‚âà Œîm[u] ¬∑ 931,5.</li>
                <li>Optional: <b>Bindungsenergie pro Nukleon</b>:
                  <br>E_pro Nukleon = E_Bindung / A.</li>
              </ol>
            </div>
          `
        },
        {
          title: "Beispiel 1: Fiktiver Kern mit Z = 2, N = 2",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Gegeben:</p>
              <ul>
                <li>Z = 2, N = 2 (A = 4).</li>
                <li>m_p = 1,007 u, m_n = 1,009 u.</li>
                <li>m_Kern = 4,001 u.</li>
              </ul>
              <p><b>1) Summe der Einzelmassen:</b></p>
              <p>m_Summe = 2 ¬∑ 1,007 u + 2 ¬∑ 1,009 u = 4,032 u.</p>
              <p><b>2) Massendefekt:</b></p>
              <p>Œîm = m_Summe ‚àí m_Kern = 4,032 u ‚àí 4,001 u = 0,031 u.</p>
              <p><b>3) Bindungsenergie:</b></p>
              <p>E_Bindung ‚âà 0,031 ¬∑ 931,5 MeV ‚âà 28,9 MeV.</p>
              <p><b>4) Bindungsenergie pro Nukleon:</b></p>
              <p>E_pro Nukleon = 28,9 MeV / 4 ‚âà 7,2 MeV/Nukleon.</p>
              <p>Die Gr√∂√üe von 7‚Äì8 MeV/Nukleon ist typisch f√ºr gut gebundene, stabile Kerne.</p>
            </div>
          `
        },
        {
          title: "Beispiel 2: Œîm in u ‚Üí MeV und Joule",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Gegeben: Œîm = 0,20 u.</p>
              <p><b>1) Œîm ‚Üí MeV:</b></p>
              <p>E_Bindung ‚âà 0,20 ¬∑ 931,5 MeV ‚âà 186,3 MeV.</p>
              <p><b>2) MeV ‚Üí Joule:</b></p>
              <ul>
                <li>1 MeV = 10‚Å∂ eV, 1 eV = 1,602 ¬∑ 10‚Åª¬π‚Åπ J.</li>
                <li>E[J] = 186,3 ¬∑ 10‚Å∂ ¬∑ 1,602 ¬∑ 10‚Åª¬π‚Åπ ‚âà 2,99 ¬∑ 10‚Åª¬π¬π J.</li>
              </ul>
              <p>Man sieht: in Joule wirkt die Zahl ‚Äûklein‚Äú, in MeV aber ist es eine typische Bindungsenergie im Nuklearbereich.</p>
            </div>
          `
        },
        {
          title: "Beispiel 3: Welcher Kern ist stabiler?",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Gegeben:</p>
              <ul>
                <li>Kern A: E_Bindung = 400 MeV, A = 50.</li>
                <li>Kern B: E_Bindung = 700 MeV, A = 100.</li>
              </ul>
              <p><b>Bindungsenergie pro Nukleon:</b></p>
              <p>A: E_pro Nukleon = 400 / 50 = 8,0 MeV/Nukleon.</p>
              <p>B: E_pro Nukleon = 700 / 100 = 7,0 MeV/Nukleon.</p>
              <p><b>Interpretation:</b></p>
              <p>Je gr√∂√üer die Bindungsenergie pro Nukleon, desto ‚Äûst√§rker gebunden‚Äú ist der Kern. Im Vergleich ist Kern A stabiler als Kern B,
              obwohl B insgesamt eine gr√∂√üere absolute Bindungsenergie hat. F√ºr Stabilit√§tsvergleiche z√§hlt die Energie pro Nukleon.</p>
            </div>
          `
        },
        {
          title: "Zusammenfassung & Klausurhinweise",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <ul>
                <li><b>Massendefekt Œîm</b> entsteht, weil der Kern leichter ist als die Summe der Massen seiner Nukleonen.</li>
                <li><b>Bindungsenergie</b> ist die Energie, die diesem Massendefekt entspricht: E_Bindung = Œîm ¬∑ c¬≤.</li>
                <li>Praktisch rechnet man mit Massen in u und Energien in MeV: 1 u¬∑c¬≤ ‚âà 931,5 MeV.</li>
                <li><b>Rezept:</b> Œîm in u ‚Üí E_Bindung[MeV] = Œîm ¬∑ 931,5 ‚Üí ggf. E_pro Nukleon = E_Bindung / A.</li>
                <li>F√ºr Umrechnungen: 1 MeV = 10‚Å∂ eV, 1 eV = 1,602 ¬∑ 10‚Åª¬π‚Åπ J.</li>
                <li>Bei Stabilit√§tsvergleichen ist die Bindungsenergie pro Nukleon entscheidend, nicht die absolute Gesamtenergie.</li>
              </ul>
              <p style="margin-top:6px;">
                Wenn du sicher mit Massendefekt in u, der Umrechnung zu MeV und der Bindungsenergie pro Nukleon umgehen kannst,
                bist du f√ºr alle Standardaufgaben zu Massendefekt und E = mc¬≤ sehr gut vorbereitet.
              </p>
            </div>
          `
        }
      ]
    },

    {
      id: "volt-ampere-watt-energieeinheiten",
      title: "Volt, Ampere, Watt & Energieeinheiten (J, eV)",
      tags: ["Volt", "Ampere", "Watt", "Joule", "eV", "Leistung", "Energie"],
      goals: [
        "Die physikalischen Gr√∂√üen Ladung, Stromst√§rke, Spannung, Leistung und Energie sicher unterscheiden k√∂nnen.",
        "Die Grundformeln I = Q/t, U = E/Q, P = U¬∑I und E = P¬∑t anwenden k√∂nnen.",
        "Den Zusammenhang zwischen Volt, Ampere und Watt (P = U¬∑I) verstehen und nutzen k√∂nnen.",
        "Elektronenvolt (eV) als Energieeinheit verstehen und zwischen Joule und eV umrechnen k√∂nnen.",
        "Typische Dreisatz-/Rechenaufgaben zu Strom, Spannung, Leistung und Energie schrittweise l√∂sen k√∂nnen."
      ],
      summary: `
        In diesem Thema verbindest du die wichtigsten elektrischen Grundgr√∂√üen mit den Energieeinheiten, die in der Atom- und Kernphysik verwendet werden.
        Stromst√§rke (Ampere), Spannung (Volt) und Leistung (Watt) beschreiben, wie viel Ladung pro Zeit flie√üt, welche Energie pro Ladung zur Verf√ºgung steht
        und wie schnell Energie umgesetzt wird. √úber die Formeln P = U¬∑I und E = P¬∑t (bzw. E = U¬∑I¬∑t oder E = U¬∑Q) kannst du Leistungen und Energien in technischen
        oder physikalischen Aufgaben berechnen. Das Elektronenvolt (eV) ist eine sehr praktische Energieeinheit auf atomarer Ebene und l√§sst sich direkt √ºber
        Spannung (E = e¬∑U) bzw. √ºber 1 eV = 1,602 ¬∑ 10^-19 J mit Joule verkn√ºpfen. In Klausuren tauchen h√§ufig einfache, aber verkettete Rechenaufgaben auf,
        bei denen du sauber mit Einheiten und Dreisatz umgehen musst.
      `,
      keyPoints: [
        "Ladung Q (C), Stromst√§rke I (A), Spannung U (V), Leistung P (W) und Energie E (J) sind eng verkn√ºpfte Gr√∂√üen.",
        "Stromst√§rke: I = Q/t ‚Äì wie viel Ladung pro Zeit flie√üt.",
        "Spannung: U = E/Q ‚Äì wie viel Energie pro Ladung zur Verf√ºgung steht.",
        "Leistung: P = U¬∑I ‚Äì Ampere mal Volt ist Watt.",
        "Energie: E = P¬∑t = U¬∑I¬∑t oder E = U¬∑Q.",
        "1 eV ist die Energie, die ein Elektron beim Durchlaufen von 1 Volt gewinnt: 1 eV = 1,602 ¬∑ 10^-19 J.",
        "Spannung in Volt direkt in eV: ein Elektron an U Volt gewinnt U eV Energie."
      ],
      formulas: [
        "I = Q / t",
        "U = E / Q",
        "E = U ¬∑ Q",
        "P = U ¬∑ I",
        "E = P ¬∑ t",
        "E = U ¬∑ I ¬∑ t",
        "1 eV = 1,602 ¬∑ 10^-19 J",
        "E_eV = E_J / (1,602 ¬∑ 10^-19)",
        "E_J = E_eV ¬∑ 1,602 ¬∑ 10^-19"
      ],
      visual: `
        <div class="learn-visual">
          <div style="font-size:12px; opacity:0.8; margin-bottom:6px;">
            √úbersicht √ºber die wichtigsten elektrischen Gr√∂√üen:
          </div>
          <pre style="font-size:11px; line-height:1.4; background:rgba(0,0,0,0.15); padding:8px; border-radius:6px;">
Ladung:           Q [C]          (Coulomb)
Stromst√§rke:      I [A]          I = Q / t
Spannung:         U [V]          U = E / Q
Leistung:         P [W]          P = U ¬∑ I
Energie:          E [J]          E = P ¬∑ t = U ¬∑ I ¬∑ t

Elektronenvolt:
  1 eV = 1,602 ¬∑ 10^-19 J
  1 MeV = 10^6 eV

Elektron an Spannung U:
  E = e ¬∑ U    (in Joule)
  ‚Üí f√ºr ein Elektron: U Volt ‚âô U eV
          </pre>
          <div style="font-size:11px; opacity:0.8; margin-top:4px;">
            Merkhilfe: <b>Ampere √ó Volt = Watt</b> und <b>Volt √ó Coulomb = Joule</b>.
          </div>
        </div>
      `,
      detailBlocks: [
        {
          title: "Grundgr√∂√üen: Q, I, U, P und E",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Die wichtigsten Gr√∂√üen in einfachen Elektro- und Energieaufgaben sind:</p>
              <ul>
                <li><b>Ladung Q</b> in Coulomb (C): beschreibt, wie viel elektrische Ladung vorhanden ist.</li>
                <li><b>Stromst√§rke I</b> in Ampere (A): wie viel Ladung pro Zeit durch einen Leiter flie√üt.</li>
                <li><b>Spannung U</b> in Volt (V): Energie pro Ladungseinheit, die im Stromkreis ‚Äûzur Verf√ºgung‚Äú steht.</li>
                <li><b>Leistung P</b> in Watt (W): wie viel Energie pro Zeit umgesetzt wird.</li>
                <li><b>Energie E</b> in Joule (J): die gesamte umgesetzte oder √ºbertragene Energie.</li>
              </ul>
              <p>Zwischen diesen Gr√∂√üen gibt es einfache, aber sehr wichtige Beziehungen, die in vielen Aufgaben immer wieder vorkommen.</p>
            </div>
          `
        },
        {
          title: "Stromst√§rke & Spannung: I = Q/t, U = E/Q",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p><b>Stromst√§rke I</b> beschreibt, wie viel Ladung pro Zeit flie√üt:</p>
              <p style="text-align:center; margin:6px 0;"><b>I = Q / t</b></p>
              <ul>
                <li>I in Ampere (A)</li>
                <li>Q in Coulomb (C)</li>
                <li>t in Sekunden (s)</li>
              </ul>
              <p><b>Spannung U</b> ist definiert als Energie pro Ladung:</p>
              <p style="text-align:center; margin:6px 0;"><b>U = E / Q</b></p>
              <p>Umgestellt ergibt das:</p>
              <p style="text-align:center; margin:6px 0;"><b>E = U ¬∑ Q</b></p>
              <p>Damit kannst du aus einer gegebenen Spannung U und einer transportierten Ladung Q direkt die √ºbertragene Energie E berechnen.</p>
            </div>
          `
        },
        {
          title: "Leistung: Ampere √ó Volt ist Watt (P = U¬∑I)",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Die <b>Leistung</b> P gibt an, wie schnell Energie umgesetzt wird (Energie pro Zeit):</p>
              <p style="text-align:center; margin:6px 0;"><b>P = E / t</b></p>
              <p>In elektrischen Systemen kann man P √ºber Spannung und Strom ausdr√ºcken:</p>
              <p style="text-align:center; margin:6px 0;"><b>P = U ¬∑ I</b></p>
              <ul>
                <li>P in Watt (W)</li>
                <li>U in Volt (V)</li>
                <li>I in Ampere (A)</li>
              </ul>
              <p>Damit ergibt sich f√ºr die Energie:</p>
              <p style="text-align:center; margin:6px 0;"><b>E = P ¬∑ t = U ¬∑ I ¬∑ t</b></p>
              <p>Das ist die mathematische Version von:<br><b>‚ÄûAmpere mal Volt ist Watt‚Äú</b> und ‚ÄûWatt mal Zeit ist Joule‚Äú.</p>
            </div>
          `
        },
        {
          title: "Elektronenvolt (eV) & Zusammenhang mit Spannung",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p>Das <b>Elektronenvolt (eV)</b> ist eine Energieeinheit, die vor allem in der Atom- und Kernphysik verwendet wird.</p>
              <p><b>Definition:</b> 1 eV ist die Energie, die ein Elektron gewinnt, wenn es √ºber eine Spannung von 1 V beschleunigt wird.</p>
              <p>Formel dahinter:</p>
              <p style="text-align:center; margin:6px 0;"><b>E = e ¬∑ U</b></p>
              <ul>
                <li>e = 1,602 ¬∑ 10^-19 C (Elementarladung)</li>
                <li>U in Volt</li>
                <li>E in Joule</li>
              </ul>
              <p>F√ºr ein Elektron gilt damit ganz einfach:</p>
              <ul>
                <li>1 V ‚Üí 1 eV</li>
                <li>10 V ‚Üí 10 eV</li>
                <li>120 V ‚Üí 120 eV</li>
              </ul>
              <p>Die Umrechnung zu Joule:</p>
              <p style="text-align:center; margin:6px 0;"><b>1 eV = 1,602 ¬∑ 10^-19 J</b></p>
            </div>
          `
        },
        {
          title: "Energieeinheiten: Joule ‚Üî eV (und MeV)",
          content: `
            <div style="font-size:13px; line-height:1.5%;">
              <p>F√ºr viele Rechnungen brauchst du die Umrechnung zwischen Joule und eV:</p>
              <ul>
                <li>1 eV = 1,602 ¬∑ 10^-19 J</li>
                <li>1 MeV = 10^6 eV</li>
              </ul>
              <p>Daraus folgen die Rechenformeln:</p>
              <ul>
                <li><b>eV ‚Üí Joule:</b> E_J = E_eV ¬∑ 1,602 ¬∑ 10^-19</li>
                <li><b>Joule ‚Üí eV:</b> E_eV = E_J / (1,602 ¬∑ 10^-19)</li>
              </ul>
              <p>Typische Gr√∂√üenordnungen:</p>
              <ul>
                <li>Atomare √úberg√§nge: einige eV bis wenige 10 eV.</li>
                <li>Kernphysik: MeV-Bereich (Millionen eV).</li>
              </ul>
            </div>
          `
        },
        {
          title: "Klausurbeispiele Schritt f√ºr Schritt",
          content: `
            <div style="font-size:13px; line-height:1.5;">
              <p><b>Beispiel 1: P = U¬∑I ‚Üí Ampere √ó Volt = Watt</b></p>
              <p>Gegeben: U = 12 V, I = 0,50 A.</p>
              <ol>
                <li>Leistung: P = U¬∑I = 12 V ¬∑ 0,50 A = 6 W.</li>
                <li>Energie in 3 min (180 s): E = P¬∑t = 6 W ¬∑ 180 s = 1080 J.</li>
              </ol>

              <p><b>Beispiel 2: Energie aus Spannung & Ladung</b></p>
              <p>Gegeben: U = 5,0 V, Q = 10,0 C.</p>
              <ol>
                <li>E = U¬∑Q = 5,0 V ¬∑ 10,0 C = 50 J.</li>
              </ol>

              <p><b>Beispiel 3: Elektron an U = 120 V</b></p>
              <p>Gegeben: Elektron, U = 120 V.</p>
              <ol>
                <li>Energie in eV: E = 120 eV.</li>
                <li>Energie in Joule: E_J = 120 ¬∑ 1,602 ¬∑ 10^-19 J ‚âà 1,92 ¬∑ 10^-17 J.</li>
              </ol>

              <p><b>Beispiel 4: Stromst√§rke aus Leistung und Spannung</b></p>
              <p>Gegeben: P = 60 W, U = 12 V.</p>
              <ol>
                <li>Aus P = U¬∑I folgt I = P/U = 60 W / 12 V = 5 A.</li>
              </ol>

              <p><b>Beispiel 5: eV ‚Üî Joule</b></p>
              <p>Gegeben: E = 3,0 eV.</p>
              <ol>
                <li>In Joule: E_J = 3,0 ¬∑ 1,602 ¬∑ 10^-19 J ‚âà 4,81 ¬∑ 10^-19 J.</li>
              </ol>
              <p>Gegeben: E = 1,0 ¬∑ 10^-18 J.</p>
              <ol>
                <li>In eV: E_eV = (1,0 ¬∑ 10^-18 J) / (1,602 ¬∑ 10^-19 J/eV) ‚âà 6,24 eV.</li>
              </ol>

              <p style="margin-top:6px;">
                In all diesen Aufgaben ist das Wichtigste, dass du die richtige Grundformel erkennst (I = Q/t, U = E/Q, P = U¬∑I, E = P¬∑t)
                und konsequent mit den Einheiten arbeitest. Der Rest ist sauberer Dreisatz.
              </p>
            </div>
          `
        }
      ]
    }





  ] // schlie√üt topics-Array
} // schlie√üt Subject "Allgemeine Chemie"
] // schlie√üt subjects-Array
}; // schlie√üt learnData


    // ---------- DATENMODELL ----------
    
let data = {
  theme: "dark",
  syncId: null,
  notebooks: [],
  activeNotebookId: null,
  activePageId: null,
  cards: { decks: [] },
  planner: { exams: [], focusSessions: [] },
  formulas: [],
  tasks: [],
  brain: { entries: [] },
  templateScale: "medium"   // üëà NEU: Rastergr√∂√üe (small / medium / large)
};


    const STORAGE_KEY = "uniHyperNotes_v3";

    // ---------- COMMON DOM ----------
    const tabButtons = document.querySelectorAll(".tab-btn");
    const sections = {
      notes: document.getElementById("notesLayout"),
      cards: document.getElementById("cardsSection"),
      planner: document.getElementById("plannerSection"),
      formulas: document.getElementById("formulasSection"),
      tools: document.getElementById("toolsSection"),
      learn: document.getElementById("learnSection"),
      tasks: document.getElementById("tasksSection"),
      brain: document.getElementById("brainSection"),
      stats: document.getElementById("statsSection")
    };

    const darkModeBtn = document.getElementById("darkModeBtn");
    const exportJsonBtn = document.getElementById("exportJsonBtn");
    const importJsonBtn = document.getElementById("importJsonBtn");
    const importJsonInput = document.getElementById("importJsonInput");

    // ---------- NOTIZEN / CANVAS ----------
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const notebookSelect = document.getElementById("notebookSelect");
    const addNotebookBtn = document.getElementById("addNotebookBtn");

// iPad/Safari: eigenes Scroll-/Zoom-Verhalten abschalten
canvas.style.touchAction = "none";


// --- Zoom & Pan (Basis, auch wenn wir noch kein Pinch nutzen) ---
let zoom = 1;
let panX = 0;
let panY = 0;

let isPinching = false;
let lastPinchDist = 0;
let lastPinchCenter = null;


    const addPageBtn = document.getElementById("addPageBtn");
    const pageList = document.getElementById("pageList");
    const templateSelect = document.getElementById("templateSelect");
    const templateSizeSelect = document.getElementById("templateSizeSelect"); // üëà NEU

// Pencil-Zeichnen √ºber Pointer Events


    const colorPicker = document.getElementById("colorPicker");
    const toolButtons = document.querySelectorAll(".tool-btn");
    const strokeButtons = document.querySelectorAll(".stroke-btn");
    const undoBtn = document.getElementById("undoBtn");
    const redoBtn = document.getElementById("redoBtn");
    const clearBtn = document.getElementById("clearBtn");
    const exportPageBtn = document.getElementById("exportPageBtn");

    let currentTool = "pen"; // pen | highlighter | eraser | line | rect | circle
    let currentColor = colorPicker.value;
    let currentWidth = 2;
    let drawing = false;
    let currentStroke = null;
    let lastPos = { x: 0, y: 0 };
    let undoStack = [];
    let redoStack = [];
    let shapeStartPos = null;

    function getActiveNotebook() {
      return data.notebooks.find(nb => nb.id === data.activeNotebookId);
    }

    function getActivePage() {
      const nb = getActiveNotebook();
      if (!nb) return null;
      return nb.pages.find(p => p.id === data.activePageId);
    }

    // ---------- Storage & Theme ----------
    function saveData() {
  // Lokal speichern (wie bisher)
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));

  // Versuchen, in die Cloud zu syncen (non-blocking)
  syncToCloud();
}

// ---- Cloud-Sync: Hochladen ----
async function syncToCloud() {
  try {
    const id = askForSyncId();  // sorgt daf√ºr, dass wir eine Sync-ID haben
    if (!id) return;

    updateSyncStatus("Synchronisiere mit Cloud ‚Ä¶");

    const ref = doc(db, "syncProfiles", id);
    await setDoc(ref, {
      data,
      updatedAt: Date.now()
    });

    updateSyncStatus("Mit Cloud synchronisiert ‚úî");
  } catch (err) {
    console.error("Cloud-Sync fehlgeschlagen:", err);
    updateSyncStatus("Fehler beim Cloud-Sync (lokal ist alles sicher).");
  }
}


    function loadData() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) {
        const defaultNotebook = {
          id: "nb-" + Date.now(),
          name: "Standard",
          pages: [
            { id: "p-" + Date.now(), name: "Seite 1", template: "blank", strokes: [] }
          ]
        };
        data.notebooks = [defaultNotebook];
        data.activeNotebookId = defaultNotebook.id;
        data.activePageId = defaultNotebook.pages[0].id;
        data.theme = "dark";
        data.cards = { decks: [] };
        data.planner = { exams: [], focusSessions: [] };
        data.formulas = [];
        data.tasks = [];
        data.brain = { entries: [] };
        data.templateScale = "medium";
        return;
      }
      try {
        data = JSON.parse(raw);
        if (!data.templateScale) data.templateScale = "medium"; // üëà falls altes Backup
      } catch (e) {
        console.error("Fehler beim Laden, initialisiere neu", e);
        localStorage.removeItem(STORAGE_KEY);
        loadData();
      }
    }

// ---- Cloud-Sync: Herunterladen ----
async function syncFromCloud() {
  try {
    const id = askForSyncId();
    if (!id) return;

    updateSyncStatus("Lade Daten aus der Cloud ‚Ä¶");

    const ref = doc(db, "syncProfiles", id);
    const snap = await getDoc(ref);

    if (!snap.exists()) {
      updateSyncStatus("Noch keine Cloud-Daten f√ºr diese Sync-ID ‚Äì lokale Daten bleiben.");
      return;
    }

    const cloud = snap.data();
    if (cloud && cloud.data) {
  data = cloud.data;
  localStorage.setItem(STORAGE_KEY, JSON.stringify(data));

  // Alles neu rendern, damit du es siehst
  applyTheme();
  renderNotebookSelect();
  resizeCanvas();
  renderPageList();
  redrawActivePage();

  renderDecks();
  renderExams();
  renderFormulas();
  renderTasks();
  renderBrainHistory();
  renderStats();
  renderToolInputs();
  renderLearnSubjects();
  renderLearnTopics();
  renderLearnContent();

  updateSyncStatus("Cloud-Daten geladen ‚úî");
}
 else {
      updateSyncStatus("Cloud-Dokument leer ‚Äì keine √Ñnderung.");
    }
  } catch (err) {
    console.error("Cloud-Download fehlgeschlagen:", err);
    updateSyncStatus("Fehler beim Laden aus der Cloud.");
  }
}

    function applyTheme() {
      if (data.theme === "light") {
        document.body.classList.add("light");
      } else {
        document.body.classList.remove("light");
      }
    }

    function toggleTheme() {
      data.theme = data.theme === "dark" ? "light" : "dark";
      applyTheme();
      saveData();
    }

    darkModeBtn.addEventListener("click", toggleTheme);

    // ---------- Tabs ----------
    tabButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        tabButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        const tab = btn.getAttribute("data-tab");
        Object.keys(sections).forEach(k => {
          if (k === "notes") {
            sections[k].classList.toggle("active", tab === "notes");
            sections[k].style.display = tab === "notes" ? "flex" : "none";
          } else {
            sections[k].classList.toggle("active", k === tab);
          }
        });
        if (tab === "stats") renderStats();
      });
    });

    // ---------- Notebooks & Seiten ----------
    function renderNotebookSelect() {
      notebookSelect.innerHTML = "";
      data.notebooks.forEach(nb => {
        const opt = document.createElement("option");
        opt.value = nb.id;
        opt.textContent = nb.name;
        if (nb.id === data.activeNotebookId) opt.selected = true;
        notebookSelect.appendChild(opt);
      });
    }

    function switchNotebook(id) {
      if (id === data.activeNotebookId) return;
      data.activeNotebookId = id;
      const nb = getActiveNotebook();
      if (!nb) return;
      data.activePageId = nb.pages[0]?.id || null;
      undoStack = [];
      redoStack = [];
      renderNotebookSelect();
      renderPageList();
      redrawActivePage();
      saveData();
    }

    function addNotebook() {
      const name = prompt("Name f√ºr das neue Notizbuch:", "Neues Notizbuch");
      if (!name) return;
      const nb = {
        id: "nb-" + Date.now(),
        name,
        pages: [{ id: "p-" + Date.now(), name: "Seite 1", template: "blank", strokes: [] }]
      };
      data.notebooks.push(nb);
      data.activeNotebookId = nb.id;
      data.activePageId = nb.pages[0].id;
      undoStack = [];
      redoStack = [];
      renderNotebookSelect();
      renderPageList();
      redrawActivePage();
      saveData();
    }

    function renderPageList() {
      const nb = getActiveNotebook();
      pageList.innerHTML = "";
      if (!nb) return;
      nb.pages.forEach((page, index) => {
        const div = document.createElement("div");
        div.className = "page-thumb" + (page.id === data.activePageId ? " active" : "");
        div.textContent = page.name;
        const idx = document.createElement("span");
        idx.className = "index";
        idx.textContent = index + 1;
        div.appendChild(idx);
        div.addEventListener("click", () => {
          if (page.id === data.activePageId) return;
          data.activePageId = page.id;
          undoStack = [];
          redoStack = [];
          renderPageList();
          redrawActivePage();
          saveData();
        });
        pageList.appendChild(div);
      });
      const activePage = getActivePage();
      if (activePage) templateSelect.value = activePage.template || "blank";
    }

    function addPage() {
      const nb = getActiveNotebook();
      if (!nb) return;
      const page = {
        id: "p-" + Date.now(),
        name: "Seite " + (nb.pages.length + 1),
        template: templateSelect.value || "blank",
        strokes: []
      };
      nb.pages.push(page);
      data.activePageId = page.id;
      undoStack = [];
      redoStack = [];
      renderPageList();
      redrawActivePage();
      saveData();
    }

    function setPageTemplate(template) {
      const page = getActivePage();
      if (!page) return;
      page.template = template;
      redrawActivePage();
      saveData();
    }


    function resizeCanvas() {
  const isLandscape = window.innerWidth > window.innerHeight; // üëà NEU
  const margin = isLandscape ? 10 : 20;

  const wrapper = document.getElementById("canvasWrapper");
  const w = wrapper.clientWidth - margin * 2;
  const h = wrapper.clientHeight - margin * 2 - 40;

  const aspect = 1 / 1.414; // A4
  let cw = w, ch = w / aspect;
  if (ch > h) {
    ch = h;
    cw = h * aspect;
  }

  const page = getActivePage();
  const oldStrokes = page ? JSON.parse(JSON.stringify(page.strokes)) : null;
  const tmpl = page ? page.template : "blank";

  canvas.width = cw;
  canvas.height = ch;

// Zoom & Pan beim Resize zur√ºcksetzen (optional)
zoom = 1;
panX = 0;
panY = 0;


  if (page && oldStrokes) {
    page.strokes = oldStrokes;
    page.template = tmpl;
  }
  redrawActivePage();
}


    window.addEventListener("resize", resizeCanvas);

function getTemplateSpacing() {
  const base = 32; // deine bisherige Standardgr√∂√üe

  switch (data.templateScale) {
    case "small":
      return base * 0.6;   // ca. 19 px ‚Äì fein wie GoodNotes
    case "large":
      return base * 1.3;   // ca. 42 px ‚Äì gro√üe K√§stchen
    case "medium":
    default:
      return base;         // Standard
  }
}


    function drawTemplate(template) {
  const w = canvas.width, h = canvas.height;
  const spacing = getTemplateSpacing();    // üëà NEU

  ctx.save();
  ctx.globalAlpha = 0.15;
  ctx.strokeStyle = "#7a7a7a";
  ctx.lineWidth = 1;

  if (template === "lined") {
    const lineSpacing = spacing;
    for (let y = lineSpacing; y < h; y += lineSpacing) {
      ctx.beginPath();
      ctx.moveTo(0, y + 0.5);
      ctx.lineTo(w, y + 0.5);
      ctx.stroke();
    }

  } else if (template === "dotted") {
    for (let y = spacing; y < h; y += spacing) {
      for (let x = spacing; x < w; x += spacing) {
        ctx.beginPath();
        ctx.arc(x, y, 1, 0, Math.PI * 2);
        ctx.fillStyle = "#7a7a7a";
        ctx.fill();
      }
    }

  } else if (template === "grid") {
    for (let y = spacing; y < h; y += spacing) {
      ctx.beginPath();
      ctx.moveTo(0, y + 0.5);
      ctx.lineTo(w, y + 0.5);
      ctx.stroke();
    }
    for (let x = spacing; x < w; x += spacing) {
      ctx.beginPath();
      ctx.moveTo(x + 0.5, 0);
      ctx.lineTo(x + 0.5, h);
      ctx.stroke();
    }
  }

  ctx.restore();
}



function redrawActivePage() {
  const page = getActivePage();
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  if (!page) return;

  // 1. Erst alle Strokes zeichnen (Stift, Marker, Radierer)
  page.strokes.forEach(stroke => {
    ctx.save();

    if (stroke.tool === "eraser") {
      // Radiert nur gezeichnete Sachen, Template bleibt, weil das danach kommt
      ctx.globalCompositeOperation = "destination-out";
      ctx.strokeStyle = "rgba(0,0,0,1)";
      ctx.lineWidth = stroke.width;
      ctx.globalAlpha = 1;
    } else if (stroke.tool === "highlighter") {
      // Halbtransparent wie echter Textmarker
      ctx.globalCompositeOperation = "source-over";
      ctx.strokeStyle = stroke.color;
      ctx.lineWidth = stroke.width;
      ctx.globalAlpha = 0.35; // Transparent
    } else {
      // Normaler Stift
      ctx.globalCompositeOperation = "source-over";
      ctx.strokeStyle = stroke.color;
      ctx.lineWidth = stroke.width;
      ctx.globalAlpha = 1;
    }

    ctx.lineCap = "round";
    ctx.lineJoin = "round";

    const pts = stroke.points;
    if (pts.length > 1) {
      ctx.beginPath();
      ctx.moveTo(pts[0].x * canvas.width, pts[0].y * canvas.height);
      for (let i = 1; i < pts.length; i++) {
        ctx.lineTo(pts[i].x * canvas.width, pts[i].y * canvas.height);
      }
      ctx.stroke();
    }

    ctx.restore();
  });

  // Reset
  ctx.globalAlpha = 1;
  ctx.globalCompositeOperation = "source-over";

  // 2. Template (kariert, liniert, ...) am Ende oben drauf
  drawTemplate(page.template || "blank");
}

function previewShape(endPos) {
  // Wenn wir keine Startposition haben, k√∂nnen wir nichts anzeigen
  if (!shapeStartPos) return;

  const start = shapeStartPos;
  const end = endPos;

  // Erst die Seite normal zeichnen
  redrawActivePage();

  ctx.save();

  // Zeichenstil f√ºr die Vorschau
  ctx.globalCompositeOperation = "source-over";
  ctx.strokeStyle = currentColor;
  ctx.lineWidth = currentWidth;
  ctx.globalAlpha = 1;
  ctx.lineCap = "round";
  ctx.lineJoin = "round";
  // Optional: gestrichelt, damit man sieht: das ist nur Vorschau
  ctx.setLineDash([6, 4]);

  const sx = start.x * canvas.width;
  const sy = start.y * canvas.height;
  const ex = end.x * canvas.width;
  const ey = end.y * canvas.height;

  if (currentTool === "line") {
    // Gerade Linie
    ctx.beginPath();
    ctx.moveTo(sx, sy);
    ctx.lineTo(ex, ey);
    ctx.stroke();

  } else if (currentTool === "rect") {
    // Rechteck aus zwei Eckpunkten
    const x = Math.min(sx, ex);
    const y = Math.min(sy, ey);
    const w = Math.abs(ex - sx);
    const h = Math.abs(ey - sy);

    ctx.beginPath();
    ctx.rect(x, y, w, h);
    ctx.stroke();

  } else if (currentTool === "circle") {
    // Ellipse/Kreis
    const cx = (sx + ex) / 2;
    const cy = (sy + ey) / 2;
    const rx = Math.abs(ex - sx) / 2;
    const ry = Math.abs(ey - sy) / 2;

    ctx.beginPath();
    ctx.ellipse(cx, cy, rx, ry, 0, 0, 2 * Math.PI);
    ctx.stroke();
  }

  ctx.restore();
}


   function normPos(evt) {
         const rect = canvas.getBoundingClientRect();
         let clientX, clientY;

  if (evt.touches && evt.touches.length > 0) {
          clientX = evt.touches[0].clientX;
          clientY = evt.touches[0].clientY;
  } else {
        clientX = evt.clientX;
        clientY = evt.clientY;
  }

  const x = (clientX - rect.left) / rect.width;
  const y = (clientY - rect.top) / rect.height;
  return { x: Math.max(0, Math.min(1, x)), y: Math.max(0, Math.min(1, y)) };
}

// Abstand zwischen zwei Fingern
// Abstand zwischen zwei Fingern
function getTouchDistance(touches) {
  const dx = touches[0].clientX - touches[1].clientX;
  const dy = touches[0].clientY - touches[1].clientY;
  return Math.hypot(dx, dy);
}

// Mittelpunkt der zwei Finger
function getTouchCenter(touches) {
  return {
    x: (touches[0].clientX + touches[1].clientX) / 2,
    y: (touches[0].clientY + touches[1].clientY) / 2
  };
}

function handleTouchStart(e) {
  if (!e.touches || e.touches.length === 0) return;

  // Browser-Scroll/Zoom verhindern
  e.preventDefault();

  if (e.touches.length === 1) {
    // üëâ 1 Finger = normal zeichnen
    isPinching = false;
    startDrawing(e);
  } else if (e.touches.length === 2) {
    // üëâ 2 Finger = Pinch-Zoom starten
    isPinching = true;
    lastPinchDist = getTouchDistance(e.touches);
    lastPinchCenter = getTouchCenter(e.touches);
  }
}

function handleTouchMove(e) {
  if (!e.touches || e.touches.length === 0) return;

  if (isPinching && e.touches.length === 2) {
    // üëâ Pinch aktiv
    e.preventDefault();

    const newDist = getTouchDistance(e.touches);
    const newCenter = getTouchCenter(e.touches);

    // Zoom-Faktor anpassen
    const scaleChange = newDist / (lastPinchDist || newDist);
    zoom *= scaleChange;

    // Grenzen setzen (wie GoodNotes-ish)
    zoom = Math.max(0.5, Math.min(zoom, 4));

    // Pan unter den Fingern anpassen
    if (lastPinchCenter) {
      panX += newCenter.x - lastPinchCenter.x;
      panY += newCenter.y - lastPinchCenter.y;
    }

    lastPinchDist = newDist;
    lastPinchCenter = newCenter;

    updateCanvasTransform();
  } else if (!isPinching && e.touches.length === 1) {
    // üëâ normales Zeichnen mit einem Finger
    moveDrawing(e); // nutzt dein normPos(e)
  }
}

function handleTouchEnd(e) {
  // Pinch beenden, wenn weniger als 2 Finger
  if (isPinching && (!e.touches || e.touches.length < 2)) {
    isPinching = false;
    lastPinchDist = 0;
    lastPinchCenter = null;
  }

  // Wenn gar kein Finger mehr drauf -> Zeichnung abschlie√üen
  if (!e.touches || e.touches.length === 0) {
    stopDrawing(e);
  }
}

    function startDrawing(evt) {
  evt.preventDefault();
  const page = getActivePage();
  if (!page) return;

  drawing = true;
  redoStack = [];

  const p = normPos(evt);
  lastPos = p;

  if (["line", "rect", "circle"].includes(currentTool)) {
    // Formen: Startpunkt merken, Stroke nur als ‚ÄûPlatzhalter‚Äú
    shapeStartPos = p;
    currentStroke = {
      tool: "pen",
      color: currentColor,
      width: currentWidth,
      alpha: 1,
      points: [p]
    };
  } else {
    // Freihand-Stift / Marker / Radierer
    const stroke = {
      tool: currentTool,
      color: currentColor,
      // Marker bewusst dicker, wirkt mehr wie echter Textmarker
      width: currentTool === "highlighter" ? currentWidth * 4 : currentWidth,
      alpha: 1,
      points: [p]
    };

    if (currentTool === "eraser") {
      stroke.color = "#000000";
    }

    currentStroke = stroke;
    drawStrokeSegment(lastPos, p, stroke);
  }
}

function drawStrokeSegment(from, to, stroke) {
  ctx.save();

  if (stroke.tool === "eraser") {
    // Radiert nur gezeichnete Sachen, Template bleibt, weil das danach kommt
    ctx.globalCompositeOperation = "destination-out";
    ctx.strokeStyle = "rgba(0,0,0,1)";
    ctx.lineWidth = stroke.width;
    ctx.globalAlpha = 1;
  } else if (stroke.tool === "highlighter") {
    // Halbtransparent wie echter Textmarker
    ctx.globalCompositeOperation = "source-over";
    ctx.strokeStyle = stroke.color;
    ctx.lineWidth = stroke.width;
    ctx.globalAlpha = 0.35; // Transparent
  } else {
    // Normaler Stift
    ctx.globalCompositeOperation = "source-over";
    ctx.strokeStyle = stroke.color;
    ctx.lineWidth = stroke.width;
    ctx.globalAlpha = 1;
  }

  ctx.lineCap = "round";
  ctx.lineJoin = "round";

  ctx.beginPath();
  ctx.moveTo(from.x * canvas.width, from.y * canvas.height);
  ctx.lineTo(to.x * canvas.width, to.y * canvas.height);
  ctx.stroke();

  ctx.restore();
  ctx.globalAlpha = 1;
  ctx.globalCompositeOperation = "source-over";
}


function moveDrawing(evt) {
  if (!drawing || !currentStroke) return;
  evt.preventDefault();

  const raw = normPos(evt);

  // F√ºr Linien/Rechteck/Kreis keine Gl√§ttung, nur Vorschau
  if (["line", "rect", "circle"].includes(currentTool)) {
    previewShape(raw);
    lastPos = raw;
    return;
  }

  // Gl√§ttung: Mischung aus alter und neuer Position (f√ºhlt sich noch direkt an)
  const p = {
    x: lastPos.x * 0.35 + raw.x * 0.65,
    y: lastPos.y * 0.35 + raw.y * 0.65
  };

  // Winzige Bewegungen ignorieren ‚Üí weniger Zittern
  const dx = p.x - lastPos.x;
  const dy = p.y - lastPos.y;
  const dist2 = dx * dx + dy * dy;
  if (dist2 < 0.000004) {
    return;
  }

  drawStrokeSegment(lastPos, p, currentStroke);
  currentStroke.points.push(p);
  lastPos = p;
}

function stopDrawing(evt) {
  if (!drawing) return;
  drawing = false;

  const page = getActivePage();
  if (!page || !currentStroke) return;

  if (["line", "rect", "circle"].includes(currentTool)) {
    // finale Form als Punkte approximieren
    const start = shapeStartPos;
    const end = lastPos;
    let points = [];

    if (currentTool === "line") {
      points = [start, end];
    } else if (currentTool === "rect") {
      const xs = [start.x, end.x].sort((a, b) => a - b);
      const ys = [start.y, end.y].sort((a, b) => a - b);
      const xL = xs[0], xR = xs[1], yT = ys[0], yB = ys[1];
      points = [
        { x: xL, y: yT },
        { x: xR, y: yT },
        { x: xR, y: yB },
        { x: xL, y: yB },
        { x: xL, y: yT }
      ];
    } else if (currentTool === "circle") {
      const steps = 40;
      const cx = (start.x + end.x) / 2;
      const cy = (start.y + end.y) / 2;
      const rx = Math.abs(end.x - start.x) / 2;
      const ry = Math.abs(end.y - start.y) / 2;
      points = [];
      for (let i = 0; i <= steps; i++) {
        const t = (i / steps) * 2 * Math.PI;
        points.push({
          x: cx + rx * Math.cos(t),
          y: cy + ry * Math.sin(t)
        });
      }
    }

    currentStroke.points = points;
    page.strokes.push(currentStroke);
    undoStack.push(currentStroke);
    shapeStartPos = null;
    redrawActivePage();
  } else {
    // Freihand-Stift / Marker / Radierer
    if (currentStroke.points.length < 2) {
      currentStroke.points.push({ ...currentStroke.points[0] });
    }
    page.strokes.push(currentStroke);
    undoStack.push(currentStroke);
    // Nach jedem Freihand-Strich alles neu zeichnen
    redrawActivePage();
  }

  currentStroke = null;
  saveData();
}



    function doUndo() {
      const page = getActivePage();
      if (!page || page.strokes.length === 0) return;
      const stroke = page.strokes.pop();
      redoStack.push(stroke);
      undoStack.pop();
      redrawActivePage();
      saveData();
    }

    function doRedo() {
      const page = getActivePage();
      if (!page || redoStack.length === 0) return;
      const stroke = redoStack.pop();
      page.strokes.push(stroke);
      undoStack.push(stroke);
      redrawActivePage();
      saveData();
    }

    function clearPage() {
      const page = getActivePage();
      if (!page) return;
      if (!confirm("Diese Seite wirklich komplett leeren?")) return;
      page.strokes = [];
      undoStack = [];
      redoStack = [];
      redrawActivePage();
      saveData();
    }

    function exportPageAsPNG() {
      const page = getActivePage();
      if (!page) return;
      const link = document.createElement("a");
      link.href = canvas.toDataURL("image/png");
      link.download = (page.name || "Seite") + ".png";
      link.click();
    }

    // Canvas Events (Maus)
canvas.addEventListener("mousedown", startDrawing);
canvas.addEventListener("mousemove", moveDrawing);
canvas.addEventListener("mouseup", stopDrawing);
canvas.addEventListener("mouseleave", stopDrawing);


// Canvas Events (Touch ‚Äì 1 Finger = zeichnen, 2 Finger = Pinch-Zoom)
canvas.addEventListener("touchstart", handleTouchStart, { passive: false });
canvas.addEventListener("touchmove",  handleTouchMove,  { passive: false });
canvas.addEventListener("touchend",   handleTouchEnd,   { passive: false });
canvas.addEventListener("touchcancel",handleTouchEnd,   { passive: false });




    toolButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        toolButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        currentTool = btn.getAttribute("data-tool");
      });
    });

    colorPicker.addEventListener("input", () => {
      currentColor = colorPicker.value;
    });

    strokeButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        strokeButtons.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        currentWidth = parseInt(btn.getAttribute("data-width"), 10);
      });
    });

    undoBtn.addEventListener("click", doUndo);
    redoBtn.addEventListener("click", doRedo);
    clearBtn.addEventListener("click", clearPage);
    addNotebookBtn.addEventListener("click", addNotebook);
    notebookSelect.addEventListener("change", e => switchNotebook(e.target.value));
    addPageBtn.addEventListener("click", addPage);
    templateSelect.addEventListener("change", e => setPageTemplate(e.target.value));
    exportPageBtn.addEventListener("click", exportPageAsPNG);

    // Rastergr√∂√üe √§ndern
if (templateSizeSelect) {
  // Beim Start auf gespeicherten Wert setzen
  templateSizeSelect.value = data.templateScale || "medium";

  templateSizeSelect.addEventListener("change", (e) => {
    data.templateScale = e.target.value;  // "small" | "medium" | "large"
    saveData();
    redrawActivePage();                   // Canvas neu zeichnen mit neuer Gr√∂√üe
  });
}


    // Backup
    exportJsonBtn.addEventListener("click", () => {
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "uni-hyper-notes-backup.json";
      a.click();
      URL.revokeObjectURL(url);
    });
// Backup laden (Import)
importJsonBtn.addEventListener("click", () => {
  importJsonInput.value = "";      // evtl. alte Auswahl zur√ºcksetzen
  importJsonInput.click();         // Datei-Dialog √∂ffnen
});

importJsonInput.addEventListener("change", () => {
  const file = importJsonInput.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = (e) => {
    try {
      const imported = JSON.parse(e.target.result);

      // Ganz grobe Plausibilit√§tspr√ºfung
      if (!imported || !Array.isArray(imported.notebooks)) {
        alert("Diese Datei sieht nicht wie ein Uni-Hyper-Notes-Backup aus.");
        return;
      }

      // Unsere globale data ersetzen
      data = imported;

      // Sicherheitshalber: falls alte Backups ein paar Felder nicht hatten
      if (!data.cards) data.cards = { decks: [] };
      if (!data.planner) data.planner = { exams: [], focusSessions: [] };
      if (!data.formulas) data.formulas = [];
      if (!data.tasks) data.tasks = [];
      if (!data.brain) data.brain = { entries: [] };
      if (!data.theme) data.theme = "dark";

      // Aktive IDs setzen, falls fehlen
      if (!data.activeNotebookId && data.notebooks[0]) {
        data.activeNotebookId = data.notebooks[0].id;
      }
      const nb = data.notebooks.find(nb => nb.id === data.activeNotebookId) || data.notebooks[0];
      if (nb && !data.activePageId && nb.pages[0]) {
        data.activePageId = nb.pages[0].id;
      }

      // In localStorage speichern
      saveData();

      // UI komplett neu aufbauen
      applyTheme();
      renderNotebookSelect();
      resizeCanvas();
      renderPageList();
      redrawActivePage();
      renderDecks();
      renderExams();
      renderFormulas();
      renderTasks();
      renderBrainHistory();
      renderStats();
      renderToolInputs();
      renderLearnSubjects();
      renderLearnTopics();
      renderLearnContent();

      alert("Backup wurde erfolgreich geladen ‚úÖ");

    } catch (err) {
      console.error(err);
      alert("Fehler beim Laden des Backups. Bist du sicher, dass es die richtige Datei ist?");
    }
  };

  reader.readAsText(file, "utf-8");
});

    // ---------- KARTEIKARTEN ----------
    const deckNameInput = document.getElementById("cardDeckName");
    const addDeckBtn = document.getElementById("addDeckBtn");
    const deckListDiv = document.getElementById("deckList");
    const cardQuestion = document.getElementById("cardQuestion");
    const cardAnswer = document.getElementById("cardAnswer");
    const cardTags = document.getElementById("cardTags");
    const addCardBtn = document.getElementById("addCardBtn");
    const cardListDiv = document.getElementById("cardList");
    const studyDeckSelect = document.getElementById("studyDeckSelect");
    const startStudyBtn = document.getElementById("startStudyBtn");
    const studyArea = document.getElementById("studyArea");
    const studyQuestionDiv = document.getElementById("studyQuestion");
    const studyAnswerDiv = document.getElementById("studyAnswer");
    const revealAnswerBtn = document.getElementById("revealAnswerBtn");
    const studyFeedback = document.getElementById("studyFeedback");
    const studyGradeBtns = document.querySelectorAll(".studyGradeBtn");
    let currentStudyDeckId = null;
    let currentStudyCardId = null;

    function renderDecks() {
      deckListDiv.innerHTML = "";
      studyDeckSelect.innerHTML = "";
      data.cards.decks.forEach(deck => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `<strong>${deck.name}</strong> <span class="badge">${deck.cards.length} Karten</span>`;
        card.addEventListener("click", () => selectDeck(deck.id));
        deckListDiv.appendChild(card);

        const opt = document.createElement("option");
        opt.value = deck.id;
        opt.textContent = deck.name;
        studyDeckSelect.appendChild(opt);
      });
      if (!currentStudyDeckId && data.cards.decks[0]) currentStudyDeckId = data.cards.decks[0].id;
      if (currentStudyDeckId) studyDeckSelect.value = currentStudyDeckId;
      renderCards();
    }

    function selectDeck(id) {
      currentStudyDeckId = id;
      renderCards();
    }

    function renderCards() {
      const deck = data.cards.decks.find(d => d.id === currentStudyDeckId);
      cardListDiv.innerHTML = "";
      if (!deck) return;
      deck.cards.forEach(c => {
        const div = document.createElement("div");
        div.className = "card";
        const due = c.nextDue ? new Date(c.nextDue) : null;
        const daysLeft = due ? Math.round((due - Date.now()) / (1000 * 60 * 60 * 24)) : null;
        div.innerHTML = `
          <div style="font-weight:600;">${c.q}</div>
          <div style="font-size:13px; margin-top:4px; opacity:0.8;">${c.a}</div>
          <div style="margin-top:4px;">
            ${(c.tags || []).map(t => `<span class="pill">${t}</span>`).join("")}
          </div>
          <div style="margin-top:4px; font-size:11px; opacity:0.7;">
            N√§chste Wiederholung: ${
              due
                ? due.toLocaleDateString() +
                  (daysLeft >= 0 ? ` (in ${daysLeft} Tagen)` : ` (√ºberf√§llig)`)
                : "noch nie"
            }
          </div>`;
        cardListDiv.appendChild(div);
      });
    }

    function addDeck() {
      const name = deckNameInput.value.trim();
      if (!name) return;
      data.cards.decks.push({ id: "deck-" + Date.now(), name, cards: [] });
      deckNameInput.value = "";
      saveData();
      renderDecks();
    }

    function addCard() {
      const deck = data.cards.decks.find(d => d.id === currentStudyDeckId);
      if (!deck) return;
      const q = cardQuestion.value.trim();
      const a = cardAnswer.value.trim();
      if (!q || !a) return;
      const tags = cardTags.value
        ? cardTags.value.split(",").map(t => t.trim()).filter(Boolean)
        : [];
      deck.cards.push({
        id: "card-" + Date.now(),
        q, a, tags,
        nextDue: null,
        easiness: 2.5,
        interval: 1,
        repetitions: 0
      });
      cardQuestion.value = "";
      cardAnswer.value = "";
      cardTags.value = "";
      saveData();
      renderCards();
    }

    function startStudy() {
      const deckId = studyDeckSelect.value;
      currentStudyDeckId = deckId;
      const deck = data.cards.decks.find(d => d.id === deckId);
      if (!deck || deck.cards.length === 0) return;
      pickNextStudyCard();
      studyArea.style.display = "block";
    }

    function pickNextStudyCard() {
      const deck = data.cards.decks.find(d => d.id === currentStudyDeckId);
      if (!deck) return;
      const now = Date.now();
      const dueCards = deck.cards.filter(c => !c.nextDue || c.nextDue <= now);
      const pool = dueCards.length > 0 ? dueCards : deck.cards;
      const card = pool[Math.floor(Math.random() * pool.length)];
      currentStudyCardId = card.id;
      studyQuestionDiv.textContent = card.q;
      studyAnswerDiv.textContent = card.a;
      studyAnswerDiv.style.display = "none";
      studyFeedback.style.display = "none";
      revealAnswerBtn.style.display = "inline-block";
    }

    function revealAnswer() {
      studyAnswerDiv.style.display = "block";
      studyFeedback.style.display = "block";
      revealAnswerBtn.style.display = "none";
    }

    function gradeStudy(evt) {
      const grade = parseInt(evt.target.getAttribute("data-grade"), 10);
      const deck = data.cards.decks.find(d => d.id === currentStudyDeckId);
      if (!deck) return;
      const card = deck.cards.find(c => c.id === currentStudyCardId);
      if (!card) return;
      let e = card.easiness || 2.5;
      e = e + (0.1 - (3 - grade) * (0.08 + (3 - grade) * 0.02));
      if (e < 1.3) e = 1.3;
      card.easiness = e;
      if (grade < 2) {
        card.repetitions = 0;
        card.interval = 1;
      } else {
        card.repetitions = (card.repetitions || 0) + 1;
        if (card.repetitions === 1) card.interval = 1;
        else if (card.repetitions === 2) card.interval = 6;
        else card.interval = Math.round((card.interval || 1) * e);
      }
      const now = Date.now();
      card.nextDue = now + card.interval * 24 * 60 * 60 * 1000;
      saveData();
      renderCards();
      pickNextStudyCard();
    }

    addDeckBtn.addEventListener("click", addDeck);
    addCardBtn.addEventListener("click", addCard);
    startStudyBtn.addEventListener("click", startStudy);
    revealAnswerBtn.addEventListener("click", revealAnswer);
    studyGradeBtns.forEach(b => b.addEventListener("click", gradeStudy));

    // ---------- PLANER ----------
    const examName = document.getElementById("examName");
    const examDate = document.getElementById("examDate");
    const examWeight = document.getElementById("examWeight");
    const addExamBtn = document.getElementById("addExamBtn");
    const examListDiv = document.getElementById("examList");
    const blockTopic = document.getElementById("blockTopic");
    const blockMinutes = document.getElementById("blockMinutes");
    const startBlockBtn = document.getElementById("startBlockBtn");
    const focusStatus = document.getElementById("focusStatus");
    let blockTimer = null;
    let blockEndTime = null;

    function renderExams() {
      examListDiv.innerHTML = "";
      const exams = data.planner.exams.slice().sort((a, b) => (a.date || "") < (b.date || "") ? -1 : 1);
      exams.forEach(ex => {
        const div = document.createElement("div");
        div.className = "card";
        const d = ex.date ? new Date(ex.date) : null;
        let daysText = "‚Äì";
        if (d) {
          const diff = Math.round((d.getTime() - Date.now()) / (1000 * 60 * 60 * 24));
          daysText = diff >= 0 ? `in ${diff} Tagen` : `${-diff} Tage her`;
        }
        div.innerHTML = `
          <div style="font-weight:600;">${ex.name}</div>
          <div style="font-size:13px; margin-top:4px;">Datum: ${d ? d.toLocaleDateString() : "kein Datum"} | Wichtigkeit: ${ex.weight || "-"}</div>
          <div style="font-size:12px; margin-top:4px; opacity:0.8;">${daysText}</div>`;
        examListDiv.appendChild(div);
      });
    }

    function addExam() {
      const name = examName.value.trim();
      const date = examDate.value || null;
      const weight = examWeight.value ? parseInt(examWeight.value, 10) : null;
      if (!name) return;
      data.planner.exams.push({ id: "exam-" + Date.now(), name, date, weight });
      examName.value = "";
      examDate.value = "";
      examWeight.value = "";
      saveData();
      renderExams();
    }

    function startFocusBlock() {
      const topic = blockTopic.value.trim();
      let minutes = parseInt(blockMinutes.value, 10);
      if (!topic || !minutes || minutes < 5) return;
      const session = {
        id: "fs-" + Date.now(),
        topic,
        minutes,
        timestamp: Date.now()
      };
      data.planner.focusSessions.push(session);
      saveData();
      blockEndTime = Date.now() + minutes * 60 * 1000;
      updateFocusStatus();
      if (blockTimer) clearInterval(blockTimer);
      blockTimer = setInterval(updateFocusStatus, 1000);
    }

    function updateFocusStatus() {
      if (!blockEndTime) {
        focusStatus.textContent = "";
        return;
      }
      const diff = blockEndTime - Date.now();
      if (diff <= 0) {
        focusStatus.textContent = "Fokus-Block beendet ‚Äì nice!";
        clearInterval(blockTimer);
        blockTimer = null;
        blockEndTime = null;
        return;
      }
      const m = Math.floor(diff / 60000);
      const s = Math.floor((diff % 60000) / 1000);
      focusStatus.textContent = `Fokus l√§uft ‚Äì noch ${m}m ${s}s`;
    }

    addExamBtn.addEventListener("click", addExam);
    startBlockBtn.addEventListener("click", startFocusBlock);

    // ---------- FORMELN ----------
    const formulaName = document.getElementById("formulaName");
    const formulaExpression = document.getElementById("formulaExpression");
    const formulaTopic = document.getElementById("formulaTopic");
    const formulaVariables = document.getElementById("formulaVariables");
    const formulaNotes = document.getElementById("formulaNotes");
    const addFormulaBtn = document.getElementById("addFormulaBtn");
    const loadBiotechFormulasBtn = document.getElementById("loadBiotechFormulasBtn");
    const formulaFilter = document.getElementById("formulaFilter");
    const formulaListDiv = document.getElementById("formulaList");

    function renderFormulas() {
      const q = formulaFilter.value.toLowerCase();
      formulaListDiv.innerHTML = "";
      data.formulas
        .filter(f =>
          !q ||
          f.name.toLowerCase().includes(q) ||
          (f.topic || "").toLowerCase().includes(q)
        )
        .forEach(f => {
          const div = document.createElement("div");
          div.className = "card";
          div.innerHTML = `
            <div style="font-weight:600;">${f.name}</div>
            <div style="margin-top:4px;">${f.expression}</div>
            <div style="margin-top:4px; font-size:12px;">
              Thema: <span class="pill">${f.topic || "-"}</span>
            </div>
            <div style="margin-top:4px; font-size:12px; opacity:0.8;">
              Variablen: ${f.variables || "-"}
            </div>
            <div style="margin-top:4px; font-size:12px;">${f.notes || ""}</div>`;
          formulaListDiv.appendChild(div);
        });
    }

    function addFormula() {
      const name = formulaName.value.trim();
      const expr = formulaExpression.value.trim();
      if (!name || !expr) return;
      data.formulas.push({
        id: "formula-" + Date.now(),
        name,
        expression: expr,
        topic: formulaTopic.value.trim(),
        variables: formulaVariables.value.trim(),
        notes: formulaNotes.value.trim()
      });
      formulaName.value = "";
      formulaExpression.value = "";
      formulaTopic.value = "";
      formulaVariables.value = "";
      formulaNotes.value = "";
      saveData();
      renderFormulas();
    }

    function loadBiotechFormulas() {
      const presets = [
        {
          name: "Ideale Gasgleichung",
          expression: "p ¬∑ V = n ¬∑ R ¬∑ T",
          topic: "Allgemeine Chemie / Gase",
          variables: "p [Pa], V [m¬≥], n [mol], R = 8,314 J¬∑mol‚Åª¬π¬∑K‚Åª¬π, T [K]",
          notes: "Grundformel f√ºr ideale Gase. In PC/Allg. Chemie oft umstellen nach p, V, n oder T."
        },
        {
          name: "Arrhenius-Gleichung",
          expression: "k = A ¬∑ e^(‚àíE‚Çê / (R ¬∑ T))",
          topic: "Allgemeine Chemie / Kinetik",
          variables: "k [1/s], A: Frequenzfaktor, E‚Çê [J/mol], R, T [K]",
          notes: "Beschreibt Temperaturabh√§ngigkeit der Reaktionsgeschwindigkeit."
        },
        {
          name: "Lambert-Beer-Gesetz",
          expression: "A = Œµ ¬∑ c ¬∑ l",
          topic: "Analytik / Spektroskopie",
          variables: "A: Absorption, Œµ [L¬∑mol‚Åª¬π¬∑cm‚Åª¬π], c [mol/L], l [cm]",
          notes: "Standard zur Konzentrationsbestimmung mit Photometer."
        },
        {
          name: "Henderson-Hasselbalch",
          expression: "pH = pK‚Çê + log10([A‚Åª]/[HA])",
          topic: "Allgemeine Chemie / S√§ure-Base",
          variables: "[A‚Åª]: konjugierte Base, [HA]: S√§ure",
          notes: "Wichtig zur Berechnung von Pufferl√∂sungen."
        },
        {
          name: "Verd√ºnnungsgleichung",
          expression: "c‚ÇÅ ¬∑ V‚ÇÅ = c‚ÇÇ ¬∑ V‚ÇÇ",
          topic: "Allgemeine Chemie / L√∂sungen",
          variables: "c in [mol/L], V in [L]",
          notes: "Basis beim Ansetzen und Verd√ºnnen von L√∂sungen."
        },
        {
          name: "Stoffmenge",
          expression: "n = m / M",
          topic: "Allgemeine Chemie / Grundlagen",
          variables: "n [mol], m [g], M [g/mol]",
          notes: "Elementare Umrechnung zwischen Masse und Stoffmenge."
        }
      ];

      presets.forEach(f => {
        const exists = data.formulas.some(ex => ex.name === f.name);
        if (!exists) {
          data.formulas.push({
            id: "formula-" + Date.now() + "-" + Math.random().toString(36).slice(2),
            name: f.name,
            expression: f.expression,
            topic: f.topic,
            variables: f.variables,
            notes: f.notes
          });
        }
      });

      saveData();
      renderFormulas();
      alert("Biotech/Allg.-Chemie-Basisformeln wurden hinzugef√ºgt (wo sie noch gefehlt haben).");
    }

    addFormulaBtn.addEventListener("click", addFormula);
    formulaFilter.addEventListener("input", renderFormulas);
    loadBiotechFormulasBtn.addEventListener("click", loadBiotechFormulas);

    // ---------- TOOLS / RECHENTOOL ----------
    const toolFormulaSelect = document.getElementById("toolFormulaSelect");
    const toolInputs = document.getElementById("toolInputs");
    const toolCalcBtn = document.getElementById("toolCalcBtn");
    const toolResult = document.getElementById("toolResult");

    function renderToolInputs() {
      const mode = toolFormulaSelect.value;
      toolResult.textContent = "";
      if (mode === "dilution") {
        toolInputs.innerHTML = `
          <div class="row">
            <div><input type="number" step="any" id="dil_c1" placeholder="c‚ÇÅ (leer lassen, wenn gesucht)"></div>
            <div><input type="number" step="any" id="dil_v1" placeholder="V‚ÇÅ"></div>
          </div>
          <div class="row" style="margin-top:4px;">
            <div><input type="number" step="any" id="dil_c2" placeholder="c‚ÇÇ"></div>
            <div><input type="number" step="any" id="dil_v2" placeholder="V‚ÇÇ"></div>
          </div>
          <div style="font-size:11px; opacity:0.8; margin-top:4px;">Hinweis: Eine der Gr√∂√üen (c‚ÇÅ, V‚ÇÅ, c‚ÇÇ oder V‚ÇÇ) leer lassen, dann wird sie berechnet. Einheiten m√ºssen zueinander passen.</div>
        `;
      } else if (mode === "lambert") {
        toolInputs.innerHTML = `
          <div class="row">
            <div><input type="number" step="any" id="lam_A" placeholder="A (Absorption)"></div>
            <div><input type="number" step="any" id="lam_eps" placeholder="Œµ (z.B. L¬∑mol‚Åª¬π¬∑cm‚Åª¬π)"></div>
          </div>
          <div class="row" style="margin-top:4px;">
            <div><input type="number" step="any" id="lam_c" placeholder="c [mol/L] (leer lassen, wenn gesucht)"></div>
            <div><input type="number" step="any" id="lam_l" placeholder="l [cm]"></div>
          </div>
          <div style="font-size:11px; opacity:0.8; margin-top:4px;">Lambert-Beer: A = Œµ ¬∑ c ¬∑ l. Eine der Gr√∂√üen (meist c) leer lassen, dann wird sie berechnet.</div>
        `;
      }
    }

    function calcTool() {
      const mode = toolFormulaSelect.value;
      toolResult.textContent = "";
      if (mode === "dilution") {
        const c1 = parseFloat(document.getElementById("dil_c1").value);
        const v1 = parseFloat(document.getElementById("dil_v1").value);
        const c2 = parseFloat(document.getElementById("dil_c2").value);
        const v2 = parseFloat(document.getElementById("dil_v2").value);

        const vals = { c1, v1, c2, v2 };
        const empty = Object.entries(vals).filter(([k,v]) => isNaN(v));
        if (empty.length !== 1) {
          toolResult.textContent = "Bitte genau EINE Gr√∂√üe leer lassen.";
          return;
        }
        const missing = empty[0][0];
        let result;
        try {
          if (missing === "c1") result = c2 * v2 / v1;
          else if (missing === "v1") result = c2 * v2 / c1;
          else if (missing === "c2") result = c1 * v1 / v2;
          else if (missing === "v2") result = c1 * v1 / c2;
        } catch {
          toolResult.textContent = "Rechenfehler ‚Äì bitte Eingaben pr√ºfen.";
          return;
        }
        toolResult.textContent = `Ergebnis: ${missing} = ${result}`;
      } else if (mode === "lambert") {
        const A = parseFloat(document.getElementById("lam_A").value);
        const eps = parseFloat(document.getElementById("lam_eps").value);
        const c = parseFloat(document.getElementById("lam_c").value);
        const l = parseFloat(document.getElementById("lam_l").value);

        const vals = { A, eps, c, l };
        const empty = Object.entries(vals).filter(([k,v]) => isNaN(v));
        if (empty.length !== 1) {
          toolResult.textContent = "Bitte genau EINE Gr√∂√üe leer lassen.";
          return;
        }
        const missing = empty[0][0];
        let result;
        try {
          if (missing === "A") result = eps * c * l;
          else if (missing === "eps") result = A / (c * l);
          else if (missing === "c") result = A / (eps * l);
          else if (missing === "l") result = A / (eps * c);
        } catch {
          toolResult.textContent = "Rechenfehler ‚Äì bitte Eingaben pr√ºfen.";
          return;
        }
        toolResult.textContent = `Ergebnis: ${missing} = ${result}`;
      }
    }

    toolFormulaSelect.addEventListener("change", renderToolInputs);
    toolCalcBtn.addEventListener("click", calcTool);

    // ---------- AUFGABEN ----------
    const taskTitle = document.getElementById("taskTitle");
    const taskTopic = document.getElementById("taskTopic");
    const taskText = document.getElementById("taskText");
    const taskNotes = document.getElementById("taskNotes");
    const addTaskBtn = document.getElementById("addTaskBtn");
    const taskListDiv = document.getElementById("taskList");

    function renderTasks() {
      taskListDiv.innerHTML = "";
      data.tasks.forEach(t => {
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div><strong>${t.title}</strong></div>
            <div>
              <span class="pill">${t.topic || "-"}</span>
              <select data-id="${t.id}" class="taskStatusSel">
                <option value="open" ${t.status === "open" ? "selected" : ""}>unsicher</option>
                <option value="ok" ${t.status === "ok" ? "selected" : ""}>geht so</option>
                <option value="done" ${t.status === "done" ? "selected" : ""}>sicher</option>
              </select>
            </div>
          </div>
          <div style="margin-top:4px; font-size:13px; white-space:pre-wrap;">${t.text}</div>
          <div style="margin-top:4px; font-size:12px; opacity:0.8; white-space:pre-wrap;">${t.notes || ""}</div>`;
        taskListDiv.appendChild(div);
      });
      document.querySelectorAll(".taskStatusSel").forEach(sel => {
        sel.addEventListener("change", evt => {
          const id = evt.target.getAttribute("data-id");
          const task = data.tasks.find(tt => tt.id === id);
          if (!task) return;
          task.status = evt.target.value;
          saveData();
        });
      });
    }

    function addTask() {
      const title = taskTitle.value.trim();
      const text = taskText.value.trim();
      if (!title || !text) return;
      data.tasks.push({
        id: "task-" + Date.now(),
        title,
        topic: taskTopic.value.trim(),
        text,
        notes: taskNotes.value.trim(),
        status: "open"
      });
      taskTitle.value = "";
      taskTopic.value = "";
      taskText.value = "";
      taskNotes.value = "";
      saveData();
      renderTasks();
    }

    addTaskBtn.addEventListener("click", addTask);

    // ---------- BRAIN-DUMP ----------
    const brainText = document.getElementById("brainText");
    const saveBrainBtn = document.getElementById("saveBrainBtn");
    const brainStatus = document.getElementById("brainStatus");
    const brainHistory = document.getElementById("brainHistory");

    function renderBrainHistory() {
      brainHistory.innerHTML = "";
      const entries = data.brain.entries.slice().sort((a, b) => b.date - a.date);
      entries.forEach(e => {
        const div = document.createElement("div");
        div.className = "card";
        const d = new Date(e.date);
        div.innerHTML = `
          <div style="font-size:12px; opacity:0.7;">${d.toLocaleString()}</div>
          <div style="margin-top:4px; white-space:pre-wrap;">${e.text}</div>`;
        brainHistory.appendChild(div);
      });
    }

    function saveBrainEntry() {
      const text = brainText.value.trim();
      if (!text) return;
      data.brain.entries.push({ id: "brain-" + Date.now(), text, date: Date.now() });
      brainText.value = "";
      brainStatus.textContent = "Gespeichert.";
      setTimeout(() => (brainStatus.textContent = ""), 2000);
      saveData();
      renderBrainHistory();
    }

    saveBrainBtn.addEventListener("click", saveBrainEntry);

    // ---------- STATS ----------
    const statsContent = document.getElementById("statsContent");

    function renderStats() {
      const sessions = data.planner.focusSessions || [];
      if (sessions.length === 0) {
        statsContent.textContent = "Noch keine Fokus-Sessions gespeichert.";
        return;
      }
      const totalMinutes = sessions.reduce((sum, s) => sum + (s.minutes || 0), 0);
      const byTopic = {};
      sessions.forEach(s => {
        const t = s.topic || "Sonstiges";
        byTopic[t] = (byTopic[t] || 0) + (s.minutes || 0);
      });
      let html = `<div>Gesamt-Lernzeit (nur Fokus-Bl√∂cke): <strong>${totalMinutes} Minuten</strong></div>`;
      html += `<div style="margin-top:6px;">Verteilung nach Themen:</div>`;
      html += `<ul style="padding-left:16px; margin-top:4px;">`;
      Object.keys(byTopic).forEach(t => {
        html += `<li>${t}: ${byTopic[t]} Min</li>`;
      });
      html += `</ul>`;
      statsContent.innerHTML = html;
    }

    // ---------- LERNEN ----------
    const learnSubjectsUl = document.getElementById("learnSubjects");
    const learnTopicsUl = document.getElementById("learnTopics");
    const learnContentDiv = document.getElementById("learnContent");
    let currentSubjectId = "allg-chem";
    let currentTopicId = "aufbau-materie";

    function renderLearnSubjects() {
      learnSubjectsUl.innerHTML = "";
      learnData.subjects.forEach(sub => {
        const li = document.createElement("li");
        li.className = "learn-item" + (sub.id === currentSubjectId ? " active" : "");
        li.textContent = sub.name;
        li.addEventListener("click", () => {
          currentSubjectId = sub.id;
          const firstTopic = sub.topics[0];
          if (firstTopic) currentTopicId = firstTopic.id;
          renderLearnSubjects();
          renderLearnTopics();
          renderLearnContent();
        });
        learnSubjectsUl.appendChild(li);
      });
    }

    function renderLearnTopics() {
      learnTopicsUl.innerHTML = "";
      const subject = learnData.subjects.find(s => s.id === currentSubjectId);
      if (!subject) return;
      subject.topics.forEach(t => {
        const li = document.createElement("li");
        li.className = "learn-item" + (t.id === currentTopicId ? " active" : "");
        li.textContent = t.title;
        li.addEventListener("click", () => {
          currentTopicId = t.id;
          renderLearnTopics();
          renderLearnContent();
        });
        learnTopicsUl.appendChild(li);
      });
    }

 function renderLearnContent() {
  const subject = learnData.subjects.find(s => s.id === currentSubjectId);
  if (!subject) {
    learnContentDiv.innerHTML = "";
    return;
  }

  const topic = subject.topics.find(t => t.id === currentTopicId) || subject.topics[0];
  if (!topic) {
    learnContentDiv.innerHTML = "";
    return;
  }

  const tagsHtml = (topic.tags || [])
    .map(tag => `<span class="learn-chip">${tag}</span>`)
    .join("");

  const goalsHtml = (topic.goals || [])
    .map(g => `<li>${g}</li>`)
    .join("");

  const keyHtml = (topic.keyPoints || [])
    .map(k => `<li>${k}</li>`)
    .join("");

  const formulasHtml = (topic.formulas || [])
    .map(f => `<li><code>${f}</code></li>`)
    .join("");

  const visualHtml = topic.visual
    ? `<div class="learn-section-title">Visuelle Hilfe</div>
       <div class="learn-visual">${topic.visual}</div>`
    : "";

  const detailBlocksHtml = (topic.detailBlocks || [])
    .map(block => `
      <div class="learn-section-title">${block.title}</div>
      <div style="font-size:12px; line-height:1.5; margin-bottom:6px;">
        ${block.content}
      </div>
    `)
    .join("");

  learnContentDiv.innerHTML = `
    <div class="card learn-card">
      <div class="learn-card-header">
        <div>
          <div class="learn-heading">${topic.title}</div>
          <div class="learn-subheading">${subject.name}</div>
        </div>
        <div class="learn-tagcount">
          ${(topic.tags || []).length} Stichworte
        </div>
      </div>

      <div class="learn-chiprow">${tagsHtml}</div>

      <div class="learn-section-title">Lernziele</div>
      <ul class="learn-list">${goalsHtml}</ul>

      <div class="learn-section-title">Zusammenfassung</div>
      <p style="font-size:13px; line-height:1.5; margin-top:4px;">
        ${topic.summary}
      </p>

      <div class="learn-section-title">Wichtige Punkte</div>
      <ul class="learn-list">${keyHtml}</ul>

      ${formulasHtml
        ? `<div class="learn-section-title">Wichtige Formeln (√úberblick)</div>
           <ul class="learn-list">${formulasHtml}</ul>`
        : ""}

      ${visualHtml}

      ${detailBlocksHtml}
    </div>
  `;
}


    // ---------- INIT ----------
    window.addEventListener("load", () => {
      loadData();
      applyTheme();
      renderNotebookSelect();
      resizeCanvas();
      renderPageList();
      redrawActivePage();
      renderDecks();
      renderExams();
      renderFormulas();
      renderTasks();
      renderBrainHistory();
      renderStats();
      renderToolInputs();
      renderLearnSubjects();
      renderLearnTopics();
      renderLearnContent();
      syncFromCloud();
     });

       // --- Sync-Button: Sync-ID speichern + aus Cloud laden ---
if (syncSaveBtn && syncIdInput) {
     syncSaveBtn.addEventListener("click", () => {
      const entered = syncIdInput.value.trim();
    if (!entered) {
      alert("Bitte eine Sync-ID eingeben.");
      return;
    }

        syncId = entered;
    localStorage.setItem("uniHyperNotes_syncId", syncId);
    updateSyncStatus("Sync-ID gespeichert: " + syncId);

    // Beim Klick auch gleich aus der Cloud laden
    syncFromCloud();
  });
}
</script>   <!-- Ende des gro√üen Haupt-Scripts -->

<script id="notebook-system">
           // HIER BAUT CODEX die Notebook- und F√§cherlogik ein
</script>



<script id="flashcards-system">
// ---------- Aminos√§ure-Karteikarten ‚Äì Grundsystem ----------

// 1. Daten zu den Aminos√§uren
const aminoCards = [
  {
    id: "gly",
    name: "Glycin",
    three: "Gly",
    one: "G",
    category: "klein, unpolar",
    structure: `
  H
  |
H‚ÇÇN ‚Äî C ‚Äî H
  |
 COOH`
  },
  {
    id: "ala",
    name: "Alanin",
    three: "Ala",
    one: "A",
    category: "klein, unpolar (CH‚ÇÉ-Seitenkette)",
    structure: `
  H
  |
H‚ÇÇN ‚Äî C ‚Äî CH‚ÇÉ
  |
 COOH`
  },
  {
    id: "ser",
    name: "Serin",
    three: "Ser",
    one: "S",
    category: "polar, ungeladen (CH‚ÇÇOH-Seitenkette)",
    structure: `
  H
  |
H‚ÇÇN ‚Äî C ‚Äî CH‚ÇÇOH
  |
 COOH`
  },
  // üëâ hier sp√§ter die restlichen 17 eintragen

{
  id: "val",
  name: "Valin",
  three: "Val",
  one: "V",
  category: "unpolar, verzweigte Seitenkette",
  structure: `
  H
  |
       H‚ÇÇN ‚Äî C ‚Äî CH(CH‚ÇÉ)‚ÇÇ
  |
 COOH`
},

{
  id: "thr",
  name: "Threonin",
  three: "Thr",
  one: "T",
  category: "polar, ungeladen (CH(OH)CH‚ÇÉ-Seitenkette)",
  structure: `
 OH
 |
   H ‚Äî C ‚Äî CH‚ÇÉ
 |
 ‚Å∫H‚ÇÉN ‚Äî C ‚Äî COO‚Åª
 |
 H
`
},

{
  id: "cys",
  name: "Cystein",
  three: "Cys",
  one: "C",
  category: "polar, ungeladen (CH‚ÇÇSH-Seitenkette)",
  structure: `
H
|
    ‚Å∫H‚ÇÉN ‚Äî C ‚Äî CH‚ÇÇ ‚Äî SH
|
COOH`
},

{
  id: "met",
  name: "Methionin",
  three: "Met",
  one: "M",
  category: "unpolar (SCH‚ÇÉ-Seitenkette)",
  structure: `
H
|
               ‚Å∫H‚ÇÉN ‚Äî C ‚Äî CH‚ÇÇ ‚Äî CH‚ÇÇ ‚Äî S ‚Äî CH‚ÇÉ
|
COO`
},

{
  id: "pro",
  name: "Prolin",
  three: "Pro",
  one: "P",
  category: "unpolar (pyrrolidin-Ring)",
  structure: `

          CH2
        /     \\
       H2C        CH2
         \\        /
                H2N+ ‚Äî C ‚Äî COO-
                |
                H

`
},

{
  id: "phe",
  name: "Phenylalanin",
  three: "Phe",
  one: "F",
  category: "aromatisch, unpolar (C‚ÇÜH‚ÇÖ-Seitenkette)",
  structure: `

        H
        |
  H3N+ ‚Äî C ‚Äî H
        |
       CH2
        |
      /  \\
      /    \\
      \\     /
      \\ _ /
  `
},

{
  id: "tyr",
  name: "Tyrosin",
  three: "Tyr",
  one: "Y",
  category: "aromatisch, polar (C‚ÇÜH‚ÇÑOH-Seitenkette)",
  structure: `
        H
        |
  H3N+ ‚Äî C ‚Äî H
        |
       CH2
        |
       / \\
       |   |
       |   |
       \\  /
        |
       HO
  `
},

{
  id: "trp",
  name: "Tryptophan",
  three: "Trp",
  one: "W",
  category: "aromatisch, unpolar (Indol-Ring)",
  structure: `
           H
           |
H3N+ ‚Äî C ‚Äî C ‚Äî COO-
           |
          CH2
           |
        / \\ / \\ 
         |       |HN
       |       |
        \\ / \\ /
  `
},

{
  id: "asn",
  name: "Asparagin",
  three: "Asn",
  one: "N",
  category: "polar, ungeladen (CONH‚ÇÇ-Seitenkette)",
  structure: `
           H
           |
           H3N+ ‚Äî C ‚Äî COO-
           |
          CH2
           |
           C
          // \\
            O   NH2
  `
},

{
  id: "gln",
  name: "Glutamin",
  three: "Gln",
  one: "Q",
  category: "polar, ungeladen (CH‚ÇÇCH‚ÇÇCONH‚ÇÇ-Seitenkette)",
  structure: `
           H
           |
           H3N+ ‚Äî C ‚Äî COO-
           |
          CH2
           |
          CH2
           |
           C
          // \\
            O   NH2
  `
},



{
  id: "lys",
  name: "Lysin",
  three: "Lys",
  one: "K",
  category: "basisch, positiv geladen (CH‚ÇÇ)‚ÇÑNH‚ÇÉ‚Å∫-Seitenkette)",
  structure: `
           H
           |
           H3N+ ‚Äî C ‚Äî COO-
           |
          CH2
           |
          CH2
           |
          CH2
           |
          CH2
           |
          NH3+
`
},

{
  id: "arg",
  name: "Arginin",
  three: "Arg",
  one: "R",
  category: "basisch, positiv geladen (Guanidinium-Gruppe)",
  structure: `

           H
           |
           H3N+ ‚Äî C ‚Äî COO-
           |
          CH2
           |
          CH2
           |
          CH2
           |
          NH
           |
           C
           /   \\

            H2N  +   NH2

`
},

{
  id: "his",
  name: "Histidin",
  three: "His",
  one: "H",
  category: "basisch, positiv geladen (Imidazol-Seitenkette)",
  structure: `

           H
           |
         H3N+ ‚Äî C ‚Äî COO-
           |
          CH2
           |
           C
         /        \\
         N        CH
         \\        /
        HC ‚Äî HN
  `

},

{
  id: "ile",
  name: "Isoleucin",
  three: "Ile",
  one: "I",
  category: "unpolar, verzweigt (CH(CH‚ÇÉ)CH‚ÇÇCH‚ÇÉ-Seitenkette)",
  structure: `
 H   H
 |   |
   ‚Å∫H‚ÇÉN ‚Äî C ‚Äî C‚ÄîCH‚ÇÇ‚Äî CH‚ÇÉ
 |   |
 COOH  CH‚ÇÉ

`
},

{
  id: "leu",
  name: "Leucin",
  three: "Leu",
  one: "L",
  category: "unpolar, verzweigt (CH‚ÇÇCH(CH‚ÇÉ)‚ÇÇ-Seitenkette)",
  structure: `
  H        H
  |        |
 ‚Å∫H‚ÇÉN ‚Äî C ‚Äî CH‚ÇÇ‚Äî C ‚Äî CH‚ÇÉ
  |        |
  COO‚Åª      CH‚ÇÉ
    `

},

{
    id: "glu",
    name: "Glutamat",
    three: "Glu",
    one: "E",
    category: "sauer, negativ geladen (COO‚Åª-Seitenkette)",
    structure: `
           H
           |
           H3N+ ‚Äî C ‚Äî COO-
           |
          CH2
           |
          CH2
           |
           C
           /   \\

            O  -   O

`
},

{
  id: "asp",
  name: "Asparagins√§ure",
  three: "Asp",
  one: "D",
  category: "negativ geladen (sauer, Carboxylat-Seitenkette)",
  structure: `
           H
           |
           H3N+ ‚Äî C ‚Äî COO-
           |
          CH2
           |
           C
           /   \\

            O  -   O
  `
},


];


// 2. Zustand (welche Karte + Vorder-/R√ºckseite)
let currentAminoIndex = 0;
let showBack = false;

// 3. Karte rendern
function renderAminoCard() {
  const container = document.getElementById("flashcardPreview");
  if (!container || aminoCards.length === 0) return;

  const card = aminoCards[currentAminoIndex];

  let content;
  if (!showBack) {
    // Vorderseite: Infos & Aufgabe
    content =
`Name: ${card.name} (${card.three}, ${card.one})
Eigenschaft: ${card.category}

‚úèÔ∏è Aufgabe: Zeichne die vollst√§ndige Strukturformel.`;
  } else {
    // R√ºckseite: Struktur in voller Schreibweise
    content = card.structure;
  }

  container.innerHTML = `
    <div class="amino-pretty">
${content}
    </div>
  `;
}

// 4. Buttons verdrahten
function initAminoFlashcards() {
  const flipBtn = document.getElementById("aminoFlipBtn");
  const nextBtn = document.getElementById("aminoNextBtn");
  const randomBtn = document.getElementById("aminoRandomBtn");

  if (flipBtn) {
    flipBtn.addEventListener("click", () => {
      showBack = !showBack;
      renderAminoCard();
    });
  }

  if (nextBtn) {
    nextBtn.addEventListener("click", () => {
      currentAminoIndex = (currentAminoIndex + 1) % aminoCards.length;
      showBack = false; // immer wieder mit Frage anfangen
      renderAminoCard();
    });
  }

  if (randomBtn) {
    randomBtn.addEventListener("click", () => {
      currentAminoIndex = Math.floor(Math.random() * aminoCards.length);
      showBack = false;
      renderAminoCard();
    });
  }

  // erste Karte anzeigen
  renderAminoCard();
}

// 5. Starten, sobald das Skript geladen ist
initAminoFlashcards();
</script>








</body>
</html>
